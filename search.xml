<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>PHP模拟发送CURL请求</title>
    <url>/posts/3e01b4d.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">PHP使用Curl模拟发送请求</blockquote>
<div class="note success">
            <p>主要用于第三方接口请求使用，接收请求数据接口返回数据。模拟发送POST请求</p>
          </div>

<h3 id="用于传递二维数组参数"><a href="#用于传递二维数组参数" class="headerlink" title="用于传递二维数组参数"></a>用于传递二维数组参数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">curlPost</span><span class="params">($url, $rawData)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	$ch = curl_init();</span><br><span class="line">	curl_setopt($ch, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);<span class="comment">//解决页面出现 Object moved to here</span></span><br><span class="line">	curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, <span class="number">10</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_POST, <span class="number">1</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">// 使用一维数组使用下面这个</span></span><br><span class="line">	<span class="comment">// 默认拼接参数使用application/x-www-form-urlencoded</span></span><br><span class="line">	curl_setopt($ch, CURLOPT_HTTPHEADER, <span class="keyword">array</span>(</span><br><span class="line">		<span class="string">'multipart/form-data'</span></span><br><span class="line">	));</span><br><span class="line">	curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">	curl_setopt($ch, CURLOPT_POSTFIELDS, $rawData);</span><br><span class="line">	$data = curl_exec($ch);</span><br><span class="line">	curl_close($ch);</span><br><span class="line">	<span class="keyword">return</span> ($data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用于传递一维数组参数"><a href="#用于传递一维数组参数" class="headerlink" title="用于传递一维数组参数"></a>用于传递一维数组参数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">   <span class="comment">//一维数组参数：</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">curlPostJson</span><span class="params">($url, $rawData)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	$postJsonString=json_encode($rawData);</span><br><span class="line">	$ch=curl_init();</span><br><span class="line">	curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">	curl_setopt($ch, CURLOPT_CUSTOMREQUEST, <span class="string">"POST"</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="keyword">FALSE</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, <span class="keyword">FALSE</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_AUTOREFERER, <span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="keyword">true</span>);</span><br><span class="line">	curl_setopt($ch, CURLOPT_POSTFIELDS, $postJsonString);</span><br><span class="line">       <span class="comment">//声明发送请求数据格式并返回字符串长度</span></span><br><span class="line">	curl_setopt($ch, CURLOPT_HTTPHEADER, </span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'Content-Type: application/json;charset=utf-8'</span>, <span class="string">'Content-Length: '</span> . strlen($postJsonString)</span><br><span class="line">           )</span><br><span class="line">       );</span><br><span class="line">	$data = curl_exec($ch);</span><br><span class="line">	curl_close($ch);</span><br><span class="line">	<span class="keyword">$this</span>-&gt;_writeLog($data);</span><br><span class="line">	<span class="keyword">return</span> $data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note success">
            <p>模拟发送GET请求</p>
          </div>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span>	<span class="keyword">function</span> <span class="constructor">_curlGet($<span class="params">url</span>,$<span class="params">accessToken</span>)</span></span><br><span class="line">&#123;				</span><br><span class="line">	<span class="comment">//添加表头参数</span></span><br><span class="line">       $headerParmas = <span class="built_in">array</span>(</span><br><span class="line">		<span class="string">"Authorization:Bearer "</span>.$accessToken</span><br><span class="line">	);</span><br><span class="line">	$ch = curl<span class="constructor">_init()</span>;</span><br><span class="line">	curl<span class="constructor">_setopt($<span class="params">ch</span>, CURLOPT_URL, $<span class="params">url</span>)</span>;</span><br><span class="line">	curl<span class="constructor">_setopt($<span class="params">ch</span>, CURLOPT_RETURNTRANSFER, 1)</span>;</span><br><span class="line">	curl<span class="constructor">_setopt($<span class="params">ch</span>, CURLOPT_SSL_VERIFYPEER, 0)</span>;</span><br><span class="line">	curl<span class="constructor">_setopt($<span class="params">ch</span>, CURLOPT_CONNECTTIMEOUT, 10)</span>;</span><br><span class="line">	curl<span class="constructor">_setopt($<span class="params">ch</span>, CURLOPT_HTTPHEADER,$<span class="params">headerParmas</span>)</span>;</span><br><span class="line">	$file_contents = curl<span class="constructor">_exec($<span class="params">ch</span>)</span>;</span><br><span class="line">	curl<span class="constructor">_close($<span class="params">ch</span>)</span>;</span><br><span class="line">	return $file_contents;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>如何清理微信缓存</title>
    <url>/posts/26caa4da.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">如何清除微信缓存</blockquote>
<div class="note warning">
            <p>是否遇到过缓存清理，尤其是si在微信上<del>~</del><br>出现缓存问题可能导致用户出现很多车祸现场，主要上线了的项目需要内部测试<br>于是就有下面去折腾了，哈哈哈哈</p>
          </div>

<h3 id="之所以的以为"><a href="#之所以的以为" class="headerlink" title="之所以的以为"></a>之所以的以为</h3><blockquote>
<p>我一直在app找了很久，发现在微信app里面，可惜啊，没有就是没有！！</p>
</blockquote>
<h3 id="开光瞬间"><a href="#开光瞬间" class="headerlink" title="开光瞬间"></a>开光瞬间</h3><ul>
<li>Android版本微信<blockquote>
<p>用微信内置浏览器打开这个网页debugx5.qq.com或者是直接在微信app打开<a href="http://debugtbs.qq.com/" target="_blank" rel="noopener">http://debugtbs.qq.com/</a><br>微信x5内核浏览器的debug调试页面，直接在微信打开，点击X5选项拉到页面最底部，有清理缓存的选项</p>
</blockquote>
<h1 align="center"><a target="_blank" herf="####" alt="shareRepository"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/04/22/VHLWXGuz8w5NsYp.jpg" width = "400" style="max-width:100%;align:center"/></a></h1></li>
<li>Ios版本微信–图片源自网络<blockquote>
<p>1.微信设置-通用-存储-清理缓存；<br>2.进入页面，右上角‘…’选项中点击“刷新”，不行就多刷新几次</p>
</blockquote>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/04/22/491url8j6DQEbJa.png" alt="image.png"></p>
<ul>
<li>自动刷新缓存<blockquote>
<p>1.解决方案是在调试阶段或者频繁更新的页面加入以下头信息</p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;meta <span class="attribute">http-equiv</span>=<span class="string">"Cache-Control"</span> <span class="attribute">content</span>=<span class="string">"no-cache, no-store, must-revalidate"</span> /&gt;</span><br><span class="line">&lt;meta <span class="attribute">http-equiv</span>=<span class="string">"Pragma"</span> <span class="attribute">content</span>=<span class="string">"no-cache"</span> /&gt;</span><br><span class="line">&lt;meta <span class="attribute">http-equiv</span>=<span class="string">"Expires"</span> <span class="attribute">content</span>=<span class="string">"0"</span> /&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>Cookie</category>
      </categories>
      <tags>
        <tag>Cookie</tag>
      </tags>
  </entry>
  <entry>
    <title>Git问题汇总</title>
    <url>/posts/b9df10c9.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">工作中遇到的问题集合</blockquote>


<h3 id="git-pull时出现冲突"><a href="#git-pull时出现冲突" class="headerlink" title="git pull时出现冲突"></a>git pull时出现冲突</h3><blockquote>
<p>git fetch –all //只是下载代码到本地，不进行合并操作<br> git reset –hard origin/master  //把HEAD指向最新下载的版本</p>
</blockquote>
<h3 id="git-merge-出现以下错误"><a href="#git-merge-出现以下错误" class="headerlink" title="git merge 出现以下错误"></a>git merge 出现以下错误</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-477e115aad7f2129.png" alt="image.png"></p>
<blockquote>
<p>git merge 分支名 –allow-unrelated-histories</p>
</blockquote>
<h3 id="git-pull-出现以下错误"><a href="#git-pull-出现以下错误" class="headerlink" title="git pull 出现以下错误"></a>git pull 出现以下错误</h3><div class="note danger">
            <p>fatal: refusing to merge unrelated histories<br>拒绝合并不相关历史</p>
          </div>

<blockquote>
<p>解决：git pull –allow-unrelated-histories</p>
</blockquote>
<h3 id="git-clone报错"><a href="#git-clone报错" class="headerlink" title="git clone报错"></a>git clone报错</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-bb5704ee6a442f76.png" alt="image.png"></p>
<p><a href="https://www.jianshu.com/p/f5295c74ee39" target="_blank" rel="noopener">使用Git clone代码失败的解决方法</a></p>
<div class="note danger">
            <p>error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 10054<br>fatal: The remote end hung up unexpectedly<br>fatal: early EOF<br>fatal: index-pack failed</p>
          </div>
<ul>
<li>因为Git限制了推送数据的大小导致的错误。</li>
<li>解决方法：重新设置通信缓存大小</li>
</ul>
<blockquote>
<p>git config http.postBuffer 524288000<br>git config –global http.postBuffer 524288000</p>
</blockquote>
<h3 id="git-clone执行完设置通信缓存大小报错"><a href="#git-clone执行完设置通信缓存大小报错" class="headerlink" title="git clone执行完设置通信缓存大小报错"></a>git clone执行完设置通信缓存大小报错</h3><div class="note danger">
            <p>git config http.sslVerify “false”<br>fatal: not in a git directory</p>
          </div>
<blockquote>
<p> git config –global http.sslVerify false</p>
</blockquote>
<h3 id="git-status-分支比主分支提交超前"><a href="#git-status-分支比主分支提交超前" class="headerlink" title="git status 分支比主分支提交超前"></a>git status 分支比主分支提交超前</h3><div class="note danger">
            <p>git Your branch is ahead of ‘gitee/master’ by 1 commit.<br>[git您的分支比“ gitee / master”提前1次提交。]</p>
          </div>

<blockquote>
<p>解决：git push gitee HEAD:master 或者  git push gitee HEAD</p>
</blockquote>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql常用语句</title>
    <url>/posts/9520183a.html</url>
    <content><![CDATA[<h4 id="常用MySQL点"><a href="#常用MySQL点" class="headerlink" title="常用MySQL点"></a>常用MySQL点</h4><p>1.连接数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* 连接与断开服务器 *&#x2F;</span><br><span class="line">mysql -h 地址 -P 端口 -u 用户名 -p 密码</span><br><span class="line"></span><br><span class="line">&#x2F;*显示正在运行线程*&#x2F;</span><br><span class="line">show processlist</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>数据库增删改查</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* 数据操作 *&#x2F; ------------------</span><br><span class="line">-- 增</span><br><span class="line">    INSERT [INTO] 表名 [(字段列表)] VALUES (值列表)[, (值列表), ...]</span><br><span class="line">        -- 如果要插入的值列表包含所有字段并且顺序一致，则可以省略字段列表。</span><br><span class="line">        -- 可同时插入多条数据记录！</span><br><span class="line">        REPLACE 与 INSERT 完全一样，可互换。</span><br><span class="line">    INSERT [INTO] 表名 SET 字段名&#x3D;值[, 字段名&#x3D;值, ...]</span><br><span class="line">-- 查</span><br><span class="line">    SELECT 字段列表 FROM 表名[ 其他子句]</span><br><span class="line">        -- 可来自多个表的多个字段</span><br><span class="line">        -- 其他子句可以不使用</span><br><span class="line">        -- 字段列表可以用*代替，表示所有字段</span><br><span class="line">-- 删</span><br><span class="line">    DELETE FROM 表名[ 删除条件子句]</span><br><span class="line">        没有条件子句，则会删除全部</span><br><span class="line">-- 改</span><br><span class="line">    UPDATE 表名 SET 字段名&#x3D;新值[, 字段名&#x3D;新值] [更新条件]</span><br><span class="line">    </span><br><span class="line">-- 新增字段[修改字段类型注释长度]</span><br><span class="line">[]表示可选</span><br><span class="line">ALTER TABLE 表名 ADD COLUMN 字段名 字段类型(长度值) [NOT NULL] DEFAULT 默认值 comment &#39;注释&#39; ;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;例子</span><br><span class="line">ALTER TABLE contract_templates ADD COLUMN contract_category_id int(11) NOT NULL DEFAULT 0 comment &#39;范本分类ID&#39; ;</span><br></pre></td></tr></table></figure>

<p>3.数据类型</p>
<ol>
<li>数值类型</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">类型         字节     范围（有符号位）</span><br><span class="line"> tinyint     1字节    -128 ~ 127      无符号位：0 ~ 255</span><br><span class="line"> smallint    2字节    -32768 ~ 32767 </span><br><span class="line"> mediumint   3字节    -8388608 ~ 8388607</span><br><span class="line"> int         4字节    -2147483648 ~ 2147483647</span><br><span class="line"> bigint      8字节    -9233372036854775808 ~ 9223372036854775807</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* 注意 *&#x2F;</span><br><span class="line">int(3&#x2F;11):3或者11代表的是显示字符的长度，允许的最大值是INT整数所允许的最大值</span><br><span class="line">长度不足是会自动帮你补全</span><br><span class="line">例如：int(3):输入10 &#x3D;&gt;补全010</span><br><span class="line">&#x2F;*mysql无符号和有符号的区别*&#x2F;</span><br><span class="line">无符号unsigned 表示设置的的数据为0或者正数；</span><br><span class="line">有符号则可以是负数 -；</span><br><span class="line">内存占比 有符号 0-255 无符号 -127~127</span><br></pre></td></tr></table></figure>
<ol>
<li><p>字符串类型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">char    定长字符串，速度快，但浪费空间</span><br><span class="line">varchar 变长字符串，速度慢，但节省空间</span><br><span class="line">M表示能存储的最大长度，此长度是字符数，非字节数。</span><br><span class="line"></span><br><span class="line">char,最多255个字符，与编码无关。</span><br><span class="line">varchar,最多65535字符，与编码有关。</span><br><span class="line"></span><br><span class="line">一条有效记录最大不能超过65535个字节。</span><br><span class="line">utf8 最大为21844个字符，gbk 最大为32766个字符，latin1 最大为65532个字符</span><br><span class="line">varchar 是变长的，需要利用存储空间保存 varchar 的长度，如果数据小于255个字节，则采用一个字节来保存长度，反之需要两个字节来保存。</span><br><span class="line"></span><br><span class="line">varchar 的最大有效长度由最大行大小和使用的字符集确定</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>日期类型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">datetime    8字节   日期及时间  1000-01-01 00:00:00 到 9999-12-31 23:59:59</span><br><span class="line">date        3字节   日期         1000-01-01 到 9999-12-31</span><br><span class="line">timestamp   4字节   时间戳        19700101000000 到 2038-01-19 03:14:07</span><br><span class="line">time        3字节   时间         -838:59:59 到 838:59:59</span><br><span class="line">year        1字节   年份         1901 - 2155</span><br></pre></td></tr></table></figure>

<p>支持时间格式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">datetime    YYYY-MM-DD hh:mm:ss</span><br><span class="line">timestamp   YY-MM-DD hh:mm:ss</span><br><span class="line">            YYYYMMDDhhmmss</span><br><span class="line">            YYMMDDhhmmss</span><br><span class="line">            YYYYMMDDhhmmss</span><br><span class="line">            YYMMDDhhmmss</span><br><span class="line">date        YYYY-MM-DD</span><br><span class="line">            YY-MM-DD</span><br><span class="line">            YYYYMMDD</span><br><span class="line">            YYMMDD</span><br><span class="line">            YYYYMMDD</span><br><span class="line">            YYMMDD</span><br><span class="line">time        hh:mm:ss</span><br><span class="line">            hhmmss</span><br><span class="line">            hhmmss</span><br><span class="line">year        YYYY</span><br><span class="line">            YY</span><br><span class="line">            YYYY</span><br><span class="line">            YY</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><p>枚举和集合类型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">enum(val1, val2, val3...)</span><br><span class="line">    在已知的值中进行单选。最大数量为65535.</span><br><span class="line">    枚举值在保存时，以2个字节的整型(smallint)保存。每个枚举值，按保存的位置顺序，从1开始逐一递增。</span><br><span class="line">    表现为字符串类型，存储却是整型。</span><br><span class="line">    NULL值的索引是NULL。</span><br><span class="line">    空字符串错误值的索引值是0。</span><br><span class="line"></span><br><span class="line">-- 集合（set） ----------</span><br><span class="line">set(val1, val2, val3...)</span><br><span class="line">    create table tab ( gender set(&#39;男&#39;, &#39;女&#39;, &#39;无&#39;) );</span><br><span class="line">    insert into tab values (&#39;男, 女&#39;);</span><br><span class="line">    最多可以有64个不同的成员。以bigint存储，共8个字节。采取位运算的形式。</span><br><span class="line">    当创建表时，SET成员值的尾部空格将自动被删除。</span><br></pre></td></tr></table></figure>

<h5 id="选用角度"><a href="#选用角度" class="headerlink" title="选用角度"></a>选用角度</h5><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">-- PHP角度</span><br><span class="line"><span class="number">1.</span> 功能满足</span><br><span class="line"><span class="number">2.</span> 存储空间尽量小，处理效率更高</span><br><span class="line"><span class="number">3.</span> 考虑兼容问题</span><br></pre></td></tr></table></figure>

<h5 id="IP存储"><a href="#IP存储" class="headerlink" title="IP存储"></a>IP存储</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 只需存储，可用字符串</span><br><span class="line">2. 如果需计算，查找等，可存储为4个字节的无符号int，即unsigned</span><br><span class="line">    1) PHP函数转换</span><br><span class="line">        ip2long可转换为整型，但会出现携带符号问题。需格式化为无符号的整型。</span><br><span class="line">        利用sprintf函数格式化字符串</span><br><span class="line">        sprintf(&quot;%u&quot;, ip2long(&#39;192.168.3.134&#39;));</span><br><span class="line">        然后用long2ip将整型转回IP字符串</span><br><span class="line">    2) MySQL函数转换(无符号整型，UNSIGNED)</span><br><span class="line">        INET_ATON(&#39;127.0.0.1&#39;) 将IP转为整型</span><br><span class="line">        INET_NTOA(2130706433) 将整型转为IP</span><br></pre></td></tr></table></figure>

<h5 id="主从表区分"><a href="#主从表区分" class="headerlink" title="主从表区分"></a>主从表区分</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FOREIGN KEY 外键约束</span><br><span class="line">-- 用于限制主表与从表数据完整性。</span><br><span class="line">alter table t1 add constraint &#96;t1_t2_fk&#96; foreign key (t1_id) references t2(id);</span><br><span class="line"></span><br><span class="line">-- 将表t1的t1_id外键关联到表t2的id字段。</span><br><span class="line">-- 每个外键都有一个名字，可以通过 constraint 指定</span><br><span class="line"></span><br><span class="line">-- 存在外键的表，称之为从表（子表），外键指向的表，称之为主表（父表）</span><br><span class="line"></span><br><span class="line">-- 注意，外键只被InnoDB存储引擎所支持。其他引擎是不支持的。</span><br></pre></td></tr></table></figure>

<h5 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- Normal Format, NF</span><br><span class="line">    - 每个表保存一个实体信息</span><br><span class="line">    - 每个具有一个ID字段作为主键</span><br><span class="line">    - ID主键 + 原子表</span><br><span class="line">-- 1NF, 第一范式</span><br><span class="line">	字段不能再分，就满足第一范式。</span><br><span class="line">-- 2NF, 第二范式</span><br><span class="line">    满足第一范式的前提下，不能出现部分依赖。</span><br><span class="line">    消除符合主键就可以避免部分依赖。增加单列关键字。</span><br><span class="line">-- 3NF, 第三范式</span><br><span class="line">    满足第二范式的前提下，不能出现传递依赖。</span><br><span class="line">    某个字段依赖于主键，而有其他字段依赖于该字段。这就是传递依赖。</span><br><span class="line">    将一个实体信息的数据放在一个表内实现。</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>微信公众测试号[生成菜单等]接入流程</title>
    <url>/posts/277e2557.html</url>
    <content><![CDATA[<h4 id="NATAPP内网穿透"><a href="#NATAPP内网穿透" class="headerlink" title="NATAPP内网穿透"></a>NATAPP内网穿透</h4><h5 id="下载地址：根据不同环境下载"><a href="#下载地址：根据不同环境下载" class="headerlink" title="下载地址：根据不同环境下载"></a><a href="https://natapp.cn/#download" target="_blank" rel="noopener">下载地址</a>：根据不同环境下载</h5><h5 id="安装教程，点击这里：以window为例进行安装"><a href="#安装教程，点击这里：以window为例进行安装" class="headerlink" title="安装教程，点击这里：以window为例进行安装"></a><a href="https://natapp.cn/article/natapp_newbie" target="_blank" rel="noopener">安装教程，点击这里</a>：以window为例进行安装</h5><blockquote>
<p>注意点：每次关闭NATAPP后生成的外网地址是不一样的，如需测试请更换测试号上的URL地址</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/23/o7DN6ye3FcV1w5Q.png" alt="开启成功"></p>
<h4 id="微信公众号开发"><a href="#微信公众号开发" class="headerlink" title="微信公众号开发"></a>微信公众号开发</h4><p><a href="https://www.jianshu.com/nb/8725155" target="_blank" rel="noopener">参考接入文章</a></p>
<h5 id="接口工具"><a href="#接口工具" class="headerlink" title="接口工具"></a><a href="https://mp.weixin.qq.com/debug/cgi-bin/apiinfo?t=index" target="_blank" rel="noopener">接口工具</a></h5><h5 id="公众号测试号申请地址"><a href="#公众号测试号申请地址" class="headerlink" title="公众号测试号申请地址"></a><a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index" target="_blank" rel="noopener">公众号测试号申请地址</a></h5><p> <code>请先编写文件代码,不然填写好URL和TOKEN后点击提交会导致 --- 配置失败</code></p>
<blockquote>
<p>开发者通过检验signature对请求进行校验。若确认此次GET请求来自微信服务器，请原样返回echostr参数内容，则接入生效，成为开发者成功，否则接入失败。</p>
<p>加密/校验流程如下：</p>
<p>1）将token、timestamp、nonce三个参数进行字典序排序</p>
<p> 2）将三个参数字符串拼接成一个字符串进行sha1加密 3）开发者获得加密后的字符串可与signature对比</p>
</blockquote>
<h5 id="请求配置文件测试代码"><a href="#请求配置文件测试代码" class="headerlink" title="请求配置文件测试代码"></a>请求配置文件测试代码</h5><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//只是测试代码不严谨，请勿用于开发真实项目</span></span><br><span class="line"><span class="comment">/** * wechat php test */</span></span><br><span class="line"><span class="comment">//define your token</span></span><br><span class="line"><span class="comment">//这个token需要和公众号接口配置信息中填的token一致</span></span><br><span class="line">define(<span class="string">"TOKEN"</span>, <span class="string">"weixintest"</span>);</span><br><span class="line">$wechatObj = <span class="keyword">new</span> wechatTest();</span><br><span class="line">$wechatObj-&gt;valid();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">wechatTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">valid</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">"echostr"</span>])) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;checkSignature()) &#123;</span><br><span class="line">                <span class="keyword">echo</span> $_GET[<span class="string">"echostr"</span>];</span><br><span class="line">                <span class="keyword">exit</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkSignature</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// you must define TOKEN by yourself</span></span><br><span class="line">        <span class="keyword">if</span> (!defined(<span class="string">"TOKEN"</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">'TOKEN is not defined!'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        $signature = $_GET[<span class="string">"signature"</span>];</span><br><span class="line">        $timestamp = $_GET[<span class="string">"timestamp"</span>];</span><br><span class="line">        $nonce = $_GET[<span class="string">"nonce"</span>];</span><br><span class="line">        $token = TOKEN;</span><br><span class="line">        $tmpArr = <span class="keyword">array</span>($token, $timestamp, $nonce);</span><br><span class="line">        <span class="comment">// use SORT_STRING rule</span></span><br><span class="line">        sort($tmpArr, SORT_STRING);</span><br><span class="line">        $tmpStr = implode($tmpArr);</span><br><span class="line">        $tmpStr = sha1($tmpStr);</span><br><span class="line">        <span class="keyword">if</span> ($tmpStr == $signature) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/23/xsI6nb3lwYFDLuU.png" alt="image.png"></p>
<h4 id="创建公众号自定义菜单"><a href="#创建公众号自定义菜单" class="headerlink" title="创建公众号自定义菜单"></a>创建公众号自定义菜单</h4><h5 id="文档地址…点击这里"><a href="#文档地址…点击这里" class="headerlink" title="文档地址…点击这里"></a><a href="https://developers.weixin.qq.com/doc/offiaccount/Custom_Menus/Creating_Custom-Defined_Menu.html" target="_blank" rel="noopener">文档地址…点击这里</a></h5><blockquote>
<p>为了方便处理我们使用上面提及的<a href="https://mp.weixin.qq.com/debug/cgi-bin/apiinfo?t=index" target="_blank" rel="noopener">接口请求和测试工具</a></p>
</blockquote>
<h5 id="申请access-token"><a href="#申请access-token" class="headerlink" title="申请access_token"></a>申请access_token</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/23/4AbZ3DtQqI86nhs.png" alt="image.png"></p>
<h5 id="添加body"><a href="#添加body" class="headerlink" title="添加body"></a>添加body</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/23/CZc71p4WiHNDb2O.png" alt="image.png"></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">返回结果: 200 OK</span><br><span class="line">        Connection: keep-alive</span><br><span class="line">		Date: Mon, 23 Mar 2020 09:17:11 GMT</span><br><span class="line">        Content-Type: application/json; encoding=utf-8</span><br><span class="line">        Content-Length: 27</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"errcode"</span>: <span class="number">0</span>, </span><br><span class="line">            <span class="attr">"errmsg"</span>: <span class="string">"ok"</span></span><br><span class="line">        &#125;</span><br><span class="line">提示: Request successful</span><br></pre></td></tr></table></figure>

<h5 id="扫码查看菜单是否生成"><a href="#扫码查看菜单是否生成" class="headerlink" title="扫码查看菜单是否生成"></a>扫码查看菜单是否生成</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/23/XRlnGJcexI5VAEC.png" alt="image.png"></p>
<h4 id="案例-消息处理"><a href="#案例-消息处理" class="headerlink" title="案例:消息处理"></a>案例:<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_standard_messages.html" target="_blank" rel="noopener">消息处理</a></h4><blockquote>
<p>当普通微信用户向公众账号发消息时，微信服务器将POST消息的XML数据包到开发者填写的URL上</p>
<p>具体请查看代码wxstudy文件夹</p>
</blockquote>
<ul>
<li><p>定义一个responseMsg接收用户发送过来的消息</p>
</li>
<li><p>返回正确的xml格式给用户 transmitText方法</p>
<p>返回普通消息格式：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>%s<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[text]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MsgId</span>&gt;</span>%d<span class="tag">&lt;/<span class="name">MsgId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其他案例请结合文档进行编码开发</p>
</li>
</ul>
]]></content>
      <categories>
        <category>wechat</category>
      </categories>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title>关于网页[H5]微信授权登录</title>
    <url>/posts/f281c357.html</url>
    <content><![CDATA[<div class="note success">
            <p>关于网页[H5]微信授权登录</p>
          </div>

<h4 id="关于网页-H5-微信授权登录"><a href="#关于网页-H5-微信授权登录" class="headerlink" title="关于网页[H5]微信授权登录"></a>关于网页[H5]微信授权登录</h4><p><a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html" target="_blank" rel="noopener">文档….点这里</a></p>
<p><a href="https://www.cnblogs.com/sunshq/p/5132811.html" target="_blank" rel="noopener">demo案例</a></p>
<p><a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index" target="_blank" rel="noopener">沙盒地址</a></p>
<h4 id="微信授权登录步骤"><a href="#微信授权登录步骤" class="headerlink" title="微信授权登录步骤"></a>微信授权登录步骤</h4><blockquote>
<p>APPID与APPSECRET已经获取到的情况下，进行以下步骤</p>
</blockquote>
<blockquote>
<p>本案例使用的scope是属于snsapi_userinfo发起的网页授权[用户需要手动确认发起请求]</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/20/c7Ww6E23ImtZJaX.png" alt="image-20200319153155147.png"></p>
<ol>
<li><p>进行微信授权，用户同意授权，返回获取code</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$url = <span class="string">"https://open.weixin.qq.com/connect/oauth2/authorize?appid="</span>.</span><br><span class="line">  <span class="keyword">self</span>::APPID.<span class="string">"&amp;redirect_uri="</span>.<span class="keyword">self</span>::REDIRECT_URI.<span class="string">"&amp;response_type=code&amp;scope="</span>.<span class="keyword">self</span>::SCOPE.<span class="string">"&amp;state="</span>.<span class="keyword">self</span>::STATE.<span class="string">"#wechat_redirect"</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>SCOPE:这里是使用snsapi_userinfo</p>
<p>$state:自定义填写a-zA-Z0-9的参数值，最多128字节</p>
<p>REDIRECT_URI：授权后重定向的回调链接地址</p>
</blockquote>
<blockquote>
<p>同意授权后跳转至：xxxx/redirect_uri/?code=CODE&amp;state=STATE</p>
</blockquote>
</li>
<li><p>获取access_token[基础支持中的access_token（该access_token用于调用其他接口）不同]</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&amp;secret=SECRET&amp;code=CODE&amp;grant_type=authorization_code</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>code:填写第一步获取的code参数</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//返回格式</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"access_token"</span>:<span class="string">"ACCESS_TOKEN"</span>,</span><br><span class="line">  <span class="attr">"expires_in"</span>:<span class="number">7200</span>,</span><br><span class="line">  <span class="attr">"refresh_token"</span>:<span class="string">"REFRESH_TOKEN"</span>,</span><br><span class="line">  <span class="attr">"openid"</span>:<span class="string">"OPENID"</span>,</span><br><span class="line">  <span class="attr">"scope"</span>:<span class="string">"SCOPE"</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>刷新access_token忽略，请看文档</p>
</li>
<li><p>拉取用户信息</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">GET（请使用https协议） https://api.weixin.qq.com/sns/userinfo?access_token=ACCESS_TOKEN&amp;openid=OPENID&amp;lang=zh_CN</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;   </span><br><span class="line">  <span class="attr">"openid"</span>:<span class="string">" OPENID"</span>,</span><br><span class="line">  <span class="attr">"nickname"</span>: NICKNAME,</span><br><span class="line">  <span class="attr">"sex"</span>:<span class="string">"1"</span>,</span><br><span class="line">  <span class="attr">"province"</span>:<span class="string">"PROVINCE"</span>,</span><br><span class="line">  <span class="attr">"city"</span>:<span class="string">"CITY"</span>,</span><br><span class="line">  <span class="attr">"country"</span>:<span class="string">"COUNTRY"</span>,</span><br><span class="line">  <span class="attr">"headimgurl"</span>:       <span class="string">"http://thirdwx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46"</span>,</span><br><span class="line">  <span class="attr">"privilege"</span>:[ <span class="string">"PRIVILEGE1"</span> <span class="string">"PRIVILEGE2"</span>     ],</span><br><span class="line">  <span class="attr">"unionid"</span>: <span class="string">"o6_bmasdasdsad6_2sgVt7hMZOPfL"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实际使用："><a href="#实际使用：" class="headerlink" title="实际使用："></a>实际使用：</h4> <figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取到用户信息存入redis</span></span><br><span class="line"><span class="comment">//参考直播项目</span></span><br><span class="line">$url=https:<span class="comment">//api.weixin.qq.com/sns/userinfo?access_token=ACCESS_TOKEN&amp;openid=OPENID&amp;lang=zh_CN</span></span><br><span class="line">$result = file_get_contents($url);</span><br><span class="line">$data = json_decode($result,<span class="keyword">true</span>);</span><br><span class="line">Cache::store(<span class="string">'redis'</span>)-&gt;set($openid,$result);</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>wechat</category>
      </categories>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue的钩子函数</title>
    <url>/posts/8192d00f.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">vue-router 提供的导航守卫主要用来通过跳转或取消的方式守卫导航, “导航”表示路由正在发生改变。</blockquote>

<p><a href="https://segmentfault.com/a/1190000015727279" target="_blank" rel="noopener">参考文章-详细介绍入口</a></p>
<div class="note danger">
            <p>通俗理解：路由跳转是一个大的过程，这个大的过程分为跳转前中后等等细小的过程，在每一个过程中都有一函数，这个函数能让你操作一些其他的事儿的时机，这就是导航守卫<br>记住 参数或查询的改变并不会触发进入/离开的导航守卫. 你可以通过观察 $route 对象来应对这些变化，或使用 beforeRouteUpdate 的组件内守卫</p>
          </div>

<h4 id="导航守护"><a href="#导航守护" class="headerlink" title="导航守护"></a>导航守护</h4><ul>
<li>全局的, 单个路由独享的, 或者组件级的</li>
</ul>
<h4 id="全局守卫-触发路由就会触发"><a href="#全局守卫-触发路由就会触发" class="headerlink" title="全局守卫[触发路由就会触发]"></a>全局守卫[触发路由就会触发]</h4><h5 id="vue-router-全局有三个守卫："><a href="#vue-router-全局有三个守卫：" class="headerlink" title="vue-router 全局有三个守卫："></a>vue-router 全局有三个守卫：</h5><ul>
<li>router.beforeEach 全局前置守卫 进入路由之前</li>
<li>router.beforeResolve 全局解析守卫(2.5.0+) 在 beforeRouteEnter 调用之后调用</li>
<li>router.afterEach 全局后置钩子 进入路由之后</li>
</ul>
<h5 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h5><div class="note warning">
            <p>确保要调用 next 方法，否则钩子就不会被 resolved。<br>守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 等待中</p>
          </div>

<figure class="highlight moonscript"><table><tr><td class="code"><pre><span class="line">// main.js 入口文件</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span>; // 引入路由</span><br><span class="line">router.beforeEach(<span class="function"><span class="params">(to, <span class="keyword">from</span>, <span class="built_in">next</span>)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line">router.beforeResolve(<span class="function"><span class="params">(to, <span class="keyword">from</span>, <span class="built_in">next</span>)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line">router.afterEach(<span class="function"><span class="params">(to, <span class="keyword">from</span>)</span> =&gt;</span> &#123;</span><br><span class="line">  console.log(<span class="string">'afterEach 全局后置钩子'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="to-from-next-三个参数"><a href="#to-from-next-三个参数" class="headerlink" title="to from next 三个参数"></a>to from next 三个参数</h5><div class="note warning">
            <p>next()必须调用，否则不能进入路由(页面空白)</p>
          </div>

<ul>
<li><p>to: Route: 即将要进入的目标 路由对象—-跳转目标 url 地址</p>
</li>
<li><p>from: Route: 当前导航正要离开的路由—-准备开始跳转 url 地址</p>
</li>
<li><p>next: Function: 一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。</p>
<ul>
<li>next() 进入该路由</li>
<li>next(false): 取消进入路由,回到准备开始跳转的 url 地址</li>
<li>next 跳转新路由 next(‘path 地址’)或者 next({path:’’})或者 next({name:’’}) 亦可配置 replace: true、name: ‘home’ 选项</li>
</ul>
</li>
</ul>
<h4 id="路由独享守卫【某些路由单独配置守卫】"><a href="#路由独享守卫【某些路由单独配置守卫】" class="headerlink" title="路由独享守卫【某些路由单独配置守卫】"></a>路由独享守卫【某些路由单独配置守卫】</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">   routes: [</span><br><span class="line">     &#123;</span><br><span class="line">       path: <span class="string">'/foo'</span>,</span><br><span class="line">       component: Foo,</span><br><span class="line">       beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">         <span class="comment">// 参数用法什么的都一样,调用顺序在全局前置守卫后面，所以不会被全局守卫覆盖</span></span><br><span class="line">         <span class="comment">// ...</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   ]</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="组件内的守卫"><a href="#组件内的守卫" class="headerlink" title="组件内的守卫"></a>组件内的守卫</h4><div class="note warning">
            <p>1.beforeRouteEnter 守卫 不能 访问 this，因为守卫在导航确认前被调用,因此即将登场的新组件还没被创建<br>2.通过传一个回调给 next来访问组件实例</p>
          </div>


<h5 id="文档内容"><a href="#文档内容" class="headerlink" title="文档内容"></a>文档内容</h5><ul>
<li>beforeRouteEnter</li>
<li>beforeRouteUpdate (2.2 新增)</li>
<li>beforeRouteLeave</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">const Foo = &#123;</span><br><span class="line">  template: `...`,</span><br><span class="line">  beforeRouteEnter (to, <span class="keyword">from</span>, <span class="keyword">next</span>) &#123;</span><br><span class="line">    <span class="comment">// 在渲染该组件的对应路由被 confirm 前调用</span></span><br><span class="line">    <span class="comment">// 不！能！获取组件实例 `this`</span></span><br><span class="line">    <span class="comment">// 因为当守卫执行前，组件实例还没被创建</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (to, <span class="keyword">from</span>, <span class="keyword">next</span>) &#123;</span><br><span class="line">    <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span></span><br><span class="line">    <span class="comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, <span class="keyword">next</span>) &#123;</span><br><span class="line">    <span class="comment">// 导航离开该组件的对应路由时调用</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在导航被确认的时候执行回调，并且把组件实例作为回调方法的参数。</span></span><br><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, <span class="keyword">next</span>) &#123;</span><br><span class="line">  <span class="keyword">next</span>(vm =&gt; &#123;</span><br><span class="line">    <span class="comment">// 通过 `vm` 访问组件实例</span></span><br><span class="line">    <span class="comment">//执行回调的时机在mounted后面</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/ecPhwTOWB8dpm9R.png" alt="完整的路由导航解析流程-不包括其他生命周期"></p>
<h4 id="路由元信息-header中的mete等标签设置"><a href="#路由元信息-header中的mete等标签设置" class="headerlink" title="路由元信息[header中的mete等标签设置]"></a>路由元信息[header中的mete等标签设置]</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">const</span> <span class="string">router</span> <span class="string">=</span> <span class="string">new</span> <span class="string">VueRouter(&#123;</span></span><br><span class="line">  <span class="attr">routes:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">'/foo'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">component:</span> <span class="string">Foo,</span></span><br><span class="line">      <span class="attr">children:</span> <span class="string">[</span></span><br><span class="line">        <span class="string">&#123;</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">'bar'</span><span class="string">,</span></span><br><span class="line">          <span class="attr">component:</span> <span class="string">Bar,</span></span><br><span class="line">          <span class="string">//</span> <span class="string">a</span> <span class="string">meta</span> <span class="string">field</span></span><br><span class="line">          <span class="attr">meta:</span> <span class="string">&#123;</span> <span class="attr">requiresAuth:</span> <span class="literal">true</span> <span class="string">&#125;</span></span><br><span class="line">        <span class="string">&#125;</span></span><br><span class="line">      <span class="string">]</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">]</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string">//访问mate字段</span></span><br><span class="line"><span class="string">遍历</span> <span class="string">$route.matched</span> <span class="string">来检查路由记录中的</span> <span class="string">meta</span> <span class="string">字段</span></span><br></pre></td></tr></table></figure>
<h4 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a><a href="https://segmentfault.com/a/1190000015727279#item-3" target="_blank" rel="noopener">keep-alive</a></h4><div class="note warning">
            <p>内置组件keep-alive来缓存组件内部状态，避免重新渲染<br>它自身不会渲染一个 DOM 元素，也不会出现在父组件链中。<br>在被keep-alive包含的组件/路由中，会多出两个生命周期的钩子:activated 与 deactivated。</p>
          </div>

<ul>
<li>activated:在组件第一次渲染时会被调用，之后在每次缓存组件被激活时调用。</li>
<li>deactivated：组件被停用(离开路由)时调用</li>
</ul>
<div class="note warning">
            <p>使用keep-alive可以将所有路径匹配到的路由组件都缓存起来，包括路由组件里面的组件，keep-alive大多数使用场景就是这种。</p>
          </div>

<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="section">&lt;keep-alive&gt;</span></span><br><span class="line">    <span class="section">&lt;router-view&gt;</span><span class="section">&lt;/router-view&gt;</span></span><br><span class="line"><span class="section">&lt;/keeo-alive&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="缓存想要的路由"><a href="#缓存想要的路由" class="headerlink" title="缓存想要的路由"></a>缓存想要的路由</h5><p><a href="https://segmentfault.com/a/1190000015727279#item-3-8" target="_blank" rel="noopener">缓存想要的路由</a></p>
<h4 id="组件生命周期钩子"><a href="#组件生命周期钩子" class="headerlink" title="组件生命周期钩子"></a>组件生命周期钩子</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cn.vuejs.org/images/lifecycle.png" alt="生命周期示意图"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/aPpWZV2TMomU9AF.png" alt="生命周期注意点"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/2orGhbVs8Y6uceQ.png" alt="完整钩子函数触发顺序"></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue Router之基础</title>
    <url>/posts/49bed910.html</url>
    <content><![CDATA[<blockquote class="blockquote-center"></blockquote>
<div class="note success">
            <p>Vue Router 是 Vue.js 官方的路由管理器。它和 Vue.js 的核心深度集成，让构建单页面应用变得易如反掌</p>
          </div>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cn.vuejs.org/images/lifecycle.png" alt="生命周期示意图"></p>
<h4 id="Router使用"><a href="#Router使用" class="headerlink" title="Router使用"></a>Router使用</h4><div class="note warning">
            <p>任何组件内通过 this.$router 访问路由器<br>当匹配到一个路由时，参数值会被设置到 this.$route.params</p>
          </div>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//html</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello App!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/foo"</span>&gt;</span>Go to Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 路由出口 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Js</span></span><br><span class="line"><span class="comment">// 0. 如果使用模块化机制编程，导入Vue和VueRouter，要调用 Vue.use(VueRouter)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 定义 (路由) 组件。</span></span><br><span class="line"><span class="comment">// 可以从其他文件 import 进来</span></span><br><span class="line"><span class="keyword">const</span> Foo = &#123; template: <span class="string">'&lt;div&gt;foo&lt;/div&gt;'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 定义路由</span></span><br><span class="line"><span class="comment">// 每个路由应该映射一个组件。 其中"component" 可以是</span></span><br><span class="line"><span class="comment">// 通过 Vue.extend() 创建的组件构造器，</span></span><br><span class="line"><span class="comment">// 或者，只是一个组件配置对象。</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; path: <span class="string">'/foo'</span>, component: Foo &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建 router 实例，然后传 `routes` 配置</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes <span class="comment">// (缩写) 相当于 routes: routes</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 创建和挂载根实例。</span></span><br><span class="line"><span class="comment">// 记得要通过 router 配置参数注入路由，</span></span><br><span class="line"><span class="comment">// 从而让整个应用都有路由功能</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="动态匹配路由"><a href="#动态匹配路由" class="headerlink" title="动态匹配路由"></a>动态匹配路由</h4><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用动态路由参数进行匹配所有 ID 各不相同的用户</span></span><br><span class="line">const User = &#123;</span><br><span class="line"><span class="symbol">  template:</span> <span class="string">'&lt;div&gt;User&lt;/div&gt;'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line"><span class="symbol">  routes:</span> [</span><br><span class="line">    <span class="comment">// 动态路径参数 以冒号开头</span></span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'/user/:id'</span>, <span class="string">component:</span> User &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">访问：<span class="regexp">/user/</span><span class="number">1</span>  张三</span><br><span class="line">访问：<span class="regexp">/user/</span><span class="number">2</span>  李四</span><br></pre></td></tr></table></figure>
<h5 id="route-对象"><a href="#route-对象" class="headerlink" title="$route 对象"></a>$route 对象</h5><div class="note success">
            <p>复用组件时，对路由参数的变化作出响应的话，可以简单地 watch (监测变化) $route 对象</p>
          </div>

<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> User = &#123;</span><br><span class="line">template: <span class="string">'...'</span>,</span><br><span class="line">watch: &#123;</span><br><span class="line">    <span class="string">'$route'</span> (to, <span class="keyword">from</span>) &#123;</span><br><span class="line">    <span class="comment">// 对路由变化作出响应...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">或者另外一种方法</span><br><span class="line"><span class="keyword">const</span> User = &#123;</span><br><span class="line">template: <span class="string">'...'</span>,</span><br><span class="line">beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// react to route changes...</span></span><br><span class="line">    <span class="comment">// don't forget to call next()</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="匹配优先级"><a href="#匹配优先级" class="headerlink" title="匹配优先级"></a>匹配优先级</h4><div class="note warning">
            <p>按照路由的定义顺序：谁先定义的，谁的优先级就最高。</p>
          </div>

<h4 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">/user/foo<span class="built_in">/profile </span>                   </span><br><span class="line">+------------------+                  </span><br><span class="line">|<span class="built_in"> User </span>            |                  </span><br><span class="line">| +--------------+ |                 </span><br><span class="line">| |<span class="built_in"> Profile </span>     | |        </span><br><span class="line">| |              | |                 </span><br><span class="line">| +--------------+ |                  </span><br><span class="line">+------------------+</span><br></pre></td></tr></table></figure>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="comment">&lt;!-- 路由出口 --&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></span></span><br><span class="line"><span class="xml">  </span><span class="xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">const User = &#123;</span><br><span class="line">  template: `</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      </span><span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>User </span><span class="xquery">&#123;&#123; <span class="variable">$route</span>.params<span class="built_in">.id</span> &#125;</span><span class="xml">&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="comment">&lt;!-- 子组件渲染到这里 --&gt;</span></span></span><br><span class="line"><span class="xml">      </span><span class="xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  `</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;<span class="built_in"> path</span>: <span class="string">'/user/:id'</span>, component: User,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          // 当 /user/:id/profile 匹配成功，</span><br><span class="line">          // UserProfile 会被渲染在 User 的 <span class="xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span> 中</span></span><br><span class="line"><span class="xml">          path: 'profile',</span></span><br><span class="line"><span class="xml">          component: UserProfile</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">      ]</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  ]</span></span><br><span class="line"><span class="xml">&#125;)</span></span><br></pre></td></tr></table></figure>

<h4 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h4><h5 id="router-push"><a href="#router-push" class="headerlink" title="router.push"></a>router.push</h5><div class="note success">
            <p>借助 router 的实例方法，通过编写代码来实现<br>在 Vue 实例内部，你可以通过 $router 访问路由实例。因此你可以调用 this.$router.push<br>router.push 方法：这个方法会向 history 栈添加一个新的记录，所以，当用户点击浏览器后退按钮时，则回到之前的 URL</p>
          </div>

<div class="note danger">
            <p>注意：如果提供了 path，params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path</p>
          </div>

<h6 id="参数赋值"><a href="#参数赋值" class="headerlink" title="参数赋值"></a>参数赋值</h6><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">router.push(<span class="string">'home'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象</span></span><br><span class="line">router.push(&#123; <span class="string">path:</span> <span class="string">'home'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名的路由</span></span><br><span class="line">router.push(&#123; <span class="string">name:</span> <span class="string">'user'</span>, <span class="string">params:</span> &#123; <span class="string">userId:</span> <span class="string">'123'</span> &#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带查询参数，变成 /register?plan=private</span></span><br><span class="line">router.push(&#123; <span class="string">path:</span> <span class="string">'register'</span>, <span class="string">query:</span> &#123; <span class="string">plan:</span> <span class="string">'private'</span> &#125;&#125;)</span><br><span class="line"></span><br><span class="line">const userId = <span class="string">'123'</span></span><br><span class="line">router.push(&#123; <span class="string">path:</span> `<span class="regexp">/user/</span>$&#123;userId&#125;` &#125;) <span class="comment">// -&gt; /user/123</span></span><br><span class="line"><span class="comment">// 这里的 params 不生效</span></span><br><span class="line">router.push(&#123; <span class="string">path:</span> <span class="string">'/user'</span>, <span class="string">params:</span> &#123; userId &#125;&#125;) <span class="comment">// -&gt; /user</span></span><br></pre></td></tr></table></figure>
<h5 id="router-replace"><a href="#router-replace" class="headerlink" title="router.replace"></a>router.replace</h5><div class="note danger">
            <p>唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录</p>
          </div>

<h5 id="router-go-类似window-history-go-n"><a href="#router-go-类似window-history-go-n" class="headerlink" title="router.go 类似window.history.go(n)"></a>router.go 类似window.history.go(n)</h5><div class="note success">
            <p>参数是一个整数，在 history 记录中向前或者后退多少步</p>
          </div>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在浏览器记录中前进一步，等同于 history.forward()</span></span><br><span class="line">router.go(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后退一步记录，等同于 history.back()</span></span><br><span class="line">router.go(<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="路由命名"><a href="#路由命名" class="headerlink" title="路由命名"></a>路由命名</h4><div class="note success">
            <p>用于区分不同的路由，主要是起到标识作用</p>
          </div>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">const</span> <span class="string">router</span> <span class="string">=</span> <span class="string">new</span> <span class="string">VueRouter(&#123;</span></span><br><span class="line">  <span class="attr">routes:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">'/user/:userId'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">'user'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">component:</span> <span class="string">User</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">]</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="string">//声明式导航</span></span><br><span class="line"><span class="string">&lt;router-link</span> <span class="string">:to="&#123;</span> <span class="attr">name:</span> <span class="string">'user'</span><span class="string">,</span> <span class="attr">params:</span> <span class="string">&#123;</span> <span class="attr">userId:</span> <span class="number">123</span> <span class="string">&#125;&#125;"&gt;User&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">//编程式导航</span></span><br><span class="line"><span class="string">router.push(&#123;</span> <span class="attr">name:</span> <span class="string">'user'</span><span class="string">,</span> <span class="attr">params:</span> <span class="string">&#123;</span> <span class="attr">userId:</span> <span class="number">123</span> <span class="string">&#125;&#125;)</span></span><br></pre></td></tr></table></figure>
<h4 id="命名视图"><a href="#命名视图" class="headerlink" title="命名视图"></a>命名视图</h4><div class="note success">
            <p>同时 (同级) 展示多个视图，而不是嵌套展示</p>
          </div>

<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!-- 没有写name等于默认值default --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">"view one"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">"view two"</span> <span class="attr">name</span>=<span class="string">"a"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">"view three"</span> <span class="attr">name</span>=<span class="string">"b"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">const Foo=</span><span class="template-variable">&#123;&#125;</span></span><br><span class="line"><span class="xml">const Bar=</span><span class="template-variable">&#123;&#125;</span></span><br><span class="line"><span class="xml">const Baz=</span><span class="template-variable">&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">const router = new VueRouter(</span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable">  routes: [</span></span><br><span class="line"><span class="template-variable">    &#123;</span></span><br><span class="line"><span class="template-variable">      path: '/',</span></span><br><span class="line"><span class="template-variable">      components: &#123;</span></span><br><span class="line"><span class="template-variable">        <span class="keyword">default</span>: Foo,</span></span><br><span class="line"><span class="template-variable">        a: Bar,</span></span><br><span class="line"><span class="template-variable">        b: Baz</span></span><br><span class="line"><span class="template-variable">      &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  ]</span></span><br><span class="line"><span class="xml">&#125;)</span></span><br></pre></td></tr></table></figure>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><div class="note success">
            <p>命名的路由<br>动态返回重定向目标<br>/a 的别名是 /b，意味着，当用户访问 /b 时，URL 会保持为 /b，但是路由匹配则为 /a，就像用户访问 /a 一样</p>
          </div>

<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">const router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line"><span class="symbol">  routes:</span> [</span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'/a'</span>, <span class="string">redirect:</span> <span class="string">'/b'</span> &#125;</span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'/a'</span>, <span class="string">redirect:</span> &#123; <span class="string">name:</span> <span class="string">'foo'</span> &#125;&#125;</span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'/a'</span>, <span class="string">redirect:</span> to =&gt; &#123;</span><br><span class="line">      <span class="comment">// 方法接收 目标路由 作为参数</span></span><br><span class="line">      <span class="comment">// return 重定向的 字符串路径/路径对象</span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'/a'</span>, <span class="string">component:</span> A, <span class="string">alias:</span> <span class="string">'/b'</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="路由组件传参"><a href="#路由组件传参" class="headerlink" title="路由组件传参"></a>路由组件传参</h4><h5 id="布尔模式"><a href="#布尔模式" class="headerlink" title="布尔模式"></a>布尔模式</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">const</span> <span class="string">User</span> <span class="string">=</span> <span class="string">&#123;</span></span><br><span class="line">  <span class="attr">props:</span> <span class="string">['id'],</span></span><br><span class="line">  <span class="attr">template:</span> <span class="string">'&lt;div&gt;User <span class="template-variable">&#123;&#123; id &#125;&#125;</span>&lt;/div&gt;'</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">const</span> <span class="string">router</span> <span class="string">=</span> <span class="string">new</span> <span class="string">VueRouter(&#123;</span></span><br><span class="line">  <span class="attr">routes:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">&#123;</span> </span><br><span class="line">      <span class="attr">path:</span> <span class="string">'/user/:id'</span><span class="string">,</span> </span><br><span class="line">      <span class="attr">component:</span> <span class="string">User,</span> </span><br><span class="line">      <span class="attr">props:</span> <span class="literal">true</span> </span><br><span class="line">    <span class="string">&#125;,</span></span><br><span class="line">    <span class="string">//</span> <span class="string">对于包含命名视图的路由，你必须分别为每个命名视图添加</span> <span class="string">`props`</span> <span class="string">选项：</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">'/user/:id'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">components:</span> <span class="string">&#123;</span> <span class="attr">default:</span> <span class="string">User,</span> <span class="attr">sidebar:</span> <span class="string">Sidebar</span> <span class="string">&#125;,</span></span><br><span class="line">      <span class="attr">props:</span> <span class="string">&#123;</span> <span class="attr">default:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">sidebar:</span> <span class="literal">false</span> <span class="string">&#125;</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">]</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<h5 id="对象模式"><a href="#对象模式" class="headerlink" title="对象模式"></a>对象模式</h5><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line">const router = <span class="keyword">new</span> <span class="type">VueRouter</span>(&#123;</span><br><span class="line">  routes: <span class="type"></span>[</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="type"></span>'/promotion/from-<span class="keyword">new</span><span class="type">sletter</span>', </span><br><span class="line">      component: <span class="type">Promotion</span>, </span><br><span class="line">      props: <span class="type"></span>&#123; <span class="keyword">new</span><span class="type">sletterPopup</span>: <span class="literal">false</span> &#125; &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h6 id="函数模式"><a href="#函数模式" class="headerlink" title="函数模式"></a>函数模式</h6><div class="note info">
            <p>URL /search?q=vue 会将 {query: ‘vue’} 作为属性传递给 SearchUser 组件</p>
          </div>

<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">const router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line"><span class="symbol">  routes:</span> [</span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'/search'</span>, <span class="string">component:</span> SearchUser, <span class="string">props:</span> (route) =&gt; (&#123; <span class="string">query:</span> route.query.q &#125;) &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="H5的hsitory模式"><a href="#H5的hsitory模式" class="headerlink" title="H5的hsitory模式"></a>H5的hsitory模式</h4><div class="note danger">
            <p>vue-router 默认 hash 模式 —— 使用 URL 的 hash 来模拟一个完整的 URL，于是当 URL 改变时，页面不会重新加载</p><p>需要后端配置[<a href="https://router.vuejs.org/zh/guide/essentials/history-mode.html#%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E4%BE%8B%E5%AD%90]" target="_blank" rel="noopener">https://router.vuejs.org/zh/guide/essentials/history-mode.html#%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E4%BE%8B%E5%AD%90]</a></p>
          </div>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">const router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line"><span class="symbol">  mode:</span> <span class="string">'history'</span>,</span><br><span class="line"><span class="symbol">  routes:</span> [</span><br><span class="line">    <span class="comment">//404页面</span></span><br><span class="line">    &#123; <span class="string">path:</span> <span class="string">'*'</span>, <span class="string">component:</span> NotFoundComponent &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue组件-插槽</title>
    <url>/posts/4595edb9.html</url>
    <content><![CDATA[<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/iHZ9AuycptWKTmz.png" alt="v-slot的取代"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/czphIqNl4M9XQm2.png" alt="废弃语法"></p>
<div class="note success">
            <p>介绍插槽使用及注意点</p>
          </div>

<p><a href="https://cn.vuejs.org/v2/guide/components.html#%E9%80%9A%E8%BF%87%E6%8F%92%E6%A7%BD%E5%88%86%E5%8F%91%E5%86%85%E5%AE%B9" target="_blank" rel="noopener">基础插槽知识</a><br><a href="https://cn.vuejs.org/v2/guide/components-slots.html" target="_blank" rel="noopener">进阶插槽知识</a><br><a href="https://segmentfault.com/a/1190000019630737?utm_source=tag-newest" target="_blank" rel="noopener">参考文章资料</a></p>
<h4 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h4><div class="note success">
            <p>Vue 实现了一套内容分发的 API，将<slot>元素作为承载分发内容的出口，<br>插槽内可以包含任何模板代码，包含 HTML。插槽就是子组件提供的可替换模板，父组件可以根据需求改变模板的内容<br>脚手架[ES6 语法] 写法<a href="https://segmentfault.com/a/1190000019630737?utm_source=tag-newest" target="_blank" rel="noopener">移步参考文章资料</a></p>
          </div>

<h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><div class="note warning">
            <ul><li>v-slot 只能添加到 &lt;template&gt;标签上，v-slot 的简写形式#，例如 v-slot:header 等价于 #header</li><li>利用了<slot>的 name 属性，利用这个属性可以用来定义额外的插槽，一个不带 name 的<slot>出口会带有隐含的名字“default”</li><li>跟 v-on 和 v-bind 一样，v-slot 也有缩写，即把参数之前的所有内容 (v-slot:) 替换为字符 #</li></ul>
          </div>

<h4 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h4><div class="note success">
            <p>自身理解：顾名思义具体名称的插槽—需要多个插槽<br>不带 name 的 <slot> 出口会带有隐含的名字“default”。<br><slot> 元素有一个特殊的 attribute：name,定义额外插槽<br>向具名插槽提供内容的时候在一个 &lt;template&gt; 元素上使用 v-slot 指令，<br>并以 v-slot 的参数的形式提供其名称</p>
          </div>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-layout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here's some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">base-layout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">Vue.component('base-layout', &#123;</span><br><span class="line">    template: `</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/OVL2rdaemXTBF8j.png" alt="具名插槽"></p>
<h4 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h4><div class="note success">
            <p>自身理解：顾名思义不同作用域插槽<br>通过“插槽prop”，父组件可以接收到子组件的数据，并且可以对数据进行操作，展现成父组件想要实现的样子。<br>插槽 prop：绑定在 <slot> 元素上的 attribute</p>
          </div>

<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">//vue实例</span><br><span class="line">const app = new Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: <span class="keyword">function</span> () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            slotList: [&#123;</span><br><span class="line">                    title: <span class="string">'围城'</span>,</span><br><span class="line">                   <span class="built_in"> name</span>: <span class="string">'钱钟书'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    title: <span class="string">'追风筝的人'</span>,</span><br><span class="line">                   <span class="built_in"> name</span>: <span class="string">'卡勒德·胡赛尼'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    title: <span class="string">'灿烂千阳'</span>,</span><br><span class="line">                   <span class="built_in"> name</span>: <span class="string">'卡勒德·胡赛尼'</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">//子组件</span><br><span class="line">Vue.component(<span class="string">'slot-child'</span>, &#123;</span><br><span class="line">    // props:[<span class="string">"slotList"</span>] 只适用只有开发原型系统时可以接受</span><br><span class="line">    props: &#123;</span><br><span class="line">        slotList: &#123;</span><br><span class="line">            type: Array,</span><br><span class="line">            default: () =&gt; []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data:function()&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    template: `</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        </span><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"slot-scope"</span> <span class="attr">v-for</span>=<span class="string">"item in slotList"</span> <span class="attr">v-bind</span>=<span class="string">"item"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                </span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>书名：《</span><span class="xquery">&#123;&#123;<span class="type">item</span>.title&#125;</span><span class="xml">&#125;》; 作者：</span><span class="xquery">&#123;&#123;<span class="type">item</span><span class="built_in">.name</span>&#125;</span><span class="xml">&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br><span class="line">//html部分</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">slot-child</span> <span class="attr">:slot-list</span>=<span class="string">'slotList'</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:slot-scope</span>=<span class="string">"item"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- 这里的`v-slot`指向的是name='slot-scope'的`</span></span><span class="xml"><span class="comment">&lt;slot&gt;`,通过item可以接收到子组件的返回值，这个值是自定义的，被称为插槽prop --&gt;</span></span></span><br><span class="line"><span class="xml">        </span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>书名：<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: red"</span>&gt;</span>《</span><span class="xquery">&#123;&#123;<span class="type">item</span>.title&#125;</span><span class="xml">&#125;》<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="xml"> 作者：<span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="xml">                style='color: green'&gt;</span><span class="xquery">&#123;&#123;<span class="type">item</span><span class="built_in">.name</span>&#125;</span><span class="xml">&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- 接收到子组件的返回值item，这里父组件重新对数据进行排版以满足自己的需求，从而提高组件的复用程度 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/slot-child&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">//官网案例</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">current-user</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- </span></span><span class="xml"><span class="comment">&lt;template #userdata="slotProps"&gt; 插槽缩写--&gt;</span></span></span><br><span class="line"><span class="xml">        </span><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:userdata</span>=<span class="string">"slotProps"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="xquery">&#123;&#123;slotProps.user.firstName&#125;</span><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    Vue.component('current-user', </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">        data: <span class="keyword">function</span> () &#123;</span></span><br><span class="line"><span class="xquery">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="xquery">                user: &#123;</span></span><br><span class="line"><span class="xquery">                    <span class="string">'firstName'</span>: <span class="string">"tom"</span>,</span></span><br><span class="line"><span class="xquery">                    <span class="string">'lastName'</span>: <span class="string">"jack"</span>,</span></span><br><span class="line"><span class="xquery">                &#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        template: `</span></span><br><span class="line"><span class="xml">            </span><span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                </span><span class="xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"userdata"</span> <span class="attr">v-bind:user</span>=<span class="string">"user"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="comment">&lt;!-- 后备内容即默认值 --&gt;</span></span></span><br><span class="line"><span class="xml">                    </span><span class="xquery">&#123;&#123;user.lastName &#125;</span><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        `</span></span><br><span class="line"><span class="xml">    &#125;)</span></span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/sQv5PrgnGlJEq6c.png" alt="作用域插槽"></p>
<h5 id="独占默认插槽的缩写语法"><a href="#独占默认插槽的缩写语法" class="headerlink" title="独占默认插槽的缩写语法"></a>独占默认插槽的缩写语法</h5><div class="note warning">
            <p>默认插槽的缩写语法不能和具名插槽混用，因为它会导致作用域不明确</p>
          </div>

<figure class="highlight nsis"><table><tr><td class="code"><pre><span class="line">//原本写法</span><br><span class="line">&lt;<span class="literal">current</span>-<span class="literal">user</span> v-slot:default=<span class="string">"slotProps"</span>&gt;</span><br><span class="line">  &#123;&#123; slotProps.<span class="literal">user</span>.firstName &#125;&#125;</span><br><span class="line">&lt;/<span class="literal">current</span>-<span class="literal">user</span>&gt;</span><br><span class="line"></span><br><span class="line">//缩写</span><br><span class="line">&lt;<span class="literal">current</span>-<span class="literal">user</span> v-slot=<span class="string">"slotProps"</span>&gt;</span><br><span class="line">  &#123;&#123; slotProps.<span class="literal">user</span>.firstName &#125;&#125;</span><br><span class="line">&lt;/<span class="literal">current</span>-<span class="literal">user</span>&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue组件-如何绑定原生事件至组件</title>
    <url>/posts/48944071.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">Vue组件学习</blockquote>

<h4 id="父组件与孙组件怎么通信？"><a href="#父组件与孙组件怎么通信？" class="headerlink" title="父组件与孙组件怎么通信？"></a>父组件与孙组件怎么通信？</h4><h5 id="参考文章：vue组件间通信六种方式差异"><a href="#参考文章：vue组件间通信六种方式差异" class="headerlink" title="参考文章：vue组件间通信六种方式差异"></a><a href="https://www.jianshu.com/p/c015141441f4" target="_blank" rel="noopener">参考文章：vue组件间通信六种方式差异</a></h5><ul>
<li><p>$attrs/$listeners 具体使用例子</p>
<div class="note success">
            <p>$attrs–继承所有的父组件属性（除了 prop 传递的属性、class 和 style ）</p><p>inheritAttrs：默认值 true,继承所有的父组件属性（除 props 的特定绑定）作为普通的 HTML 特性应用在子组件的根元素上，如果你不希望组件的根元素继承特性设置 inheritAttrs: false,但是 class 属性会继承</p><p>$listeners–属性，它是一个对象，里面包含了作用在这个组件上的所有监听器，你就可以配合 v-on=”$listeners” 将所有的事件监听器指向这个组件的某个特定的子元素</p>
          </div>

  <figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app-7"</span>&gt;</span><br><span class="line">        &lt;base-<span class="keyword">input</span> <span class="keyword">label</span>=<span class="string">"for-input"</span> placeholder=<span class="string">"$attr"</span> </span><br><span class="line">        <span class="keyword">class</span>=<span class="string">"username-input"</span>  v-<span class="keyword">on</span>:listener-name=<span class="string">"methodName"</span> v-model=<span class="string">"test"</span>&gt;&lt;/base-<span class="keyword">input</span>&gt;</span><br><span class="line">        &#123;&#123;<span class="keyword">test</span>&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">Vue.component('base-<span class="keyword">input</span>', &#123;</span><br><span class="line">    inheritAttrs: false,<span class="comment">//控制继承父组件属性</span></span><br><span class="line">    props: ['<span class="keyword">label</span>', 'value'],</span><br><span class="line">    computed: &#123;</span><br><span class="line">        inputListeners: function () &#123;</span><br><span class="line">        <span class="keyword">var</span> vm = this</span><br><span class="line">        <span class="comment">// `Object.assign` 将所有的对象合并为一个新对象</span></span><br><span class="line">        <span class="keyword">return</span> Object.assign(&#123;&#125;,</span><br><span class="line">            <span class="comment">// 我们从父级添加所有的监听器</span></span><br><span class="line">            this.<span class="variable">$listeners</span>,</span><br><span class="line">            <span class="comment">// 然后我们添加自定义监听器，</span></span><br><span class="line">            <span class="comment">// 或覆写一些监听器的行为</span></span><br><span class="line">            &#123;</span><br><span class="line">            <span class="comment">// 这里确保组件配合 `v-model` 的工作</span></span><br><span class="line">            <span class="keyword">input</span>: function (event) &#123;</span><br><span class="line">                vm.<span class="variable">$emit</span>('<span class="keyword">input</span>', event.target.value)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    template: `</span><br><span class="line">        &lt;<span class="keyword">label</span>&gt;</span><br><span class="line">        &#123;&#123; <span class="keyword">label</span> &#125;&#125;</span><br><span class="line">        &lt;<span class="keyword">input</span></span><br><span class="line">            v-bind=<span class="string">"$attrs"</span></span><br><span class="line">            v-bind:value=<span class="string">"value"</span></span><br><span class="line">            v-<span class="keyword">on</span>=<span class="string">"inputListeners"</span></span><br><span class="line">        &gt;</span><br><span class="line">        &lt;/<span class="keyword">label</span>&gt;</span><br><span class="line">    `,</span><br><span class="line">    mounted: function() &#123;</span><br><span class="line">            console.<span class="built_in">log</span>(this.<span class="variable">$attrs</span>);<span class="comment">//打印继承属性</span></span><br><span class="line">            console.<span class="built_in">log</span>(this.<span class="variable">$listeners</span>);<span class="comment">//打印使用组件的事件</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">        <span class="keyword">var</span> app7 = new Vue(&#123;</span><br><span class="line">            el: '#<span class="keyword">app</span>-7',</span><br><span class="line">            data: &#123;</span><br><span class="line">                <span class="keyword">test</span>:''</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                methodName:function(<span class="keyword">e</span>)&#123;</span><br><span class="line">                    console.<span class="built_in">log</span>(2);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
  <div class="note primary">
            <p><a href="https://cn.vuejs.org/v2/api/#vm-listeners" target="_blank" rel="noopener">$listeners详解</a><br>使用base-input时，传入的所有v-on事件都可以在$listeners对象中找到<br>【包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器】<br>computed -&gt; inputListeners就是把用户使用base-input组件时传入的v-on方法收集起来 在转发给input框<br>实质：只是转发了父组件传入的参数给input元素</p>
          </div>
<h4 id="监听一个组件原生根元素上事件-native-修饰符"><a href="#监听一个组件原生根元素上事件-native-修饰符" class="headerlink" title="监听一个组件原生根元素上事件 native 修饰符"></a>监听一个组件原生根元素上事件 native 修饰符</h4>  <div class="note warning">
            <p>普通元素无效</p>
          </div>
<ul>
<li>使用 v-on 的 .native 修饰符：<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"app"</span>&gt;</span><br><span class="line">　　&lt;<span class="keyword">my</span>-component v-<span class="keyword">on</span>:click.native=<span class="string">"clickFun"</span>&gt;&lt;/<span class="keyword">my</span>-component&gt;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">Vue.component('<span class="keyword">my</span>-component', &#123;</span><br><span class="line">　　template: `&lt;a href='<span class="comment">#'&gt;click me&lt;/a&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line">new Vue(&#123;</span><br><span class="line">　　el: '<span class="comment">#app',</span></span><br><span class="line">　　methods: &#123;</span><br><span class="line">　　　　clickFun: function()&#123;</span><br><span class="line">　　　　　　console.<span class="built_in">log</span>(<span class="string">"message: success"</span>)</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue组件-自定义事件</title>
    <url>/posts/5fcafa01.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">Vue组件学习</blockquote>
<div class="note warning">
            <p>请注意实例化方法等使用Vue版本</p>
          </div>

<h4 id="组件注册"><a href="#组件注册" class="headerlink" title="组件注册"></a>组件注册</h4><ul>
<li>组件大小写<br>  使用 kebab-case<pre><code>Vue.component(&apos;my-component-name&apos;, { /* ... */ })</code></pre>  使用 PascalCase<pre><code>Vue.component(&apos;MyComponentName&apos;, { /* ... */ })</code></pre></li>
<li>全局注册<br>  Vue.component(‘my-component-name’, {<br>  // … 选项 …<br>  })</li>
<li>局部注册<br>  var ComponentA = { /* … */ }<br>  new Vue({<br>  el: ‘#app’,<br>  components: {<pre><code>&apos;component-a&apos;: ComponentA,</code></pre>  }<br>  })  <div class="note success">
            <p>注意局部注册的组件在其子组件中不可用</p>
          </div>
<h4 id="Prop"><a href="#Prop" class="headerlink" title="Prop"></a>Prop</h4></li>
</ul>
<h4 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/UhHz3xWEBnsLKuP.png" alt="组件间通信"></p>
<div class="note warning">
            <p>当子组件需要向父组件传递数据时，就要用到自定义事件<br>子组件用<strong>$ emit()来触发事件</strong>，父组件在调用子组件上，加@事件名来监听子组件的事件。</p>
          </div>

<div class="note success">
            <p><a href="https://segmentfault.com/a/1190000018809309" target="_blank" rel="noopener">摘自参考文章</a></p><h5 id="子向父的介质是自定义事件"><a href="#子向父的介质是自定义事件" class="headerlink" title="子向父的介质是自定义事件"></a>子向父的介质是自定义事件</h5><ul><li>1、子组件在 props 中创建一个属性，用以接收父组件传过来的值<br>2、父组件中注册子组件<br>3、在子组件标签中添加子组件 props 中创建的属性<br>4、把需要传给子组件的值赋给该属性</li></ul><h5 id="父向子的介质是-props-中的属性"><a href="#父向子的介质是-props-中的属性" class="headerlink" title="父向子的介质是 props 中的属性"></a>父向子的介质是 props 中的属性</h5><ul><li>1、子组件中需要以某种方式例如点击事件的方法来触发一个自定义事件<br>2、将需要传的值作为$emit 的第二个参数，该值将作为实参传给响应自定义事件的方法<br>3、在父组件中注册子组件并在子组件标签上绑定对自定义事件的监听</li></ul><h5 id="非父子组件的介质是中央事件总线"><a href="#非父子组件的介质是中央事件总线" class="headerlink" title="非父子组件的介质是中央事件总线"></a>非父子组件的介质是中央事件总线</h5><ul><li>1、新建一个 eventBus.js 文件，在里面新建一个 vue 实例，这个实例就承担起了组件之间通信的桥梁了，也就是中央事件总线<br>2、然后给每个子组件绑定一个方法(触发时候发布 eventBus),在每个子组件做一个订阅的监控,触发绑在 created 里的方法执行</li></ul>
          </div>

<h5 id="事件名"><a href="#事件名" class="headerlink" title="事件名"></a>事件名</h5><ul>
<li>事件名命名规范<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">this.$emit('myEvent')</span><br><span class="line">this.$emit('<span class="keyword">my</span>-event')</span><br><span class="line">&lt;<span class="keyword">my</span>-component v-<span class="keyword">on</span>:<span class="keyword">my</span>-event=<span class="string">"doSomething"</span>&gt;&lt;/<span class="keyword">my</span>-component&gt;</span><br></pre></td></tr></table></figure>
<div class="note danger">
            <p>推荐：始终使用 kebab-case 的事件名 [短横线分隔命名]</p>
          </div>

</li>
</ul>
<h5 id="自定义事件-1"><a href="#自定义事件-1" class="headerlink" title="自定义事件"></a>自定义事件</h5><ul>
<li><p>自定义事件及其注意点</p>
<div class="note info">
            <p>以下例子-父子组件传递值和监听事件</p>
          </div>

<p><a href="https://cn.vuejs.org/v2/api/#vm-emit" target="_blank" rel="noopener">$emit 详解</a><br><a href="https://cn.vuejs.org/v2/api/#vm-on" target="_blank" rel="noopener">$on 详解</a><br><a href="https://cn.vuejs.org/v2/api/#vm-attrs" target="_blank" rel="noopener">$attrs 详解</a><br><a href="https://cn.vuejs.org/v2/api/#Vue-nextTick" target="_blank" rel="noopener">$nextTick 详解</a><br><a href="https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E8%AE%BF%E9%97%AE%E5%AD%90%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E6%88%96%E5%AD%90%E5%85%83%E7%B4%A0" target="_blank" rel="noopener">$refs 详解</a></p>
<div class="note success">
            <p><a href="https://blog.csdn.net/wh710107079/article/details/88243638" target="_blank" rel="noopener">摘自参考文章</a></p><ul><li>$refs 是一个对象，持有已注册过 ref 的所有的子组件</li><li>ref 被用来给元素或子组件注册引用信息， 引用信息将会注册在父组件的 $refs 对象上，如果是在普通的 DOM 元素上使用，引用指向的就是 DOM 元素，如果是在子组件上，引用就指向组件的实例。</li><li>ref 加在普通的元素上，用 this.$refs.（ref 值）  获取到的是 dom 元素</li><li>ref 加在子组件上，用 this.$refs.（ref值） 获取到的是组件实例，可以使用组件的所有方法。在使用方法的时候直接this.$refs.（ref 值）.方法（） 就可以使用了。</li><li>如何利用 v-for 和 ref 获取一组数组或者 dom 节点</li><li>vue 组件中,加冒号的，说明后面的是一个变量或者表达式，没加冒号的后面就是对应的字符串字面量<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="meta">:val="numlist" :keys="index"</span> //变量或者表达式</span><br><span class="line"><span class="code"> val="numlist" keys="index" //字符串字面量</span></span><br></pre></td></tr></table></figure></li></ul>
          </div>
  <figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!-- ref普通元素开始 --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">ref</span>=<span class="string">"test"</span>&gt;</span>test<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"list in refslist"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">ref</span>=<span class="string">"refslist"</span>&gt;</span></span><span class="template-variable">&#123;&#123;list&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- ref普通元素结束 --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- ref子组件开始 --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">my-event</span> <span class="attr">ref</span>=<span class="string">"handles"</span>&gt;</span>$ref用法<span class="tag">&lt;/<span class="name">my-event</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- ref子通组件结束 --&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">Vue.component('my-event', &#123;</span></span><br><span class="line"><span class="xml">    template: '<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>',</span></span><br><span class="line"><span class="xml">    methods: &#123;</span></span><br><span class="line"><span class="xml">        emitEvent: function (e) &#123;</span></span><br><span class="line"><span class="xml">            console.log('父组件调用到子组件的emitEvent方法----' + e)</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">&#125;);</span></span><br><span class="line"><span class="xml">getChildmsg: function () &#123;</span></span><br><span class="line"><span class="xml">    var _this = this;</span></span><br><span class="line"><span class="xml">    this.$nextTick(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">        _this.$refs.handles.emitEvent('我是父组件中的数据');</span></span><br><span class="line"><span class="xml">        //调用子组件的方法，handles是上边ref起的名字，emitEvent是子组件的方法。</span></span><br><span class="line"><span class="xml">    &#125;)</span></span><br><span class="line"><span class="xml">    this.$nextTick(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">        // for获取到DOM元素</span></span><br><span class="line"><span class="xml">        var content = _this.$refs.refslist;</span></span><br><span class="line"><span class="xml">        console.log(content);//(4) [li, li, li, li]</span></span><br><span class="line"><span class="xml">    &#125;)</span></span><br><span class="line"><span class="xml">    this.$nextTick(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">        //普通元素</span></span><br><span class="line"><span class="xml">        var _this = this;</span></span><br><span class="line"><span class="xml">        var tets = _this.$refs.test;</span></span><br><span class="line"><span class="xml">        console.log(tets);//<span class="tag">&lt;<span class="name">li</span>&gt;</span>test<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    &#125;)</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/gD9AyWnPSjfedps.png" alt="坑"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-component</span> @<span class="attr">increase</span>=<span class="string">"handleShow"</span>  <span class="attr">v-for</span>=<span class="string">"(numlist,index) in list"</span> <span class="attr">:val</span>=<span class="string">"numlist"</span> <span class="attr">:keys</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-event</span> <span class="attr">ref</span>=<span class="string">"handles"</span>&gt;</span>$ref用法<span class="tag">&lt;/<span class="name">my-event</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"getChildmsg"</span>&gt;</span>触发子组件函数<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--父组件中通过监测my-event事件执行一个方法，然后取到子组件中传递过来的值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        子组件回传父组件接收到的数据--&#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'my-component'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">        props: [<span class="string">'val'</span>, <span class="string">'keys'</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">        template: '<span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">"handleIncrease"</span>&gt;</span></span><span class="template-variable">&#123;&#123;keys&#125;&#125;</span><span class="xml">---</span><span class="template-variable">&#123;&#123;val&#125;&#125;</span><span class="xml">--</span><span class="template-variable">&#123;&#123;nums&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span>',</span></span></span><br><span class="line"><span class="actionscript">        data: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                nums: <span class="string">'0'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            handleIncrease: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.nums++;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'子组件点击事件由$emit触发--'</span> + <span class="keyword">this</span>.nums);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$emit(<span class="string">'increase'</span>, <span class="keyword">this</span>.nums);</span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            emitEvent: <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'父组件调用到子组件的emitEvent方法'</span>+e)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">            _this.$on(<span class="string">'increase'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(val)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 监听当前实例上的自定义事件,回调函数会接收所有传入事件触发函数的额外参数</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'子组件向父组件传递值---'</span> + val);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'my-event'</span>, &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">        template: '<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>',</span></span></span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            emitEvent: <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'父组件调用到子组件的emitEvent方法----'</span>+e)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="actionscript">            list: [<span class="string">'test'</span>, <span class="string">'props'</span>, <span class="string">'vue'</span>, <span class="string">'app'</span>],</span></span><br><span class="line"><span class="actionscript">            message: <span class="string">''</span>,</span></span><br><span class="line">            refslist:&#123;</span><br><span class="line"><span class="actionscript">                content:<span class="string">'test'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            handleShow: <span class="function"><span class="keyword">function</span> <span class="params">(val)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 父组件中通过监测my-event事件执行一个方法，然后取到子组件中传递过来的值</span></span></span><br><span class="line">                _this.message = val;</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'父组件接收的数据------&gt;'</span> + val + <span class="string">'子组件中的数据'</span>);</span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            getChildmsg: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//DOM修改等操作未更新</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//DOM修改等操作已更新</span></span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//此时的$ref是指子组件实例所以可以使用子组件的所有方法</span></span></span><br><span class="line"><span class="actionscript">                    _this.$refs.handles.emitEvent(<span class="string">'我是父组件中的数据'</span>);</span></span><br><span class="line">                &#125;)</span><br><span class="line"><span class="actionscript">                <span class="comment">//调用子组件的方法，handles是上边ref起的名字，emitEvent是子组件的方法。</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/M1EwjDbBgZaIT4l.png" alt="效果"></p>
<ul>
<li>v-model 使用<a href="/posts/f4917a63.html">移步</a></li>
</ul>
<h5 id="绑定原生事件至组件中"><a href="#绑定原生事件至组件中" class="headerlink" title="绑定原生事件至组件中"></a>绑定原生事件至组件中</h5><ul>
<li><p>如何绑定原生事件至组件</p>
<div class="note info">
            <p>Vue中$attrs和$listeners的使用—解决组件通信</p>
          </div>
<p><a href="/posts/48944071.html">移步</a></p>
<h5 id="sync-修饰符"><a href="#sync-修饰符" class="headerlink" title=".sync 修饰符"></a>.sync 修饰符</h5></li>
<li><p>.sync 修饰符</p>
<div class="note info">
            <p>深入理解vue 修饰符sync【 vue sync修饰符示例】</p>
          </div>
<p><a href="https://www.jianshu.com/p/6b062af8cf01" target="_blank" rel="noopener">移步</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6</title>
    <url>/posts/42b82995.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">图片来自网络</blockquote>


<h3 id="ES6进化"><a href="#ES6进化" class="headerlink" title="ES6进化"></a>ES6进化</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U55ffe7e89c4a4ea1a024f462149b3005X.jpg" alt="ES6进化史"></p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><ul>
<li>表达式：声明、解构赋值</li>
<li>内置对象：字符串扩展、数值扩展、对象扩展、数组扩展、函数扩展、正则扩展、Symbol、Set、Map、Proxy、Reflect</li>
<li>语句与运算：Class、Module、Iterator</li>
<li>异步编程：Promise、Generator、Async</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><div class="note primary">
            <p>记录不理解的地方</p>
          </div>

<p><a href="https://blog.techbridge.cc/2017/04/22/javascript-prototype/" target="_blank" rel="noopener">https://blog.techbridge.cc/2017/04/22/javascript-prototype/</a><br><a href="https://www.cnblogs.com/douyage/p/8630529.html" target="_blank" rel="noopener">https://www.cnblogs.com/douyage/p/8630529.html</a></p>
<h4 id="rest参数与arguments关键字"><a href="#rest参数与arguments关键字" class="headerlink" title="rest参数与arguments关键字"></a>rest参数与arguments关键字</h4><ul>
<li>arguments  <div class="note warning">
            <p>arguments，可以获得调用者传入的所有参数<br>arguments最常用于判断传入参数的个数<br>arguments.length</p>
          </div></li>
<li>rest   <div class="note warning">
            <p>获得额外的传入js参数<br>rest参数只能写在最后，前面用…标识，从运行结果可知，传入的参数先绑定a、b，多余的参数以数组形式交给变量rest</p>
          </div>
  <figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(a, b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i, rest = [];</span><br><span class="line">    <span class="keyword">if</span> (arguments.length &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">2</span>; i&lt;arguments.length; i++) &#123;</span><br><span class="line">            rest.push(arguments[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(<span class="string">'a = '</span> + a);</span><br><span class="line">    console.log(<span class="string">'b = '</span> + b);</span><br><span class="line">    console.log(rest);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(a, b, <span class="rest_arg">...rest</span>)</span> </span>&#123;</span><br><span class="line">    console.log(<span class="string">'a = '</span> + a);</span><br><span class="line">    console.log(<span class="string">'b = '</span> + b);</span><br><span class="line">    console.log(rest);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// 结果:</span></span><br><span class="line"><span class="comment">// a = 1</span></span><br><span class="line"><span class="comment">// b = 2</span></span><br><span class="line"><span class="comment">// Array [ 3, 4, 5 ]</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><ul>
<li><p>传统做法如何把一个数组的元素分别赋值给几个变量</p>
  <figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">array</span> = [<span class="string">'hello'</span>, <span class="string">'JavaScript'</span>, <span class="string">'ES6'</span>];</span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">array</span>[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">array</span>[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> z = <span class="keyword">array</span>[<span class="number">2</span>];</span><br></pre></td></tr></table></figure></li>
<li><p>ES6</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">// 如果浏览器支持解构赋值就不会报错:</span></span><br><span class="line"><span class="keyword">var</span> [x, y, z] = [<span class="string">'hello'</span>, <span class="string">'JavaScript'</span>, <span class="string">'ES6'</span>];</span><br></pre></td></tr></table></figure>
  <div class="note danger">
            <p>1.注意，对数组元素进行解构赋值时，多个变量要用[…]括起来。<br>2.如果数组本身还有嵌套，也可以通过下面的形式进行解构赋值，注意嵌套层次和位置要保持一致<br>3.解构赋值还可以忽略某些元素</p>
          </div>
  <figure class="highlight gml"><table><tr><td class="code"><pre><span class="line"> let [<span class="symbol">x</span>, [<span class="symbol">y</span>, z]] = [<span class="string">'hello'</span>, [<span class="string">'JavaScript'</span>, <span class="string">'ES6'</span>]];</span><br><span class="line"> <span class="symbol">x</span>; <span class="comment">// 'hello'</span></span><br><span class="line"> <span class="symbol">y</span>; <span class="comment">// 'JavaScript'</span></span><br><span class="line"> z; <span class="comment">// 'ES6'</span></span><br><span class="line"></span><br><span class="line"> let [, , z] = [<span class="string">'hello'</span>, <span class="string">'JavaScript'</span>, <span class="string">'ES6'</span>]; <span class="comment">// 忽略前两个元素，只对z赋值第三个元素</span></span><br><span class="line"> z; <span class="comment">// 'ES6'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//快速获取对象指定属性</span></span><br><span class="line"> <span class="keyword">var</span> person = &#123;</span><br><span class="line">     name: <span class="string">'小明'</span>,</span><br><span class="line">     age: <span class="number">20</span>,</span><br><span class="line">     gender: <span class="string">'male'</span>,</span><br><span class="line">     passport: <span class="string">'G-12345678'</span>,</span><br><span class="line">     school: <span class="string">'No.4 middle school'</span></span><br><span class="line"> &#125;;</span><br><span class="line"> <span class="keyword">var</span> &#123;name, age, passport&#125; = person;</span><br><span class="line"> <span class="comment">// name, age, passport分别被赋值为对应属性:</span></span><br><span class="line"> <span class="comment">//使用直接用</span></span><br><span class="line"> console.log(<span class="string">'name = '</span> + name + <span class="string">', age = '</span> + age + <span class="string">', passport = '</span> + passport);</span><br></pre></td></tr></table></figure>
<h4 id="数组解构"><a href="#数组解构" class="headerlink" title="数组解构"></a>数组解构</h4>  <div class="note info">
            <p>左边模式等于右边模式</p>
          </div>
</li>
<li><p>完全解构:属于“模式匹配”，只要等号两边的模式相同</p>
  <figure class="highlight gml"><table><tr><td class="code"><pre><span class="line">let [<span class="symbol">x</span>, <span class="symbol">y</span>, ...z] = [<span class="string">'a'</span>];</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// "a"</span></span><br><span class="line"><span class="symbol">y</span> <span class="comment">// undefined</span></span><br><span class="line">z <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line">let [ , , third] = [<span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="string">"baz"</span>];</span><br><span class="line">third <span class="comment">// "baz"</span></span><br></pre></td></tr></table></figure></li>
<li><p>不完全解构:等号左边的模式，只匹配一部分的等号右边的数组</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错：等号的右边不是数组（或者严格地说，不是可遍历的结构）</span></span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = &#123;&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>默认值</p>
  <div class="note warning">
            <p>ES6 内部使用严格相等运算符（===），判断一个位置是否有值<br>只有当一个数组成员严格等于undefined，默认值才会生效。<br>默认值是一个表达式只有在用到的时候，才会求值。<br>引用解构赋值的其他变量，但该变量必须已经声明。</p>
          </div>

  <figure class="highlight gml"><table><tr><td class="code"><pre><span class="line">let [<span class="symbol">x</span> = <span class="number">1</span>] = [<span class="literal">undefined</span>];</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">let [<span class="symbol">x</span> = <span class="number">1</span>] = [null];</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//表达式</span></span><br><span class="line">function f() &#123;</span><br><span class="line">  console.log(<span class="string">'aaa'</span>);</span><br><span class="line">&#125;</span><br><span class="line">let [<span class="symbol">x</span> = f()] = [<span class="number">1</span>];</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">变量声明与未声明变量</span><br><span class="line">let [<span class="symbol">x</span> = <span class="number">1</span>, <span class="symbol">y</span> = <span class="symbol">x</span>] = [];     <span class="comment">// x=1; y=1</span></span><br><span class="line">let [<span class="symbol">x</span> = <span class="symbol">y</span>, <span class="symbol">y</span> = <span class="number">1</span>] = [];     <span class="comment">// ReferenceError: y is not defined</span></span><br></pre></td></tr></table></figure></li>
<li><p>解构失败：变量的值就等于undefined</p>
  <figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo] = [];</span><br><span class="line"><span class="keyword">let</span> [<span class="built_in">bar</span>, foo] = [<span class="number">1</span>];</span><br><span class="line">foo <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="对象解构"><a href="#对象解构" class="headerlink" title="对象解构"></a>对象解构</h4><div class="note success">
            <p>区别：数组的元素是按次序排列的，变量的取值由它的位置决定；<br>而对象的属性没有次序，变量必须与属性同名，才能取到正确的值<br>解构失败：变量的值等于undefined.<br>对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。真正被赋值的是后者，而不是前者</p>
          </div>

<ul>
<li><p>对象的属性没有次序，变量必须与属性同名，才能取到正确的值反之出现undefined</p>
  <figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">let &#123; bar, foo &#125; = &#123; <span class="string">foo:</span> <span class="string">'aaa'</span>, <span class="string">bar:</span> <span class="string">'bbb'</span> &#125;;</span><br><span class="line">foo <span class="comment">// "aaa"</span></span><br><span class="line">bar <span class="comment">// "bbb"</span></span><br><span class="line"></span><br><span class="line">let &#123; baz &#125; = &#123; <span class="string">foo:</span> <span class="string">'aaa'</span>, <span class="string">bar:</span> <span class="string">'bbb'</span> &#125;;</span><br><span class="line">baz <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对象方法也可以赋值到某一个变量</p>
  <figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="built_in">log</span> &#125; = console<span class="comment">;</span></span><br><span class="line"><span class="built_in">log</span>(<span class="string">'hello'</span>) // hello  将console.<span class="built_in">log</span>赋值到<span class="built_in">log</span>变量</span><br></pre></td></tr></table></figure></li>
<li><p>变量名与属性名不一致时，可以改写如下达到解构成功</p>
  <figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">foo</span> 匹配模式  <span class="keyword">baz </span>变量  真正被赋值是<span class="keyword">baz</span></span><br><span class="line"><span class="keyword">let </span>&#123; foo: <span class="keyword">baz </span>&#125; = &#123; foo: <span class="string">'aaa'</span>, <span class="keyword">bar: </span><span class="string">'bbb'</span> &#125;<span class="comment">;</span></span><br><span class="line"><span class="keyword">baz </span>// <span class="string">"aaa"</span></span><br></pre></td></tr></table></figure></li>
<li><p>对象解构也可以用于嵌套结构</p>
  <figure class="highlight gml"><table><tr><td class="code"><pre><span class="line">let obj = &#123;</span><br><span class="line">    p: [</span><br><span class="line">        <span class="string">'Hello'</span>,</span><br><span class="line">        &#123; <span class="symbol">y</span>: <span class="string">'World'</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let &#123; p: [<span class="symbol">x</span>, &#123; <span class="symbol">y</span> &#125;] &#125; = obj;</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// "Hello"</span></span><br><span class="line"><span class="symbol">y</span> <span class="comment">// "World"</span></span><br><span class="line"></span><br><span class="line">注意p 不是变量 是属于匹配模式</span><br><span class="line">如果p也要作为变量赋值</span><br><span class="line">let &#123; p,p: [<span class="symbol">x</span>, &#123; <span class="symbol">y</span> &#125;] &#125; = obj;</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// "Hello"</span></span><br><span class="line"><span class="symbol">y</span> <span class="comment">// "World"</span></span><br><span class="line">p <span class="comment">// ["Hello", &#123;y: "World"&#125;]</span></span><br></pre></td></tr></table></figure></li>
<li><p>默认值：只有对象属性值是undefined才会生效</p>
  <figure class="highlight gml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123;<span class="symbol">x</span> = <span class="number">3</span>&#125; = &#123;<span class="symbol">x</span>: <span class="literal">undefined</span>&#125;;</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="symbol">x</span> = <span class="number">3</span>&#125; = &#123;<span class="symbol">x</span>: null&#125;;</span><br><span class="line"><span class="symbol">x</span> <span class="comment">// null</span></span><br></pre></td></tr></table></figure>
<h4 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h4><p><a href="http://es6.ruanyifeng.com/#docs/destructuring#%E7%94%A8%E9%80%94" target="_blank" rel="noopener">点击这里</a></p>
</li>
</ul>
<h4 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h4><pre><code>{% note success%}
    扩展运算符（spread）是三个点（...）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列
    {% endnote %}

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">console.log(...[1,</span> <span class="number">2</span><span class="string">,</span> <span class="number">3</span><span class="string">])</span></span><br><span class="line"><span class="string">//</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="string">console.log(1,</span> <span class="string">...[2,</span> <span class="number">3</span><span class="string">,</span> <span class="number">4</span><span class="string">],</span> <span class="number">5</span><span class="string">)</span></span><br><span class="line"><span class="string">//</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure></code></pre><ul>
<li>运算符主要用于函数调用  <figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span><span class="params">(array, <span class="rest_arg">...items</span>)</span> </span>&#123;</span><br><span class="line">    array.push(...items);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>放置表达式  <figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">    ...(x &gt; <span class="number">0</span> ? a : <span class="string">""</span>),</span><br><span class="line">    <span class="string">'b'</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure></li>
<li>扩展运算符后面是一个空数组，则不产生任何效果  <figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[...[], <span class="number">1</span>]</span><br><span class="line"><span class="comment">// [1]</span></span><br></pre></td></tr></table></figure></li>
<li>代替apply  <figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES5 的写法</span></span><br><span class="line">Math.max.apply(<span class="literal">null</span>, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 的写法</span></span><br><span class="line">Math.max(...[<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">Math.max(<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>);</span><br><span class="line">通过push函数，将一个数组添加到另一个数组的尾部</span><br><span class="line"><span class="comment">// ES5的 写法</span></span><br><span class="line">var arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">var arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">Array.prototype.push.apply(arr1, arr2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 的写法</span></span><br><span class="line">let arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">let arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr1.push(...arr2);</span><br></pre></td></tr></table></figure>
<h5 id="扩展运算符应用"><a href="#扩展运算符应用" class="headerlink" title="扩展运算符应用"></a>扩展运算符应用</h5><a href="http://es6.ruanyifeng.com/#docs/array#%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E5%BA%94%E7%94%A8" target="_blank" rel="noopener">点击这里</a></li>
</ul>
<h4 id="Prototype-属性"><a href="#Prototype-属性" class="headerlink" title="Prototype 属性"></a>Prototype 属性</h4><h5 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h5><div class="note info">
            <p>构造函数的特点有：</p><p>　　　　a：构造函数的函数名首字母必须大写。</p><p>　　　　b：内部使用this对象，来指向将要生成的对象实例。</p><p>　　　　c：使用new操作符来调用构造函数，并返回对象实例</p>
          </div>
<ul>
<li>出现原因：</li>
</ul>
<h4 id="箭头函数-胖箭头函数"><a href="#箭头函数-胖箭头函数" class="headerlink" title="箭头函数[胖箭头函数]"></a>箭头函数[胖箭头函数]</h4><h5 id="出现原因："><a href="#出现原因：" class="headerlink" title="出现原因："></a>出现原因：</h5><blockquote>
<p>解决传统函数语法的灵活性</p>
<p>一种函数表达式的简写</p>
</blockquote>
<blockquote>
<p><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener">ES6之阮一峰大神</a></p>
</blockquote>
<blockquote>
<p><a href="https://segmentfault.com/a/1190000019102902" target="_blank" rel="noopener">大彬哥-箭头函数</a></p>
</blockquote>
<blockquote>
<p><a href="https://blog.csdn.net/w390058785/article/details/82884032" target="_blank" rel="noopener">两个例子明白箭头函数this指向</a></p>
</blockquote>
<blockquote>
<p>箭头函数内的this值继承自外围作用域。运行时它会首先到它的父作用域找，如果父作用域还是箭头函数，那么接着向上找，直到找到我们要的this指向。</p>
</blockquote>
<blockquote>
<p>箭头函数的this在声明时指向<code>window</code>，在调用时指向声明时所在的上下文<code>this</code></p>
</blockquote>
<ul>
<li><p>节省大量代码</p>
</li>
<li><p>解决输入function () {}错误导致的错误</p>
</li>
</ul>
<p><a href="[https://es6.ruanyifeng.com/?search=%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0&x=0&y=0#docs/function#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0](https://es6.ruanyifeng.com/?search=箭头函数&x=0&y=0#docs/function#箭头函数)">阮一峰之箭头函数this讲解</a></p>
<blockquote>
<p><code>箭头函数this</code>对象，就是定义时所在的对象，而不是使用时所在的对象。</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U9e9aeeeaf3a54652a32c3b9d1941ead2B.jpg" alt="箭头函数this"></p>
<h5 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ES5写法：求和</span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>=&gt; 代替关键词 function</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function">(<span class="params">x,y</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>函数体只有一条返回语句时，省略口号{}和return关键字</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sum  = <span class="function">(<span class="params">x,y</span>) =&gt;</span> x+y</span><br></pre></td></tr></table></figure>

<h5 id="处理简单函数-过滤"><a href="#处理简单函数-过滤" class="headerlink" title="处理简单函数:过滤"></a>处理简单函数:过滤</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES5</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="string">'1'</span>, <span class="string">'2345'</span>, <span class="string">'567'</span>, <span class="string">'89'</span>];</span><br><span class="line">array = array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item.length &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ["2345", "567"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> array = [<span class="string">'1'</span>, <span class="string">'2345'</span>, <span class="string">'567'</span>, <span class="string">'89'</span>];</span><br><span class="line">array = array.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.length &gt; <span class="number">2</span>); </span><br><span class="line"><span class="comment">// ["2345", "567"]</span></span><br></pre></td></tr></table></figure>

<h5 id="箭头函数主要使用模式："><a href="#箭头函数主要使用模式：" class="headerlink" title="箭头函数主要使用模式："></a>箭头函数主要使用模式：</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  一个参数对应一个表达式</span></span><br><span class="line">param =&gt; expression;<span class="comment">// 例如 x =&gt; x+2;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个参数对应一个表达式</span></span><br><span class="line">(param [, param]) =&gt; expression; <span class="comment">//例如 (x,y) =&gt; (x + y);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个参数对应多个表示式</span></span><br><span class="line">param =&gt; &#123;statements;&#125; <span class="comment">//例如 x = &gt; &#123; x++; return x;&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  多个参数对应多个表达式</span></span><br><span class="line">([param] [, param]) =&gt; &#123;statements&#125; <span class="comment">// 例如 (x,y) =&gt; &#123; x++;y++;return x*y;&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//表达式里没有参数</span></span><br><span class="line">() =&gt; expression; <span class="comment">//例如var flag = (() =&gt; 2)(); flag等于2</span></span><br><span class="line"></span><br><span class="line">() =&gt; &#123;statements;&#125; <span class="comment">//例如 var flag = (() =&gt; &#123;return 1;&#125;)(); flag就等于1</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">//传入一个表达式，返回一个对象</span></span><br><span class="line">([param]) =&gt; (&#123; <span class="attr">key</span>: value &#125;);</span><br><span class="line"><span class="comment">//例如  var fuc = (x) =&gt; (&#123;key:x&#125;)</span></span><br><span class="line">        <span class="keyword">var</span> object = fuc(<span class="number">1</span>);</span><br><span class="line">        alert(object);<span class="comment">//&#123;key:1&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="关于this指向问题"><a href="#关于this指向问题" class="headerlink" title="关于this指向问题"></a>关于this指向问题</h4><p><a href="http://caibaojian.com/js-call-stack.html" target="_blank" rel="noopener">执行上下文详解</a></p>
<blockquote>
<p>执行上下文：评估和执行 <a href="http://caibaojian.com/t/javascript" target="_blank" rel="noopener">JavaScript</a> 代码的环境的抽象概念</p>
</blockquote>
<ol>
<li><strong>全局执行上下文</strong></li>
<li><strong>函数执行上下文</strong></li>
<li><strong>Eval 函数执行上下文</strong></li>
</ol>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U9040b363dfc942ac8c05929ba222a8ccj.jpg" alt=""></p>
<p>有1个全局上下文(Global Context)，使用紫色边框表示；</p>
<p>有3个不同的函数上下文(Function Context)由绿色，蓝色，和橙色边框表示。</p>
<blockquote>
<p>注意！全局上下文有且只有一个，程序中其他任意的上下文都可以访问全局上下文</p>
</blockquote>
<h4 id="this绑定："><a href="#this绑定：" class="headerlink" title="this绑定："></a>this绑定：</h4><blockquote>
<p>在全局执行上下文中，<code>this</code> 的值指向全局对象。(在浏览器中，<code>this</code>引用 Window 对象)。</p>
</blockquote>
<blockquote>
<p>在函数执行上下文中，<code>this</code> 的值取决于该函数是如何被调用的。</p>
<p>如果它被一个引用对象调用，那么 <code>this</code> 会被设置成那个对象，</p>
<p>否则 <code>this</code> 的值被设置为全局对象或者 <code>undefined</code>（在严格模式下）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123;</span><br><span class="line">  baz: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo.baz();   <span class="comment">// 'this' 引用 'foo', 因为 'baz' 被</span></span><br><span class="line">             <span class="comment">// 对象 'foo' 调用</span></span><br><span class="line"><span class="keyword">let</span> bar = foo.baz;</span><br><span class="line">bar();       <span class="comment">// 'this' 指向全局 window 对象，因为</span></span><br><span class="line">             <span class="comment">// 没有指定引用对象</span></span><br></pre></td></tr></table></figure>

<h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a><a href="https://www.cnblogs.com/henyulee/p/8484122.html" target="_blank" rel="noopener">作用域</a></h4><ol>
<li>全局作用域</li>
<li>局部作用域</li>
</ol>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Uefb8cf0254ad44a1af49a8ee3382c130L.jpg" alt=""></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Ud44f335e8e764663aa1f29a38e4f9210S.jpg" alt=""></p>
]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>永久激活PHPstorm编辑器</title>
    <url>/posts/7a17374d.html</url>
    <content><![CDATA[<div class="note warning">
            <p>本教程仅供学习使用，切勿商务用途。若有问题，后果自负。</p>
          </div>

<h4 id="以下是激活window为例"><a href="#以下是激活window为例" class="headerlink" title="以下是激活window为例"></a>以下是激活window为例</h4><h4 id="下载压缩包"><a href="#下载压缩包" class="headerlink" title="下载压缩包"></a>下载压缩包</h4><p>作者提供下载地址</p>
<div class="note success">
            <p>下载链接: <a href="https://pan.baidu.com/s/19NNaNv7OeJ92mcSL_sA7Mw" target="_blank" rel="noopener">https://pan.baidu.com/s/19NNaNv7OeJ92mcSL_sA7Mw</a><br>提取码: 7fy6</p>
          </div>
<p>以上链接失效的话尝试如下地址</p>
<div class="note success">
            <p>链接：<a href="https://pan.baidu.com/s/1P3nj76Tpop10oxZfTqWIDw" target="_blank" rel="noopener">https://pan.baidu.com/s/1P3nj76Tpop10oxZfTqWIDw</a><br>提取码：sxj9 </p>
          </div>

<h4 id="解压压缩包放置任意位置"><a href="#解压压缩包放置任意位置" class="headerlink" title="解压压缩包放置任意位置"></a>解压压缩包放置任意位置</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/vCz74i3lQE1POBH.png" alt="image.png"></p>
<h4 id="启动你的IDE，如果上来就需要注册，选择-试-Evaluate-for-free-进-IDE"><a href="#启动你的IDE，如果上来就需要注册，选择-试-Evaluate-for-free-进-IDE" class="headerlink" title="启动你的IDE，如果上来就需要注册，选择:试 (Evaluate for free)进 IDE"></a>启动你的IDE，如果上来就需要注册，选择:试 (Evaluate for free)进 IDE</h4><h4 id="点击你要注册的IDE菜单-Configure-或-Help-gt-Edit-Custom-VM-Options-…如果提示是否要创建-件，请点-Yes"><a href="#点击你要注册的IDE菜单-Configure-或-Help-gt-Edit-Custom-VM-Options-…如果提示是否要创建-件，请点-Yes" class="headerlink" title="点击你要注册的IDE菜单: Configure 或 Help -&gt; Edit Custom VM Options …如果提示是否要创建 件，请点 Yes"></a>点击你要注册的IDE菜单: Configure 或 Help -&gt; Edit Custom VM Options …如果提示是否要创建 件，请点 Yes</h4><h4 id="打开phpstorm64-exe-vmoptionswe年添加压缩包路径"><a href="#打开phpstorm64-exe-vmoptionswe年添加压缩包路径" class="headerlink" title="打开phpstorm64.exe.vmoptionswe年添加压缩包路径"></a>打开phpstorm64.exe.vmoptionswe年添加压缩包路径</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/7kGziqlhP9Mo5g4.png" alt="image.png"></p>
<div class="note danger">
            <p>以我本机为例，注意不要使用中文命名<br>一定要自己确认好路径( 不要使用中文路径)，填错会导致IDE打不开!!!最好使用绝对路径。<br>一个vmoptions内只能有一个 -javaagent 参数。</p>
          </div>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">示例:</span><br><span class="line"><span class="symbol">    mac:</span>  -<span class="string">javaagent:</span><span class="regexp">/Users/</span>neo/jetbrains-agent.jar</span><br><span class="line"><span class="symbol">    linux:</span>  -<span class="string">javaagent:</span><span class="regexp">/home/</span>neo/jetbrains-agent.jar</span><br><span class="line"><span class="symbol">    windows:</span> -<span class="string">javaagent:</span><span class="string">C:</span>\Users\neo\jetbrains-agent.jar</span><br><span class="line">    本机：-<span class="string">javaagent:</span><span class="string">E:</span>\PHPstorm\jetbrains-agent.jar</span><br></pre></td></tr></table></figure>
<h4 id="重启IDE"><a href="#重启IDE" class="headerlink" title="重启IDE"></a>重启IDE</h4><h4 id="选择License-server进行注册"><a href="#选择License-server进行注册" class="headerlink" title="选择License server进行注册"></a>选择License server进行注册</h4><h5 id="注册方式我选择第一种，另外一种我没有尝试"><a href="#注册方式我选择第一种，另外一种我没有尝试" class="headerlink" title="注册方式我选择第一种，另外一种我没有尝试"></a>注册方式我选择第一种，另外一种我没有尝试</h5><p>点击IDE菜单 Help -&gt; Register… 或 Configure -&gt; Manage License…<br>支持两种注册方式:License server 和 Activation code:<br>选择License server方式，<br>地址填 : <a href="http://jetbrains-license-server" target="_blank" rel="noopener">http://jetbrains-license-server</a><br>或者点击按钮: Discover Server 来 自动填充地址</p>
<h5 id="IDE升级会从旧版本导-以上设置，导入配置后可能提示未注册-因为刚导入的vmoptions未生效-，直接重启IDE即可，无需其他操作"><a href="#IDE升级会从旧版本导-以上设置，导入配置后可能提示未注册-因为刚导入的vmoptions未生效-，直接重启IDE即可，无需其他操作" class="headerlink" title="IDE升级会从旧版本导 以上设置，导入配置后可能提示未注册(因为刚导入的vmoptions未生效)，直接重启IDE即可，无需其他操作"></a>IDE升级会从旧版本导 以上设置，导入配置后可能提示未注册(因为刚导入的vmoptions未生效)，直接重启IDE即可，无需其他操作</h5><h4 id="感谢作者的分享，关注公众号：源码站"><a href="#感谢作者的分享，关注公众号：源码站" class="headerlink" title="感谢作者的分享，关注公众号：源码站"></a>感谢作者的分享，关注公众号：源码站</h4><p><a href="https://mp.weixin.qq.com/s?__biz=MzI1ODYyODAwNQ==&mid=100000335&idx=1&sn=c77b63784b5b647710823480c09034f0&chksm=6a0402855d738b93baee8ca1a824dc4e58b3e83842b6279346eed646078ce84bf7a7aabe5da5&scene=20&xtrack=1&key=502e06af756d4cb04377922d22b73e81deab910af219eaf7294382cf6a12d8a8fe18340bba04c06ad95f426f212b5fa4535815773f12e26322f2d10709aff364e2803e73d4b5873acbe368628a502033&ascene=1&uin=Nzc5Njg4NzAz&devicetype=Windows+10&version=62070158&lang=zh_CN&exportkey=AeIOvo%2B9JKfiE6ks3c7%2B6A0%3D&pass_ticket=gkhf1X5NOmcKe9civKguQPE9C6vYoOVr8p483MF3ee8tnHorVS8prgMxMgMmkO%2F3" target="_blank" rel="noopener">感谢作者分享该教程，详细教程请点击这里</a></p>
<h4 id="VSCODE-git-出现”没有活动的源代码控制提供程序"><a href="#VSCODE-git-出现”没有活动的源代码控制提供程序" class="headerlink" title="VSCODE git 出现”没有活动的源代码控制提供程序"></a>VSCODE git 出现”没有活动的源代码控制提供程序</h4><ul>
<li>扩展程序——输入<strong>@builtin</strong>——找到git——启动——重启vscode</li>
<li>在设置中找到“git.path”，会发现后面路径为null，修改为git的安装位置。 “git.path”: “E:/git/Git/bin/git.exe”,</li>
</ul>
]]></content>
      <categories>
        <category>PHPSTORM IDE</category>
      </categories>
      <tags>
        <tag>PHPSTORM</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序</title>
    <url>/posts/538b2da9.html</url>
    <content><![CDATA[<blockquote class="blockquote-center"></blockquote>
<div class="note success">
            <p>记录微信小程序学习</p>
          </div>

<h4 id="开发小程序前的注意事项"><a href="#开发小程序前的注意事项" class="headerlink" title="开发小程序前的注意事项"></a>开发小程序前的注意事项</h4><p><a href="https://cloud.tencent.com/developer/article/1552955" target="_blank" rel="noopener">小程序开发注意事项</a></p>
<h4 id="如何规范设置的小程序名称、简称"><a href="#如何规范设置的小程序名称、简称" class="headerlink" title="如何规范设置的小程序名称、简称"></a>如何规范设置的小程序名称、简称</h4><p><a href="https://developers.weixin.qq.com/community/develop/doc/0004221455ce78d413893d4b75b009?highLine=%25E7%2594%25B3%25E8%25AF%25B7%25E5%25A4%259A%25E4%25B8%25AA%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F" target="_blank" rel="noopener">规范命名小程序</a></p>
<h4 id="微信小程序发布流程"><a href="#微信小程序发布流程" class="headerlink" title="微信小程序发布流程"></a>微信小程序发布流程</h4><p><a href="https://www.jianshu.com/p/a77b73f329e4" target="_blank" rel="noopener">发布流程</a></p>
<h4 id="Promise含义"><a href="#Promise含义" class="headerlink" title="Promise含义"></a>Promise含义</h4><ul>
<li><p>异步编程的一种解决方案</p>
</li>
<li><p>是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果</p>
</li>
<li><p>语法上说，Promise 是一个对象，从它可以获取异步操作的消息</p>
<h4 id="Promise对象"><a href="#Promise对象" class="headerlink" title="Promise对象"></a>Promise对象</h4></li>
<li><p>一个构造函数，用来生成Promise实例</p>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5></li>
<li><p>对象的状态不受外界影响。</p>
<ul>
<li>其代表是一个异步操作</li>
<li>状态：pending（进行中）、fulfilled（已成功）和rejected（已失败）</li>
</ul>
</li>
<li><p>一旦状态改变，就不会再变，任何时候都可以得到这个结果。</p>
<ul>
<li>状态改变：从pending变为fulfilled和从pending变为rejected。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果，这时就称为 resolved（已定型）</li>
<li>resolved统一只指fulfilled状态<h4 id="Promise-用法"><a href="#Promise-用法" class="headerlink" title="Promise 用法"></a>Promise 用法</h4></li>
</ul>
</li>
<li><p>Promise构造函数接受一个函数作为参数，该函数的两个参数分别是resolve和reject</p>
</li>
<li><p>Promise实例生成以后，可以用then方法分别指定resolved状态和rejected状态的回调函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"><span class="comment">// ... some code</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="comment">/* 异步操作成功 */</span>)&#123;</span><br><span class="line">    resolve(value);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// failure</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4></li>
<li><p><a href="https://es6.ruanyifeng.com/#docs/async" target="_blank" rel="noopener">https://es6.ruanyifeng.com/#docs/async</a></p>
</li>
<li><p>就是 Generator 函数的语法糖</p>
</li>
<li><p>返回一个Promise对象</p>
</li>
<li><p>async函数内部return语句返回的值，会成为then方法回调函数的参数。</p>
</li>
<li><p>只有async函数内部的异步操作执行完，才会执行then方法指定的回调函数。</p>
<h4 id="async-function语法"><a href="#async-function语法" class="headerlink" title="async function语法"></a>async function语法</h4></li>
<li><p>自动将常规函数转换成Promise，返回值也是一个Promise对象</p>
</li>
<li><p>只有async函数内部的异步操作执行完，才会执行then方法指定的回调函数</p>
</li>
<li><p>异步函数内部可以使用await</p>
<h4 id="await"><a href="#await" class="headerlink" title="await"></a>await</h4></li>
<li><p>await 放置在Promise调用之前，await 强制后面点代码等待，直到Promise对象resolve，得到resolve的值作为await表达式的运算结果</p>
</li>
<li><p>await只能在async函数内部使用,用在普通函数里就会报错</p>
<h4 id="aysnc用法"><a href="#aysnc用法" class="headerlink" title="aysnc用法"></a>aysnc用法</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve, ms);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncPrint</span>(<span class="params">value, ms</span>) </span>&#123;</span><br><span class="line"><span class="keyword">await</span> timeout(ms);</span><br><span class="line"><span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncPrint(<span class="string">'hello world'</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure>
<h4 id="aysnc多种使用形式"><a href="#aysnc多种使用形式" class="headerlink" title="aysnc多种使用形式"></a>aysnc多种使用形式</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// 函数声明</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数表达式</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象的方法</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="keyword">async</span> foo() &#123;&#125; &#125;;</span><br><span class="line">obj.foo().then(...)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Class 的方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Storage</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.cachePromise = caches.open(<span class="string">'avatars'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> getAvatar(name) &#123;</span><br><span class="line">    <span class="keyword">const</span> cache = <span class="keyword">await</span> <span class="keyword">this</span>.cachePromise;</span><br><span class="line">    <span class="keyword">return</span> cache.match(<span class="string">`/avatars/<span class="subst">$&#123;name&#125;</span>.jpg`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storage = <span class="keyword">new</span> Storage();</span><br><span class="line">storage.getAvatar(<span class="string">'jake'</span>).then(…);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="错误处理查看阮一峰老师讲解"><a href="#错误处理查看阮一峰老师讲解" class="headerlink" title="错误处理查看阮一峰老师讲解"></a>错误处理查看阮一峰老师讲解</h4></li>
</ul>
<h4 id="小程序Token令牌使用场景"><a href="#小程序Token令牌使用场景" class="headerlink" title="小程序Token令牌使用场景"></a>小程序Token令牌使用场景</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/TwCFRezYpZ8qyto.png" alt="小程序Token令牌场景使用"></p>
<ul>
<li>Openid:一个用户针对一个小程序拥有一个Openid,在不同小程序Openid是不一样的</li>
<li>Unionid:，同一用户，对同一个微信开放平台下的不同应用，UnionID是相同的。用户的UnionID可通过调用“获取用户信息”接口获取。同一个用户在微信体系[微信公众号，小程序，服务号等]下Unionid是一样的</li>
</ul>
<h4 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/Lj71lnU45gaZXkc.png" alt="微信支付简易版"></p>
]]></content>
      <categories>
        <category>wechat</category>
      </categories>
  </entry>
  <entry>
    <title>ThinkPHP5.1手记</title>
    <url>/posts/3ec68ba4.html</url>
    <content><![CDATA[<blockquote class="blockquote-center"></blockquote>
<div class="note success">
            <p>ThinkPHP V5.0——为API开发而设计的高性能框架</p>
          </div>

<h4 id="Token令牌-管理api接口的好助手"><a href="#Token令牌-管理api接口的好助手" class="headerlink" title="Token令牌[管理api接口的好助手]"></a>Token令牌[管理api接口的好助手]</h4><h5 id="Token令牌是客户身份识别码"><a href="#Token令牌是客户身份识别码" class="headerlink" title="Token令牌是客户身份识别码"></a>Token令牌是客户身份识别码</h5><h5 id="通用思路Token令牌大致流程"><a href="#通用思路Token令牌大致流程" class="headerlink" title="通用思路Token令牌大致流程"></a>通用思路Token令牌大致流程</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/xOkMwqHtgAFR5pd.png" alt="image.png"></p>
<h5 id="用户获取令牌，完成客户注册过程"><a href="#用户获取令牌，完成客户注册过程" class="headerlink" title="用户获取令牌，完成客户注册过程"></a>用户获取令牌，完成客户注册过程</h5><ul>
<li>用户携带账号密码请求服务端getToken方法生成令牌 </li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/F4iVcjyK3GTCAI6.png" alt="image.png"></p>
<ul>
<li>用户请求接口时携带Token，去请求例如下单接口，在根据令牌去确认用户是否有权限去请求该接口</li>
<li>是否有权限请求接口：1.数据有该用户Token值 2.Token设置有效时间 3.根据Token值对应的权限分组</li>
</ul>
<h4 id="list函数用法"><a href="#list函数用法" class="headerlink" title="list函数用法"></a>list函数用法</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">list</span>($where, $sort, $order, $offset, $limit) = <span class="keyword">$this</span>-&gt;buildparams(<span class="keyword">NULL</span>)；</span><br><span class="line"><span class="keyword">list</span>() 函数用于在一次操作中给一组变量赋值。</span><br><span class="line">--通过buildparams函数把参数传递到<span class="keyword">list</span>进行赋值</span><br><span class="line"></span><br><span class="line">栗子：</span><br><span class="line">$my_array = <span class="keyword">array</span>(<span class="string">"Dog"</span>,<span class="string">"Cat"</span>,<span class="string">"Horse"</span>);</span><br><span class="line"><span class="keyword">list</span>($a, $b, $c) = $my_array;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"I have several animals, a $a, a $b and a $c."</span>;</span><br><span class="line"><span class="comment">// I have several animals, a Dog, a Cat and a Horse.</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="标签位"><a href="#标签位" class="headerlink" title="标签位"></a>标签位</h4><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>可以设置行为的位置</span><br><span class="line"><span class="number">2.</span>可以理解为标签位[适合放置地雷的地方]绑定行为[放一颗地雷, 留一根线链着标签]</span><br></pre></td></tr></table></figure>
<h5 id="扩展理解"><a href="#扩展理解" class="headerlink" title="扩展理解"></a>扩展理解</h5><ul>
<li>钩子(中间件)：应用前后,模型,控制器初始化前后等想做的一些事情提供了便利的行为<br><a href="https://blog.csdn.net/lovemyself196221/article/details/78183699" target="_blank" rel="noopener">标签位栗子</a><br><a href="https://www.kancloud.cn/manual/thinkphp5/118130" target="_blank" rel="noopener">行为(钩子)具体使用查看TP5官网</a><br><a href="http://doc.fastadmin.net/docs/addons.html#%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D-2" target="_blank" rel="noopener">fastadmin新增标签位</a></li>
</ul>
<h5 id="sprintf函数"><a href="#sprintf函数" class="headerlink" title="sprintf函数"></a>sprintf函数</h5><figure class="highlight perl"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$number = <span class="number">2</span>;</span><br><span class="line">$str = <span class="string">"Shanghai"</span>;</span><br><span class="line">$txt = <span class="keyword">sprintf</span>(<span class="string">"There are %u million cars in %s."</span>,$number,$str);</span><br><span class="line">echo $txt;</span><br><span class="line">?&gt;</span><br><span class="line">把百分号（%）符号替换成一个作为参数进行传递的变量,把格式化的字符串写入变量中</span><br><span class="line"></span><br><span class="line">常用的格式值：</span><br><span class="line">%% - 返回一个百分号 %</span><br><span class="line">%b - 二进制数</span><br><span class="line">%c - ASCII 值对应的字符</span><br><span class="line">%d - 包含正负号的十进制数（负数、<span class="number">0</span>、正数）</span><br><span class="line">%e - 使用小写的科学计数法（例如 <span class="number">1.2</span>e+<span class="number">2</span>）</span><br><span class="line">%E - 使用大写的科学计数法（例如 <span class="number">1.2</span>E+<span class="number">2</span>）</span><br><span class="line">%u - 不包含正负号的十进制数（大于等于 <span class="number">0</span>）</span><br><span class="line">%f - 浮点数（本地设置）</span><br><span class="line">%F - 浮点数（非本地设置）</span><br><span class="line">%g - 较短的 %e 和 %f</span><br><span class="line">%G - 较短的 %E 和 %f</span><br><span class="line">%o - 八进制数</span><br><span class="line">fa中使用 ----&gt; %s - 字符串</span><br><span class="line">%x - 十六进制数（小写字母）</span><br><span class="line">%X - 十六进制数（大写字母）</span><br></pre></td></tr></table></figure>
<h4 id="有趣的PHP赋值运算，位运算符"><a href="#有趣的PHP赋值运算，位运算符" class="headerlink" title="有趣的PHP赋值运算，位运算符"></a>有趣的PHP赋值运算，位运算符</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">            $a=<span class="number">3</span>;</span></span><br><span class="line"><span class="php">            $b=<span class="number">5</span>;</span></span><br><span class="line"><span class="php">            dump($a);<span class="comment">//3</span></span></span><br><span class="line"><span class="php">            dump($b);<span class="comment">//5</span></span></span><br><span class="line"><span class="php"><span class="comment">//          以上是赋值$a $b</span></span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($a = <span class="number">5</span> || $b = <span class="number">7</span>) &#123;</span></span><br><span class="line"><span class="php"><span class="comment">//            首先|| 优先级比= 高</span></span></span><br><span class="line"><span class="php"><span class="comment">//            所以以上条件相当与于  =&gt; if($a = (5 || $b = 7))</span></span></span><br><span class="line"><span class="php"><span class="comment">//            || 如A或者B至少有一个满足条件才能执行某一结果</span></span></span><br><span class="line"><span class="php">            dump($a);<span class="comment">//true  =&gt; 1</span></span></span><br><span class="line"><span class="php">            dump($b);<span class="comment">// 5</span></span></span><br><span class="line"><span class="php">            dump($a.$b); <span class="comment">//15</span></span></span><br></pre></td></tr></table></figure>
<h4 id="PHP版本出现错误"><a href="#PHP版本出现错误" class="headerlink" title="PHP版本出现错误"></a>PHP版本出现错误</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/fastadmin/3098875-b4bd5a143605e8f6.png" alt="弃用-方法名和类名一样的构造函数"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/fastadmin/3098875-4c52a07f6ec7e856.png" alt="文档说明"></p>
<h4 id="用-http-build-query-对-url-进行编码："><a href="#用-http-build-query-对-url-进行编码：" class="headerlink" title="用 http_build_query 对 url 进行编码："></a>用 http_build_query 对 url 进行编码：</h4><ul>
<li>http_build_query 可以将一维或多维 数组/对象 进行 url_encode 编码，并返回编码后的字符串。</li>
<li>无论传入的数据是数组还是 object，解码后都将转换为数组。<br><a href="https://www.jianshu.com/p/5e9239e44eb8" target="_blank" rel="noopener">具体了解，戳这里！</a></li>
</ul>
<h4 id="记微信支付回调方法扣除库存和更新状态失败"><a href="#记微信支付回调方法扣除库存和更新状态失败" class="headerlink" title="记微信支付回调方法扣除库存和更新状态失败"></a>记微信支付回调方法扣除库存和更新状态失败</h4><ul>
<li>没有证书所导致【未验证】<h4 id="关于使用param（）-获取-参数-会多出-一个-控制器-方法名-这样的一个参数出来？"><a href="#关于使用param（）-获取-参数-会多出-一个-控制器-方法名-这样的一个参数出来？" class="headerlink" title="关于使用param（） 获取 参数 会多出 一个 /控制器/方法名 这样的一个参数出来？"></a>关于使用<a href="https://www.kancloud.cn/manual/thinkphp5_1/353987" target="_blank" rel="noopener">param</a>（） 获取 参数 会多出 一个 /控制器/方法名 这样的一个参数出来？</h4></li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="string">'/admin/index/login_html'</span> =&gt; string <span class="string">''</span> (length=<span class="number">0</span>) 出现这个出来</span><br><span class="line"><span class="string">'username'</span> =&gt; string <span class="string">'1'</span> (length=<span class="number">1</span>)</span><br><span class="line"><span class="string">'password'</span> =&gt; string <span class="string">'1'</span> (length=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>解决：</p>
<blockquote>
<p>首先确定下使用TP5.1框架具体版本号：{$Think.VERSION} ；</p>
<p>目前使用版本号５.1.32 LTS</p>
</blockquote>
<blockquote>
<p>几经周转在<a href="https://www.kancloud.cn/manual/thinkphp5_1/353987" target="_blank" rel="noopener">文档</a>输入变量中看到如下内容</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/26/vWBKh9kdqfrTDiR.png" alt="image.png"></p>
<blockquote>
<p> 查看更新日志</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/26/DiIjmznpfb1GJku.png" alt="image.png"></p>
<blockquote>
<p>对比代码</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/26/6lXTnaHiA3vtxK4.png" alt="image.png"></p>
<blockquote>
<p><a href="https://gitee.com/liu21st/framework/blob/5.1/library/think/Request.php#" target="_blank" rel="noopener">更新代码地址</a>：Requset类更换</p>
<p>经尝试更新Request类还是无效！！！</p>
</blockquote>
<blockquote>
<p>最终解决方法如下：</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">修改伪静态：  RewriteRule ^(.*)$ index.php [L,E=PATH_INFO:$<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="TP项目redis设置定时任务写成bat文件加入window任务计划"><a href="#TP项目redis设置定时任务写成bat文件加入window任务计划" class="headerlink" title="TP项目redis设置定时任务写成bat文件加入window任务计划"></a>TP项目redis设置定时任务写成bat文件加入window任务计划</h4><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">bat</span><br><span class="line"><span class="comment">//前提条件已安装本地redis服务【window执行任务计划比较少，多为linux上执行xshell脚步】</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//bat文件示例：</span></span><br><span class="line"><span class="meta">@echo</span> off</span><br><span class="line">cd <span class="string">D:</span><span class="regexp">/phpstudy_pro/</span>WWW<span class="regexp">/efa/</span><span class="keyword">public</span><span class="regexp">/  /</span>/项目路径</span><br><span class="line">php index.php[入口文件] index<span class="regexp">/redis_go_up/</span>index[参数：模块<span class="regexp">/控制器/</span>方法]</span><br><span class="line">::pause<span class="comment">//是否暂停显示弹窗执行状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//之后在 任务计划程序 中创建一个基础任务计划</span></span><br><span class="line"><span class="comment">//创建完成选择你所写好的脚步bat文件夹确认即可</span></span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/19/tLPRHFWQuO1DGon.png" alt="image.png"></p>
]]></content>
      <categories>
        <category>ThinkPHP5</category>
      </categories>
  </entry>
  <entry>
    <title>Xampp汇总</title>
    <url>/posts/2da0cc6f.html</url>
    <content><![CDATA[<blockquote class="blockquote-center"></blockquote>
<div class="note success">
            <p>XAMPP 配置虚拟域名/localhost重定向</p>
          </div>

<h4 id="XAMPP-配置虚拟域名-localhost重定向"><a href="#XAMPP-配置虚拟域名-localhost重定向" class="headerlink" title="XAMPP 配置虚拟域名/localhost重定向"></a>XAMPP 配置虚拟域名/localhost重定向</h4><p><a href="https://juejin.im/post/5c85cc00f265da2dae5158aa#heading-6" target="_blank" rel="noopener">参考地址：XAMPP 配置虚拟域名/localhost重定向</a></p>
<h5 id="主要修改两个地方"><a href="#主要修改两个地方" class="headerlink" title="主要修改两个地方"></a>主要修改两个地方</h5><ul>
<li>hosts文件 填写的域名</li>
<li>httpd-vhosts.conf文件 配置虚拟域名和目录<h5 id="配置前提"><a href="#配置前提" class="headerlink" title="配置前提"></a>配置前提</h5></li>
<li>前往本地 xampp/xamppfiles/etc/httpd.conf 查看引入httpd-vhosts.conf 看看是否打开，如果被注释了去掉#  <figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"># Virtual hosts</span><br><span class="line"><span class="keyword">Include</span> <span class="keyword">conf</span>/extra/httpd-vhosts.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure>
<h5 id="配置如下："><a href="#配置如下：" class="headerlink" title="配置如下："></a>配置如下：</h5><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在多项目的情况下就无法查看其他的项目 解决方法如下</span></span><br><span class="line"><span class="params">&lt;VirtualHost *:<span class="number">80</span>&gt;</span></span><br><span class="line">    <span class="meta">#ServerAdmin webmaster@dummy-host2.example.com</span></span><br><span class="line">    DocumentRoot <span class="string">"D:/xmapp/htdocs/"</span></span><br><span class="line">    ServerName localhost</span><br><span class="line">    ErrorLog <span class="string">"logs/dummy-host2.example.com-error.log"</span></span><br><span class="line">    CustomLog <span class="string">"logs/dummy-host2.example.com-access.log"</span> common</span><br><span class="line"><span class="params">&lt;/VirtualHost&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// 配置虚拟域名和目录</span></span><br><span class="line"><span class="params">&lt;VirtualHost *:<span class="number">80</span>&gt;</span></span><br><span class="line">    <span class="meta">#ServerAdmin webmaster@dummy-host2.example.com</span></span><br><span class="line">    DocumentRoot <span class="string">"D:/xmapp/htdocs/Zerg/public"</span>  <span class="meta">#自定义项目地址  反斜杠</span></span><br><span class="line">    ServerName zerg.cn  <span class="meta"># 虚拟域名</span></span><br><span class="line">    ErrorLog <span class="string">"logs/dummy-host2.example.com-error.log"</span></span><br><span class="line">    CustomLog <span class="string">"logs/dummy-host2.example.com-access.log"</span> common</span><br><span class="line"><span class="params">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/PhXFV2Jt79A6vDj.png" alt="请求成功"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/mloKuWf6OQDZqIe.png" alt="其他项目IP为内网地址"></p>
<h4 id="xmapp：phpmyadmin连接，管理多个mysql服务器-本地和内网"><a href="#xmapp：phpmyadmin连接，管理多个mysql服务器-本地和内网" class="headerlink" title="xmapp：phpmyadmin连接，管理多个mysql服务器[本地和内网]"></a>xmapp：phpmyadmin连接，管理多个mysql服务器[本地和内网]</h4><blockquote>
<p><strong>方法一，修改phpMyAdmin/libraries/config.default.php</strong></p>
<p><strong>修改配置文件前，最好先备份一下，万一改错地方了</strong></p>
</blockquote>
<blockquote>
<p><strong>方法二，同时管理多个mysql服务器。</strong></p>
<p><strong>1，将phpMyAdmin根目录下的config.sample.inc.php，重命名为config.inc.php</strong>，将原本都注释掉</p>
<p><strong>2，修改config.inc.php文件</strong>，通过循环遍历连接</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$connect_hosts = array(</span><br><span class="line">    <span class="string">'1'</span> =&gt; array(</span><br><span class="line">        <span class="string">"host"</span>   =&gt; <span class="string">"localhost"</span>,  <span class="comment">//服务器1  </span></span><br><span class="line">        <span class="string">"user"</span>   =&gt; <span class="string">"root"</span>,</span><br><span class="line">        <span class="string">"password"</span> =&gt; <span class="string">"root"</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="string">'2'</span> =&gt; array(</span><br><span class="line">        <span class="string">"host"</span>   =&gt; <span class="string">"IP地址"</span>, <span class="comment">//服务器2  </span></span><br><span class="line">        <span class="string">"user"</span>   =&gt; <span class="string">"xxxx"</span>,</span><br><span class="line">        <span class="string">"password"</span> =&gt; <span class="string">"xxxx"</span></span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">1</span>; $i &lt;= count($connect_hosts); $i++) &#123;</span><br><span class="line">    <span class="comment">/* Authentication type */</span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'auth_type'</span>] = <span class="string">'cookie'</span>;</span><br><span class="line">    <span class="comment">/* Server parameters */</span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'host'</span>] = $connect_hosts[$i][<span class="string">'host'</span>];   <span class="comment">//修改host  </span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'connect_type'</span>] = <span class="string">'tcp'</span>;</span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'compress'</span>] = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">/* Select mysqli if your server has it */</span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'extension'</span>] = <span class="string">'mysql'</span>;</span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'AllowNoPassword'</span>] = <span class="literal">true</span>;<span class="comment">//是否允许空密码登录</span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'user'</span>] = $connect_hosts[$i][<span class="string">'user'</span>];  <span class="comment">//修改用户名  </span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'password'</span>] = $connect_hosts[$i][<span class="string">'password'</span>]; <span class="comment">//密码  </span></span><br><span class="line">    <span class="comment">/* rajk - for blobstreaming */</span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'bs_garbage_threshold'</span>] = <span class="number">50</span>;</span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'bs_repository_threshold'</span>] = <span class="string">'32M'</span>;</span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'bs_temp_blob_timeout'</span>] = <span class="number">600</span>;</span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'bs_temp_log_threshold'</span>] = <span class="string">'32M'</span>;</span><br><span class="line">    <span class="comment">/* User for advanced features */</span></span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'controluser'</span>] = $connect_hosts[$i][<span class="string">'user'</span>];</span><br><span class="line">    $cfg[<span class="string">'Servers'</span>][$i][<span class="string">'controlpass'</span>] = $connect_hosts[$i][<span class="string">'password'</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/7bY2RlWkZsEyK5C.png" alt="image.png"></p>
<h5 id="可能遇到问题："><a href="#可能遇到问题：" class="headerlink" title="可能遇到问题："></a>可能遇到问题：</h5><blockquote>
<p>xmapp默认mysql密码是空的，所以导致PHPmyadmin登录不了，不允许空密码登录。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$cfg[<span class="string">'Servers'</span>][$i][<span class="string">'AllowNoPassword'</span>] = <span class="literal">true</span>;是否允许空密码登录</span><br><span class="line">$cfg[‘blowfish_secret’] = ‘<span class="number">123456</span>’; <span class="comment">// 你要设置的密码</span></span><br></pre></td></tr></table></figure>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/xFqTsLaYjwtv19z.png" alt="image.png"></p>
<h4 id="xmapp和phpstudy同时启动mysql服务"><a href="#xmapp和phpstudy同时启动mysql服务" class="headerlink" title="xmapp和phpstudy同时启动mysql服务"></a>xmapp和phpstudy同时启动mysql服务</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/9IKVuw4mkDTqz61.png" alt="image.png"></p>
<blockquote>
<p>之前会遇到两个mysql不能同时启动，现在比较简单做法是先确定xmapp的mysql版本号</p>
<p>phpstudy相对于下载对应版本[端口号什么都不用改变，只需要安装对应版本就行]</p>
<p>我这phpstudy安装是5.5.29</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/Gp3qQZMdnwXx9k2.png" alt="image.png"></p>
]]></content>
      <categories>
        <category>Xampp</category>
      </categories>
  </entry>
  <entry>
    <title>前端常用代码块</title>
    <url>/posts/5066d279.html</url>
    <content><![CDATA[<blockquote class="blockquote-center"></blockquote>
<div class="note success">
            <p>前端常用代码块或JS</p>
          </div>

<h4 id="适配基础知识"><a href="#适配基础知识" class="headerlink" title="适配基础知识"></a>适配基础知识</h4><ul>
<li><p>1.什么是rem<br>  CSS3新增的一个相对单位rem（root em,根em）.rem是相对于根节点（或者是html节点）.<br>  如果根节点设置了font-size:10px;那么font-size:1.2rem;字体大小等于12px</p>
</li>
<li><p>2.什么是dpr<br>  dpr就是设备物理像素与逻辑像素(css像素)的比例.<br>  设备物理像素是固定的,比如macbook pro 13.3寸是显示屏分辨率是2560 x 1600,<br>  物理像素:2560就是当前设备的物理像素<br>  逻辑像素:浏览器全屏幕宽只有1280<br>  dpr所表示的就是：1280的浏览器被扩展成2560像素宽度,2个物理像素对应一个逻辑像素.</p>
<p>  再比如在开发中,一张设计好的宽度为100px,高度为50px的图片,再dpr值为2的设备中,宽度设置为100px的话,<br>  他实际会被扩展到200像素宽度,只有设为50的时候才会正常显示.</p>
</li>
<li><p>3.获取DPR<br>  浏览器控制台中输入:window.devicePixelRatio</p>
</li>
<li><p>4.说明<br>  针对不同手机屏幕尺寸和dpr动态的改变根节点html的font-size大小(基准值)。<br>  rem = document.documentElement.clientWidth * dpr / 10<br>  说明：<br>  乘以dpr，是因为页面有可能为了实现1px border页面会缩放(scale) 1/dpr 倍(如果没有，dpr=1),。<br>  除以10，是为了取整，方便计算(理论上可以是任何值)<br>  所以就像下面这样，html的font-size可能会：<br>  iphone3gs: 320px / 10 = 32px<br>  iphone4/5: 320px * 2 / 10 = 64px<br>  iphone6: 375px * 2 / 10 = 75px</p>
</li>
</ul>
<h4 id="淘宝方案解决以下问题"><a href="#淘宝方案解决以下问题" class="headerlink" title="淘宝方案解决以下问题"></a>淘宝方案解决以下问题</h4><ul>
<li>border: 1px问题</li>
<li>图片高清问题</li>
<li>屏幕适配布局问题</li>
</ul>
<h4 id="H5淘宝适配方案"><a href="#H5淘宝适配方案" class="headerlink" title="H5淘宝适配方案"></a>H5淘宝适配方案</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">N, M</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">L</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> a = I.getBoundingClientRect().width;</span><br><span class="line">		a / F &gt; <span class="number">540</span> &amp;&amp; (a = <span class="number">540</span> * F);</span><br><span class="line">		<span class="keyword">var</span> d = a / <span class="number">10</span>;</span><br><span class="line">		I.style.fontSize = d + <span class="string">"px"</span>, D.rem = N.rem = d</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> K, J = N.document,</span><br><span class="line">		I = J.documentElement,</span><br><span class="line">		H = J.querySelector(<span class="string">'meta[name="viewport"]'</span>),</span><br><span class="line">		G = J.querySelector(<span class="string">'meta[name="flexible"]'</span>),</span><br><span class="line">		F = <span class="number">0</span>,</span><br><span class="line">		E = <span class="number">0</span>,</span><br><span class="line">		D = M.flexible || (M.flexible = &#123;&#125;);</span><br><span class="line">	<span class="keyword">if</span> (H) &#123;</span><br><span class="line">		<span class="built_in">console</span>.warn(<span class="string">"将根据已有的meta标签来设置缩放比例"</span>);</span><br><span class="line">		<span class="keyword">var</span> C = H.getAttribute(<span class="string">"content"</span>).match(<span class="regexp">/initial\-scale=([\d\.]+)/</span>);</span><br><span class="line">		C &amp;&amp; (E = <span class="built_in">parseFloat</span>(C[<span class="number">1</span>]), F = <span class="built_in">parseInt</span>(<span class="number">1</span> / E))</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (G) &#123;</span><br><span class="line">			<span class="keyword">var</span> B = G.getAttribute(<span class="string">"content"</span>);</span><br><span class="line">			<span class="keyword">if</span> (B) &#123;</span><br><span class="line">				<span class="keyword">var</span> A = B.match(<span class="regexp">/initial\-dpr=([\d\.]+)/</span>),</span><br><span class="line">					z = B.match(<span class="regexp">/maximum\-dpr=([\d\.]+)/</span>);</span><br><span class="line">				A &amp;&amp; (F = <span class="built_in">parseFloat</span>(A[<span class="number">1</span>]), E = <span class="built_in">parseFloat</span>((<span class="number">1</span> / F).toFixed(<span class="number">2</span>))), z &amp;&amp; (F = <span class="built_in">parseFloat</span>(z[<span class="number">1</span>]), E = <span class="built_in">parseFloat</span>((<span class="number">1</span> / F).toFixed(<span class="number">2</span>)))</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (!F &amp;&amp; !E) &#123;</span><br><span class="line">		<span class="keyword">var</span> y = N.navigator.userAgent,</span><br><span class="line">			x = ( !! y.match(<span class="regexp">/android/gi</span>), !! y.match(<span class="regexp">/iphone/gi</span>)),</span><br><span class="line">			w = x &amp;&amp; !! y.match(<span class="regexp">/OS 9_3/</span>),</span><br><span class="line">			v = N.devicePixelRatio;</span><br><span class="line">		F = x &amp;&amp; !w ? v &gt;= <span class="number">3</span> &amp;&amp; (!F || F &gt;= <span class="number">3</span>) ? <span class="number">3</span> : v &gt;= <span class="number">2</span> &amp;&amp; (!F || F &gt;= <span class="number">2</span>) ? <span class="number">2</span> : <span class="number">1</span> : <span class="number">1</span>, E = <span class="number">1</span> / F</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (I.setAttribute(<span class="string">"data-dpr"</span>, F), !H) &#123;</span><br><span class="line">		<span class="keyword">if</span> (H = J.createElement(<span class="string">"meta"</span>), H.setAttribute(<span class="string">"name"</span>, <span class="string">"viewport"</span>), H.setAttribute(<span class="string">"content"</span>, <span class="string">"initial-scale="</span> + E + <span class="string">", maximum-scale="</span> + E + <span class="string">", minimum-scale="</span> + E + <span class="string">", user-scalable=no"</span>), I.firstElementChild) &#123;</span><br><span class="line">			I.firstElementChild.appendChild(H)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> u = J.createElement(<span class="string">"div"</span>);</span><br><span class="line">			u.appendChild(H), J.write(u.innerHTML)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	N.addEventListener(<span class="string">"resize"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		clearTimeout(K), K = setTimeout(L, <span class="number">300</span>)</span><br><span class="line">	&#125;, !<span class="number">1</span>), N.addEventListener(<span class="string">"pageshow"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">		b.persisted &amp;&amp; (clearTimeout(K), K = setTimeout(L, <span class="number">300</span>))</span><br><span class="line">	&#125;, !<span class="number">1</span>), <span class="string">"complete"</span> === J.readyState ? J.body.style.fontSize = <span class="number">12</span> * F + <span class="string">"px"</span> : J.addEventListener(<span class="string">"DOMContentLoaded"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		J.body.style.fontSize = <span class="number">12</span> * F + <span class="string">"px"</span></span><br><span class="line">	&#125;, !<span class="number">1</span>), L(), D.dpr = N.dpr = F, D.refreshRem = L, D.rem2px = <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> c = <span class="built_in">parseFloat</span>(d) * <span class="keyword">this</span>.rem;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"string"</span> == <span class="keyword">typeof</span> d &amp;&amp; d.match(<span class="regexp">/rem$/</span>) &amp;&amp; (c += <span class="string">"px"</span>), c</span><br><span class="line">	&#125;, D.px2rem = <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> c = <span class="built_in">parseFloat</span>(d) / <span class="keyword">this</span>.rem;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"string"</span> == <span class="keyword">typeof</span> d &amp;&amp; d.match(<span class="regexp">/px$/</span>) &amp;&amp; (c += <span class="string">"rem"</span>), c</span><br><span class="line">	&#125;</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">window</span>.lib || (<span class="built_in">window</span>.lib = &#123;&#125;));</span><br></pre></td></tr></table></figure>
<h4 id="重置CSS默认样式"><a href="#重置CSS默认样式" class="headerlink" title="重置CSS默认样式"></a>重置CSS默认样式</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">"utf-8"</span>;<span class="selector-tag">html</span>&#123;<span class="attribute">background-color</span>:<span class="number">#fff</span>;<span class="attribute">color</span>:<span class="number">#000</span>;<span class="attribute">font-size</span>:<span class="number">12px</span>&#125;</span><br><span class="line">body,ul,ol,dl,dd,h1,h2,h3,h4,h5,h6,figure,form,fieldset,legend,input,textarea,button,p,blockquote,th,td,pre,xmp&#123;margin:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;</span><br><span class="line">body,input,textarea,button,select,pre,xmp,tt,code,kbd,samp&#123;line-height:<span class="number">1.5</span>;<span class="attribute">font-family</span>:tahoma,arial,<span class="string">"Hiragino Sans GB"</span>,simsun,sans-serif&#125;</span><br><span class="line">h1,h2,h3,h4,h5,h6,small,big,input,textarea,button,select&#123;font-size:<span class="number">100%</span>&#125;</span><br><span class="line">h1,h2,h3,h4,h5,h6&#123;font-family:tahoma,arial,<span class="string">"Hiragino Sans GB"</span>,<span class="string">"微软雅黑"</span>,simsun,sans-serif&#125;</span><br><span class="line">h1,h2,h3,h4,h5,h6,b,strong&#123;font-weight:normal&#125;</span><br><span class="line">address,cite,dfn,em,i,optgroup,var&#123;font-style:normal&#125;</span><br><span class="line">table&#123;border-collapse:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>;<span class="attribute">text-align</span><span class="selector-pseudo">:left</span>&#125;</span><br><span class="line"><span class="selector-tag">caption</span>,<span class="selector-tag">th</span>&#123;<span class="attribute">text-align</span>:inherit&#125;</span><br><span class="line">ul,ol,menu&#123;list-style:none&#125;</span><br><span class="line">fieldset,img&#123;border:<span class="number">0</span>&#125;</span><br><span class="line">img,object,input,textarea,button,select&#123;vertical-align:middle&#125;</span><br><span class="line">article,aside,footer,header,section,nav,figure,figcaption,hgroup,details,menu&#123;display:block&#125;</span><br><span class="line">audio,canvas,video&#123;display:inline-block;*<span class="attribute">display</span>:inline;*zoom:<span class="number">1</span>&#125;</span><br><span class="line">blockquote:before,blockquote:after,q:before,q:after&#123;content:<span class="string">"\0020"</span>&#125;</span><br><span class="line">textarea&#123;overflow:auto;<span class="attribute">resize</span>:vertical&#125;</span><br><span class="line">input,textarea,button,select,a&#123;outline:<span class="number">0</span> none;<span class="attribute">border</span>: none;&#125;</span><br><span class="line"><span class="selector-tag">button</span>::-moz-focus-inner,input::-moz-focus-inner&#123;padding:<span class="number">0</span>;<span class="attribute">border</span>:<span class="number">0</span>&#125;</span><br><span class="line">mark&#123;background-color:transparent&#125;</span><br><span class="line">a,ins,s,u,del&#123;text-decoration:none&#125;</span><br><span class="line">sup,sub&#123;vertical-align:baseline&#125;</span><br><span class="line">html &#123;overflow-x: hidden;<span class="attribute">height</span>: <span class="number">100%</span>;<span class="attribute">font-size</span>: <span class="number">50px</span>;-webkit-tap-highlight-<span class="attribute">color</span>: transparent;&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">font-family</span>: Arial, <span class="string">"Microsoft Yahei"</span>, <span class="string">"Helvetica Neue"</span>, Helvetica, sans-serif;<span class="attribute">color</span>: <span class="number">#333</span>;<span class="attribute">font-size</span>: .<span class="number">28em</span>;<span class="attribute">line-height</span>: <span class="number">1</span>;-webkit-text-size-adjust: none;&#125;</span><br><span class="line"><span class="selector-tag">hr</span> &#123;<span class="attribute">height</span>: .<span class="number">02rem</span>;<span class="attribute">margin</span>: .<span class="number">1rem</span> <span class="number">0</span>;<span class="attribute">border</span>: medium none;<span class="attribute">border-top</span>: .<span class="number">02rem</span> solid <span class="number">#cacaca</span>;&#125;</span><br><span class="line"><span class="selector-tag">a</span> &#123;<span class="attribute">color</span>: <span class="number">#25a4bb</span>;<span class="attribute">text-decoration</span>: none;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="重置border默认样式"><a href="#重置border默认样式" class="headerlink" title="重置border默认样式"></a>重置border默认样式</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">"utf-8"</span>;</span><br><span class="line"><span class="selector-class">.border</span>,</span><br><span class="line"><span class="selector-class">.border-top</span>,</span><br><span class="line"><span class="selector-class">.border-right</span>,</span><br><span class="line"><span class="selector-class">.border-bottom</span>,</span><br><span class="line"><span class="selector-class">.border-left</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\0020"</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* border</span></span><br><span class="line"><span class="comment"> * 因，边框是由伪元素区域遮盖在父级</span></span><br><span class="line"><span class="comment"> * 故，子级若有交互，需要对子级设置</span></span><br><span class="line"><span class="comment"> * 定位 及 z轴</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.border</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">100%</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max--moz-device-pixel-ratio:</span> <span class="number">1.49</span>), (<span class="attribute">-webkit-max-device-pixel-ratio:</span> <span class="number">1.49</span>), (<span class="attribute">max-device-pixel-ratio:</span> <span class="number">1.49</span>), (<span class="attribute">max-resolution:</span> <span class="number">143dpi</span>), (<span class="attribute">max-resolution:</span> <span class="number">1.49dppx</span>) &#123;</span><br><span class="line">    <span class="comment">/* 默认值，无需重置 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min--moz-device-pixel-ratio:</span> <span class="number">1.5</span>) <span class="keyword">and</span> (<span class="attribute">max--moz-device-pixel-ratio:</span> <span class="number">2.49</span>), (<span class="attribute">-webkit-min-device-pixel-ratio:</span> <span class="number">1.5</span>) <span class="keyword">and</span> (<span class="attribute">-webkit-max-device-pixel-ratio:</span> <span class="number">2.49</span>), (<span class="attribute">min-device-pixel-ratio:</span> <span class="number">1.5</span>) <span class="keyword">and</span> (<span class="attribute">max-device-pixel-ratio:</span> <span class="number">2.49</span>), (<span class="attribute">min-resolution:</span> <span class="number">144dpi</span>) <span class="keyword">and</span> (<span class="attribute">max-resolution:</span> <span class="number">239dpi</span>), (<span class="attribute">min-resolution:</span> <span class="number">1.5dppx</span>) <span class="keyword">and</span> (<span class="attribute">max-resolution:</span> <span class="number">2.49dppx</span>) &#123;</span><br><span class="line">    <span class="selector-class">.border</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleX</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min--moz-device-pixel-ratio:</span> <span class="number">2.5</span>), (<span class="attribute">-webkit-min-device-pixel-ratio:</span> <span class="number">2.5</span>), (<span class="attribute">min-device-pixel-ratio:</span> <span class="number">2.5</span>), (<span class="attribute">min-resolution:</span> <span class="number">240dpi</span>), (<span class="attribute">min-resolution:</span> <span class="number">2.5dppx</span>) &#123;</span><br><span class="line">    <span class="selector-class">.border</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">300%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">300%</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(.<span class="number">33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleX</span>(.<span class="number">33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="常用JS"><a href="#常用JS" class="headerlink" title="常用JS"></a>常用JS</h4><h5 id="函数节流和函数防抖"><a href="#函数节流和函数防抖" class="headerlink" title="函数节流和函数防抖"></a>函数节流和函数防抖</h5><ul>
<li>做的事情（把js代码的执行次数控制在合理的范围。既能节省浏览器CPU资源，又能让页面浏览更加顺畅，不会因为js的执行而发生卡顿。）<h5 id="函数节流"><a href="#函数节流" class="headerlink" title="函数节流"></a>函数节流</h5></li>
<li>指一定时间内js方法只跑一次。比如人的眨眼睛，就是一定时间内眨一次。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> canRun = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"throttle"</span>).onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!canRun)&#123;</span><br><span class="line">        <span class="comment">// 判断是否已空闲，如果在执行中，则直接return</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    canRun = <span class="literal">false</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"函数节流"</span>);</span><br><span class="line">        canRun = <span class="literal">true</span>;</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 解析要点</span></span><br><span class="line">函数节流的要点是，声明一个变量当标志位，记录当前代码是否在执行。</span><br><span class="line"> 如果空闲，则可以正常触发方法执行。</span><br><span class="line"> 如果代码正在执行，则取消这次方法执行，直接<span class="keyword">return</span>。</span><br><span class="line"></span><br><span class="line"> 这个方法的作用是监听ID为throttle元素的滚动事件。</span><br><span class="line"> 当canRun为<span class="literal">true</span>，则代表现在的滚动处理事件是空闲的，可以使用。</span><br><span class="line"> 通过关卡<span class="keyword">if</span>(!canRun)，等于就拿到了通行证。然后下一步的操作就是立马将关卡关上canRun=<span class="literal">false</span>。这样，其他请求执行滚动事件的方法，就被挡回去了。</span><br><span class="line"> 接着用setTimeout规定最小的时间间隔<span class="number">300</span>，接着再执行setTimeout方法体里面的内容。</span><br><span class="line"> 最后，等setTimeout里面的方法都执行完毕，才释放关卡canRun=<span class="literal">true</span>，允许下一个访问者进来。</span><br></pre></td></tr></table></figure>


<h5 id="函数抖动"><a href="#函数抖动" class="headerlink" title="函数抖动"></a>函数抖动</h5><ul>
<li><p>指频繁触发的情况下，只有足够的空闲时间，才执行代码一次。比如生活中的坐公交，就是一定时间内，如果有人陆续刷卡上车，司机就不会开车。只有别人没刷卡了，司机才开车。</p>
</li>
<li><p>最常见的就是用户注册时候的手机号码验证和邮箱验证了。只有等用户输入完毕后，前端才需要检查格式是否正确，如果不正确，再弹出提示语</p>
<h5 id="函数防抖"><a href="#函数防抖" class="headerlink" title="函数防抖"></a>函数防抖</h5></li>
<li><p>函数防抖的实现重点，就是巧用setTimeout做缓存池，而且可以轻易地清除待执行的代码。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> timer = <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"debounce"</span>).onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">clearTimeout(timer); <span class="comment">// 清除未执行的代码，重置回初始化状态</span></span><br><span class="line"></span><br><span class="line">timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"函数防抖"</span>);</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line">&#125;;  </span><br><span class="line"><span class="comment">// 去抖</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeout;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"清除"</span>,timeout,e.target.value)</span><br><span class="line">        clearTimeout(timeout);</span><br><span class="line">        <span class="keyword">var</span> context = <span class="keyword">this</span>, args = <span class="built_in">arguments</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"新的"</span>,timeout, e.target.value)</span><br><span class="line">        timeout = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"----"</span>)</span><br><span class="line">            func.apply(context, args);</span><br><span class="line">        &#125;,delay)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> validate = debounce(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"change"</span>, e.target.value, <span class="keyword">new</span> <span class="built_in">Date</span><span class="number">-0</span>)</span><br><span class="line">&#125;, <span class="number">380</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="绑定监听"><a href="#绑定监听" class="headerlink" title="绑定监听"></a>绑定监听</h4><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">document.query<span class="constructor">Selector(<span class="string">"input"</span>)</span>.add<span class="constructor">EventListener('<span class="params">input</span>', <span class="params">validate</span>)</span>;</span><br></pre></td></tr></table></figure>
<h4 id="IE与标准浏览器之间的样式-hack"><a href="#IE与标准浏览器之间的样式-hack" class="headerlink" title="IE与标准浏览器之间的样式 hack"></a>IE与标准浏览器之间的样式 hack</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bb</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>:red;<span class="comment">/*所有识别*/</span></span><br><span class="line">    <span class="attribute">background-color</span>:<span class="number">#00deff</span>\<span class="number">9</span>; <span class="comment">/*IE6、7、8识别*/</span></span><br><span class="line">    +<span class="attribute">background-color</span>:<span class="number">#a200ff</span>;<span class="comment">/*IE6、7识别*/</span></span><br><span class="line">    _background-<span class="attribute">color</span>:<span class="number">#1e0bd1</span>;<span class="comment">/*IE6识别*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"020"</span>; </span><br><span class="line">    <span class="attribute">display</span>: block; </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>; </span><br><span class="line">    <span class="attribute">clear</span>: both; </span><br><span class="line">    <span class="attribute">visibility</span>: hidden;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clear</span>&#123;</span><br><span class="line">    *zoom:<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解析原理：</p>
<ul>
<li>display:block 使生成的元素以块级元素显示,占满剩余空间;</li>
<li>height:0 避免生成内容破坏原有布局的高度。</li>
<li>visibility:hidden 使生成的内容不可见，并允许可能被生成内容盖住的内容可以进行点击和交互;</li>
<li>通过 content:”.”生成内容作为最后一个元素，至于content里面是点还是其他都是可以的， 例如oocss里面就有经典的 content:”.”,有些版本可能content 里面内容为空,不推荐这样做, firefox直到7.0 content:”” 仍然会产生额外的空隙</li>
<li>zoom：1 触发IE hasLayout。</li>
</ul>
<h4 id="修改chrome记住密码后自动填充表单的黄色背景"><a href="#修改chrome记住密码后自动填充表单的黄色背景" class="headerlink" title="修改chrome记住密码后自动填充表单的黄色背景"></a>修改chrome记住密码后自动填充表单的黄色背景</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-webkit-autofill</span>, <span class="selector-tag">textarea</span><span class="selector-pseudo">:-webkit-autofill</span>, <span class="selector-tag">select</span><span class="selector-pseudo">:-webkit-autofill</span> &#123;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">250</span>, <span class="number">255</span>, <span class="number">189</span>); <span class="comment">/* #FAFFBD; */</span></span><br><span class="line"><span class="attribute">background-image</span>: none;</span><br><span class="line"><span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为『12-000-000-11"><a href="#将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为『12-000-000-11" class="headerlink" title="将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为『12,000,000.11"></a>将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为『12,000,000.11</h4><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commafy</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num &amp;&amp; num</span><br><span class="line">    .toString()</span><br><span class="line">    .replace(<span class="regexp">/(\d)(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">1</span>, $<span class="number">2</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $<span class="number">2</span> + <span class="string">','</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实现数组的随机排序"><a href="#实现数组的随机排序" class="headerlink" title="实现数组的随机排序"></a>实现数组的随机排序</h4><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line">arr.sort(function()&#123;</span><br><span class="line">    <span class="keyword">return</span> Math.random() - <span class="number">0.5</span>;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(arr);</span><br></pre></td></tr></table></figure>
<h4 id="字符串截断"><a href="#字符串截断" class="headerlink" title="字符串截断"></a>字符串截断</h4><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* target: 需要截断字符串</span></span><br><span class="line"><span class="comment">* length: 希望字符串被阶段后的长度</span></span><br><span class="line"><span class="comment">* truncation: 可选，代替所截断多余字符的字符</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">function truncate(target,<span class="built_in">length</span>,truncation)&#123;</span><br><span class="line">    <span class="built_in">length</span>=<span class="built_in">length</span> || <span class="number">30</span>;</span><br><span class="line">    truncation=truncation===<span class="type">void</span>(<span class="number">0</span>)?'...':truncation;</span><br><span class="line">    <span class="keyword">return</span> t.<span class="built_in">length</span>&gt;<span class="built_in">length</span> ? t.slice(<span class="number">0</span>,<span class="built_in">length</span>-truncation.<span class="built_in">length</span>)+truncation : String(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="字符串-trim–用于去除字符串两端的空白字符（直到遇到第一个非空白字符串为止它会清除包括换行符、空格、制表符等常见的空白字符。）"><a href="#字符串-trim–用于去除字符串两端的空白字符（直到遇到第一个非空白字符串为止它会清除包括换行符、空格、制表符等常见的空白字符。）" class="headerlink" title="字符串 trim–用于去除字符串两端的空白字符（直到遇到第一个非空白字符串为止它会清除包括换行符、空格、制表符等常见的空白字符。）"></a>字符串 trim–用于去除字符串两端的空白字符（直到遇到第一个非空白字符串为止它会清除包括换行符、空格、制表符等常见的空白字符。）</h4><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">简单好记版本</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trim</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/^\s\s*/</span>, <span class="string">''</span>).replace(<span class="regexp">/\s\s*$/</span>, <span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 速度超快版本(其实还有比这个更快的)</span></span><br><span class="line"><span class="comment">// 前面的空格用正则，后面的用字符串原生方法</span></span><br><span class="line">function <span class="built_in">trim</span>(<span class="built_in">str</span>) &#123;</span><br><span class="line">    <span class="built_in">str</span>=<span class="built_in">str</span>.replace(/^\s+/, <span class="string">''</span>);</span><br><span class="line">    var len=<span class="built_in">str</span>.length<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(var i=len; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">if</span>(/\S/.test(<span class="built_in">str</span>.charAt(i))) &#123;</span><br><span class="line">        <span class="built_in">str</span>=<span class="built_in">str</span>.substring(<span class="number">0</span>, i+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="表单验证改进系列"><a href="#表单验证改进系列" class="headerlink" title="表单验证改进系列"></a>表单验证改进系列</h4><p>三种表单验证模式–传统模式、策略设计模式、ES6的Proxy代理模式</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">let html=`&lt;<span class="keyword">form</span> action=<span class="string">"a.php"</span> id=<span class="string">"registerForm"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">label</span> <span class="keyword">for</span>=<span class="string">"user"</span>&gt;请输入用户名:&lt;/<span class="keyword">label</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"text"</span> <span class="keyword">class</span>=<span class="string">"form-control"</span> id=<span class="string">"user"</span> name=<span class="string">"userName"</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">label</span> <span class="keyword">for</span>=<span class="string">"pwd"</span>&gt;请输入密码:&lt;/<span class="keyword">label</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"password"</span> <span class="keyword">class</span>=<span class="string">"form-control"</span> id=<span class="string">"pwd"</span> name=<span class="string">"passWord"</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">label</span> <span class="keyword">for</span>=<span class="string">"phone"</span>&gt;请输入手机号码:&lt;/<span class="keyword">label</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"tel"</span> <span class="keyword">class</span>=<span class="string">"form-control"</span> id=<span class="string">"phone"</span> name=<span class="string">"phoneNumber"</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">label</span> <span class="keyword">for</span>=<span class="string">"email"</span>&gt;请输入邮箱:&lt;/<span class="keyword">label</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"text"</span> <span class="keyword">class</span>=<span class="string">"form-control"</span> id=<span class="string">"email"</span> name=<span class="string">"emailAddress"</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"submit"</span> value='提交'&gt;</span><br><span class="line">&lt;/<span class="keyword">form</span>&gt;`</span><br></pre></td></tr></table></figure>
<h5 id="表单传统方式"><a href="#表单传统方式" class="headerlink" title="表单传统方式"></a>表单传统方式</h5><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">let registerForm = document.querySelector(<span class="string">'#registerForm'</span>)</span><br><span class="line">registerForm.addEventListener(<span class="string">'submit'</span>, <span class="keyword">function</span>() &#123;</span><br><span class="line"><span class="keyword">if</span> (registerForm.userName.<span class="keyword">value</span> === <span class="string">''</span>) &#123;</span><br><span class="line">    alert(<span class="string">'用户名不能为空！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (registerForm.userName.length &lt; <span class="number">6</span>) &#123;</span><br><span class="line">    alert(<span class="string">'用户名长度不能少于6位！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (registerForm.<span class="keyword">passWord</span>.<span class="keyword">value</span> === <span class="string">''</span>) &#123;</span><br><span class="line">    alert(<span class="string">'密码不能为空！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (registerForm.<span class="keyword">passWord</span>.<span class="keyword">value</span>.length &lt; <span class="number">6</span>) &#123;</span><br><span class="line">    alert(<span class="string">'密码长度不能少于6位！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (registerForm.phoneNumber.<span class="keyword">value</span> === <span class="string">''</span>) &#123;</span><br><span class="line">    alert(<span class="string">'手机号码不能为空！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!/^<span class="number">1</span>(<span class="number">3</span>|<span class="number">5</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>)[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">9</span>&#125;$/.test(registerForm.phoneNumber.<span class="keyword">value</span>)) &#123;</span><br><span class="line">    alert(<span class="string">'手机号码格式不正确！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (registerForm.emailAddress.<span class="keyword">value</span> === <span class="string">''</span>) &#123;</span><br><span class="line">    alert(<span class="string">'邮箱地址不能为空！'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*</span><br><span class="line">    $/.test(registerForm.emailAddress.<span class="keyword">value</span>)) &#123;</span><br><span class="line">        alert(<span class="string">'邮箱地址格式不正确！'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="keyword">false</span>)</span><br></pre></td></tr></table></figure>
<p>// 优缺点：代码易于理解，但复用性不好，较多的if…else 业务判断</p>
<h5 id="策略设计模式"><a href="#策略设计模式" class="headerlink" title="策略设计模式"></a>策略设计模式</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">let</span> registerForm = <span class="built_in">document</span>.querySelector(<span class="string">'#registerForm'</span>)</span><br><span class="line"><span class="keyword">const</span> strategies = &#123;</span><br><span class="line">    isNonEmpty(value, errorMsg)&#123;</span><br><span class="line">        <span class="keyword">return</span> value === <span class="string">''</span> ? errorMsg : <span class="keyword">void</span> <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    minLength(value, length, errorMsg) &#123;</span><br><span class="line">        <span class="keyword">return</span> value.length &lt; length ? errorMsg : <span class="keyword">void</span> <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    isMoblie(value, errorMsg) &#123;</span><br><span class="line">        <span class="keyword">return</span> !<span class="regexp">/^1(3|5|7|8|9)[0-9]&#123;9&#125;$/</span>.test(value) ? errorMsg : <span class="keyword">void</span> <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    isEmail(value, errorMsg) &#123;</span><br><span class="line">        <span class="keyword">return</span> !<span class="regexp">/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/</span>.test(value) ? errorMsg : <span class="keyword">void</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Validator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.cache = [] <span class="comment">//保存校验规则</span></span><br><span class="line">    &#125;</span><br><span class="line">    add(dom, rules) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> rule <span class="keyword">of</span> rules) &#123;</span><br><span class="line">            <span class="keyword">let</span> strategyAry = rule.strategy.split(<span class="string">':'</span>) <span class="comment">//例如['minLength',6]</span></span><br><span class="line">            <span class="keyword">let</span> errorMsg = rule.errorMsg <span class="comment">//'用户名不能为空'</span></span><br><span class="line">            <span class="keyword">this</span>.cache.push(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> strategy = strategyAry.shift() <span class="comment">//用户挑选的strategy</span></span><br><span class="line">                strategyAry.unshift(dom.value) <span class="comment">//把input的value添加进参数列表</span></span><br><span class="line">                strategyAry.push(errorMsg) <span class="comment">//把errorMsg添加进参数列表，[dom.value,6,errorMsg]</span></span><br><span class="line">                <span class="keyword">return</span> strategies[strategy].apply(dom, strategyAry)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    start() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> validatorFunc <span class="keyword">of</span> <span class="keyword">this</span>.cache) &#123;</span><br><span class="line">            <span class="keyword">let</span> errorMsg = validatorFunc()<span class="comment">//开始校验，并取得校验后的返回信息</span></span><br><span class="line">            <span class="keyword">if</span> (errorMsg) &#123;<span class="comment">//r如果有确切返回值，说明校验没有通过</span></span><br><span class="line">                <span class="keyword">return</span> errorMsg</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> validatorFunc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> validator = <span class="keyword">new</span> Validator()</span><br><span class="line"></span><br><span class="line">validator.add(registerForm.userName, [&#123;</span><br><span class="line">    strategy: <span class="string">'isNonEmpty'</span>,</span><br><span class="line">    errorMsg: <span class="string">'用户名不能为空！'</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">    strategy: <span class="string">'minLength:6'</span>,</span><br><span class="line">    errorMsg: <span class="string">'用户名长度不能小于6位！'</span></span><br><span class="line">&#125;])</span><br><span class="line"></span><br><span class="line">validator.add(registerForm.passWord, [&#123;</span><br><span class="line">    strategy: <span class="string">'isNonEmpty'</span>,</span><br><span class="line">    errorMsg: <span class="string">'密码不能为空！'</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">    strategy: <span class="string">'minLength:6'</span>,</span><br><span class="line">    errorMsg: <span class="string">'密码长度不能小于6位！'</span></span><br><span class="line">&#125;])</span><br><span class="line"></span><br><span class="line">validator.add(registerForm.phoneNumber, [&#123;</span><br><span class="line">    strategy: <span class="string">'isNonEmpty'</span>,</span><br><span class="line">    errorMsg: <span class="string">'手机号码不能为空！'</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">    strategy: <span class="string">'isMoblie'</span>,</span><br><span class="line">    errorMsg: <span class="string">'手机号码格式不正确！'</span></span><br><span class="line">&#125;])</span><br><span class="line"></span><br><span class="line">validator.add(registerForm.emailAddress, [&#123;</span><br><span class="line">    strategy: <span class="string">'isNonEmpty'</span>,</span><br><span class="line">    errorMsg: <span class="string">'邮箱地址不能为空！'</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">    strategy: <span class="string">'isEmail'</span>,</span><br><span class="line">    errorMsg: <span class="string">'邮箱地址格式不正确！'</span></span><br><span class="line">&#125;])</span><br><span class="line"><span class="keyword">let</span> errorMsg = validator.start()</span><br><span class="line">    <span class="keyword">return</span> errorMsg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">registerForm.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> errorMsg = validatorFunc()</span><br><span class="line"><span class="keyword">if</span> (errorMsg) &#123;</span><br><span class="line">    <span class="comment">// 注意，这里写 `return false;` 或者 `retirn;` 都是没什么卵用的，</span></span><br><span class="line">    <span class="comment">// 阻止表单默认提交动作，必须使用 preventDefault</span></span><br><span class="line">        e.preventDefault()</span><br><span class="line">        alert(errorMsg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>// 优缺点：利用组合、委托和多态等技术思想，易于扩展、复用性好，缺点就是代码量比第一种稍多</p>
<h5 id="Proxy代理模式"><a href="#Proxy代理模式" class="headerlink" title="Proxy代理模式"></a>Proxy代理模式</h5><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">window</span>.onload = ()=&gt;&#123;</span><br><span class="line"><span class="keyword">let</span> validator = (target, validator, errorMsg)=&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> new Proxy(target, &#123;</span><br><span class="line">    _validator: validator,</span><br><span class="line">    set(target,<span class="built_in"> key</span>, <span class="keyword">value</span>, proxy) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">value</span> === <span class="string">''</span>) &#123;</span><br><span class="line">        alert(`$&#123;errorMsg<span class="built_in">[key</span>]&#125;不能为空！`)</span><br><span class="line">        <span class="keyword">return</span> target<span class="built_in">[key</span>] =<span class="built_in"> false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> va = this._validator<span class="built_in">[key</span>]</span><br><span class="line">    <span class="keyword">if</span>(!!va(<span class="keyword">value</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> Reflect.set(target,<span class="built_in"> key</span>, <span class="keyword">value</span>, proxy)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(`$&#123;errorMsg<span class="built_in">[key</span>]&#125;格式不正确`)</span><br><span class="line">        <span class="keyword">return</span> target<span class="built_in">[key</span>] =<span class="built_in"> false</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const validators = &#123;</span><br><span class="line">name(<span class="keyword">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span>.length &gt; <span class="number">6</span></span><br><span class="line">&#125;,</span><br><span class="line">password(<span class="keyword">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span>.length &gt; <span class="number">6</span></span><br><span class="line">&#125;,</span><br><span class="line">mobile(<span class="keyword">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> /^<span class="number">1</span>(<span class="number">3</span>|<span class="number">5</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>)[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">9</span>&#125;$/.test(<span class="keyword">value</span>)</span><br><span class="line">&#125;,</span><br><span class="line">email(<span class="keyword">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> /^[a-z<span class="number">0</span>-<span class="number">9</span>]+([.<span class="number">_</span>\\-]*[a-z<span class="number">0</span>-<span class="number">9</span>])*@([a-z<span class="number">0</span>-<span class="number">9</span>]+[-a-z<span class="number">0</span>-<span class="number">9</span>]*[a-z<span class="number">0</span>-<span class="number">9</span>]+.)&#123;<span class="number">1</span>,<span class="number">63</span>&#125;[a-z<span class="number">0</span>-<span class="number">9</span>]+$/.test(<span class="keyword">value</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const errorMsg = &#123;<span class="built_in"> name</span>: <span class="string">'用户名'</span>, password: <span class="string">'密码'</span>, mobile: <span class="string">'手机号码'</span>, email: <span class="string">'邮箱地址'</span> &#125;</span><br><span class="line">const vali = validator(&#123;&#125;, validators, errorMsg)</span><br><span class="line"><span class="keyword">let</span> registerForm =<span class="built_in"> document</span>.querySelector(<span class="string">'#registerForm'</span>)</span><br><span class="line">    registerForm.addEventListener(<span class="string">'submit'</span>, (e)=&gt;&#123;</span><br><span class="line">        <span class="keyword">let</span> validatorNext = <span class="keyword">function</span>* ()&#123;</span><br><span class="line">            yield vali<span class="built_in">.name</span> = registerForm.userName.<span class="keyword">value</span></span><br><span class="line">            yield vali.password = registerForm.passWord.<span class="keyword">value</span></span><br><span class="line">            yield vali.mobile = registerForm.phoneNumber.<span class="keyword">value</span></span><br><span class="line">            yield vali.email = registerForm.emailAddress.<span class="keyword">value</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> validator = validatorNext()</span><br><span class="line">        validator.<span class="keyword">next</span>()</span><br><span class="line">        <span class="keyword">let</span> s = vali<span class="built_in">.name</span> &amp;&amp; validator.<span class="keyword">next</span>() //上一步的校验通过才执行下一步</span><br><span class="line">        s = s ? vali.password &amp;&amp; validator.<span class="keyword">next</span>() : s</span><br><span class="line">        s = s ? vali.mobile &amp;&amp; validator.<span class="keyword">next</span>() : s</span><br><span class="line">        s = s ? vali.email &amp;&amp; validator.<span class="keyword">next</span>() : s</span><br><span class="line">        !s &amp;&amp; e.preventDefault()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>// 优缺点：条件和对象本身完全隔离开,后续代码的维护,代码整洁度,以及代码健壮性和复用性变得非常强，缺点是兼容性不好，但可以通过使用Babel来进行代码转换</p>
<h4 id="获取滚动条距离顶部的距离"><a href="#获取滚动条距离顶部的距离" class="headerlink" title="获取滚动条距离顶部的距离"></a>获取滚动条距离顶部的距离</h4><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">const getScrollTop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取当前可视范围的高度"><a href="#获取当前可视范围的高度" class="headerlink" title="获取当前可视范围的高度"></a>获取当前可视范围的高度</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getClientHeight = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> clientHeight = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.body.clientHeight &amp;&amp; <span class="built_in">document</span>.documentElement.clientHeight) &#123;</span><br><span class="line">    clientHeight = <span class="built_in">Math</span>.min(<span class="built_in">document</span>.body.clientHeight, <span class="built_in">document</span>.documentElement.clientHeight)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    clientHeight = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.clientHeight, <span class="built_in">document</span>.documentElement.clientHeight)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> clientHeight</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取文档完整的高度，包括超出屏幕可以滚动显示的部分"><a href="#获取文档完整的高度，包括超出屏幕可以滚动显示的部分" class="headerlink" title="获取文档完整的高度，包括超出屏幕可以滚动显示的部分"></a>获取文档完整的高度，包括超出屏幕可以滚动显示的部分</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollHeight = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollHeight, <span class="built_in">document</span>.documentElement.scrollHeight)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="移动端浮层滚动的同时阻止背后-document的整个滚动-重点使用频率高，很高"><a href="#移动端浮层滚动的同时阻止背后-document的整个滚动-重点使用频率高，很高" class="headerlink" title="移动端浮层滚动的同时阻止背后 document的整个滚动(重点使用频率高，很高)"></a>移动端浮层滚动的同时阻止背后 document的整个滚动(重点使用频率高，很高)</h4><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* CSS */</span></span><br><span class="line">.noscroll, .noscroll body &#123;</span><br><span class="line">    overflow:hidden;</span><br><span class="line">&#125;</span><br><span class="line">.noscroll body &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关键 JS代码, 非原生JS，基于 zepto 或者 jQuery实现</span></span><br><span class="line">$.smartScroll = function(container, selectorScrollable) &#123;</span><br><span class="line"><span class="comment">// 如果没有滚动容器选择器，或者已经绑定了滚动事件，忽略</span></span><br><span class="line"><span class="keyword">if</span> (!selectorScrollable || container.<span class="keyword">data</span>(<span class="string">'isBindScroll'</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否是浏览器</span></span><br><span class="line"><span class="comment">// 自己在这里添加判断和筛选</span></span><br><span class="line"><span class="keyword">var</span> isSBBrowser;</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">data</span> = &#123;</span><br><span class="line">    posY: <span class="number">0</span>,</span><br><span class="line">    maxscroll: <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 事件处理</span></span><br><span class="line">container.on(&#123;</span><br><span class="line">    touchstart: function (event) &#123;</span><br><span class="line">        <span class="keyword">var</span> events = event.touches[<span class="number">0</span>] || event;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 先求得是不是滚动元素或者滚动元素的子元素</span></span><br><span class="line">        <span class="keyword">var</span> elTarget = $(event.target);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!elTarget.length) &#123;</span><br><span class="line">            <span class="keyword">return</span>;    </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> elScroll;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取标记的滚动元素，自身或子元素皆可</span></span><br><span class="line">        <span class="keyword">if</span> (elTarget.<span class="keyword">is</span>(selectorScrollable)) &#123;</span><br><span class="line">            elScroll = elTarget;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((elScroll = elTarget.parents(selectorScrollable)).length == <span class="number">0</span>) &#123;</span><br><span class="line">            elScroll = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!elScroll) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 当前滚动元素标记</span></span><br><span class="line">        <span class="keyword">data</span>.elScroll = elScroll;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 垂直位置标记</span></span><br><span class="line">        <span class="keyword">data</span>.posY = events.pageY;</span><br><span class="line">        <span class="keyword">data</span>.scrollY = elScroll.scrollTop();</span><br><span class="line">        <span class="comment">// 是否可以滚动</span></span><br><span class="line">        <span class="keyword">data</span>.maxscroll = elScroll[<span class="number">0</span>].scrollHeight - elScroll[<span class="number">0</span>].clientHeight;</span><br><span class="line">    &#125;,</span><br><span class="line">    touchmove: function () &#123;</span><br><span class="line">        <span class="comment">// 如果不足于滚动，则禁止触发整个窗体元素的滚动</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">data</span>.maxscroll &lt;= <span class="number">0</span> || isSBBrowser) &#123;</span><br><span class="line">            <span class="comment">// 禁止滚动</span></span><br><span class="line">            event.preventDefault();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 滚动元素</span></span><br><span class="line">        <span class="keyword">var</span> elScroll = <span class="keyword">data</span>.elScroll;</span><br><span class="line">        <span class="comment">// 当前的滚动高度</span></span><br><span class="line">        <span class="keyword">var</span> scrollTop = elScroll.scrollTop();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 现在移动的垂直位置，用来判断是往上移动还是往下</span></span><br><span class="line">        <span class="keyword">var</span> events = event.touches[<span class="number">0</span>] || event;</span><br><span class="line">        <span class="comment">// 移动距离</span></span><br><span class="line">        <span class="keyword">var</span> distanceY = events.pageY - <span class="keyword">data</span>.posY;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isSBBrowser) &#123;</span><br><span class="line">            elScroll.scrollTop(<span class="keyword">data</span>.scrollY - distanceY);</span><br><span class="line">            elScroll.trigger(<span class="string">'scroll'</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 上下边缘检测</span></span><br><span class="line">        <span class="keyword">if</span> (distanceY &gt; <span class="number">0</span> &amp;&amp; scrollTop == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 往上滑，并且到头</span></span><br><span class="line">            <span class="comment">// 禁止滚动的默认行为</span></span><br><span class="line">            event.preventDefault();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 下边缘检测</span></span><br><span class="line">        <span class="keyword">if</span> (distanceY &lt; <span class="number">0</span> &amp;&amp; (scrollTop + <span class="number">1</span> &gt;= <span class="keyword">data</span>.maxscroll)) &#123;</span><br><span class="line">            <span class="comment">// 往下滑，并且到头</span></span><br><span class="line">            <span class="comment">// 禁止滚动的默认行为</span></span><br><span class="line">            event.preventDefault();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    touchend: function () &#123;</span><br><span class="line">        <span class="keyword">data</span>.maxscroll = <span class="number">0</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 防止多次重复绑定</span></span><br><span class="line">container.<span class="keyword">data</span>(<span class="string">'isBindScroll'</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="自定义滚动条相关的七个伪元素"><a href="#自定义滚动条相关的七个伪元素" class="headerlink" title="自定义滚动条相关的七个伪元素"></a>自定义滚动条相关的七个伪元素</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-scrollbar</span>：整个滚动条</span><br><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-scrollbar-button</span>：滚动条上的按钮（下下箭头）</span><br><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-scrollbar-thumb</span>：滚动条上的滚动滑块</span><br><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-scrollbar-track</span>：滚动条轨道</span><br><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-scrollbar-track-piece</span>：滚动条没有滑块的轨道部分</span><br><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-scrollbar-corner</span>：当同时有垂直和水平滚动条时交汇的部分</span><br><span class="line"><span class="symbol">:</span><span class="symbol">:-webkit-resizer</span>：某些元素的交汇部分的部分样式（类似 textarea的可拖动按钮）</span><br></pre></td></tr></table></figure>
<h4 id="16进制颜色代码生成"><a href="#16进制颜色代码生成" class="headerlink" title="16进制颜色代码生成"></a>16进制颜色代码生成</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'#'</span> + (<span class="string">'00000'</span> + (<span class="built_in">Math</span>.random() * <span class="number">0x1000000</span> &lt;&lt; <span class="number">0</span>).toString(<span class="number">16</span>)).slice(<span class="number">-6</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="驼峰命名转下划线"><a href="#驼峰命名转下划线" class="headerlink" title="驼峰命名转下划线"></a>驼峰命名转下划线</h4><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">camel2Underline</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name.match(<span class="regexp">/[a-z][0-9]+|[A-Z][a-z0-9]*/g</span>).join(<span class="string">'_'</span>).toLowerCase()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="日期格式化"><a href="#日期格式化" class="headerlink" title="日期格式化"></a>日期格式化</h4><ul>
<li>版本1<figure class="highlight sas"><table><tr><td class="code"><pre><span class="line">function format1(<span class="meta">x</span>, y) &#123;</span><br><span class="line">    var z = &#123;</span><br><span class="line">    y: <span class="meta">x</span>.getFul<span class="meta">lYear(</span>),</span><br><span class="line">    M: <span class="meta">x</span>.ge<span class="meta">tMonth(</span>) + 1,</span><br><span class="line">    d: <span class="meta">x</span>.ge<span class="meta">tDate(</span>),</span><br><span class="line">    h: <span class="meta">x</span>.getHours(),</span><br><span class="line">    m: <span class="meta">x</span>.getMinutes(),</span><br><span class="line">    s: <span class="meta">x</span>.getSeconds()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">return</span> y.<span class="meta">replace</span>(/(y+|M+|d+|h+|m+|s+)/g, functi<span class="meta">on(</span>v) &#123;</span><br><span class="line">    <span class="meta">return</span> ((v.<span class="meta">length</span> &gt; 1 ? <span class="string">'0'</span> : <span class="string">''</span>) + z[v.slice(-1)]).slice(-(v.<span class="meta">length</span> &gt; 2 ? v.<span class="meta">length</span> : 2))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>版本2<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.format2 = <span class="function"><span class="keyword">function</span>(<span class="params">fmt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">"M+"</span>: <span class="keyword">this</span>.getMonth() + <span class="number">1</span>, <span class="comment">//月份 </span></span><br><span class="line">        <span class="string">"d+"</span>: <span class="keyword">this</span>.getDate(), <span class="comment">//日 </span></span><br><span class="line">        <span class="string">"h+"</span>: <span class="keyword">this</span>.getHours(), <span class="comment">//小时 </span></span><br><span class="line">        <span class="string">"m+"</span>: <span class="keyword">this</span>.getMinutes(), <span class="comment">//分 </span></span><br><span class="line">        <span class="string">"s+"</span>: <span class="keyword">this</span>.getSeconds(), <span class="comment">//秒 </span></span><br><span class="line">        <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度 </span></span><br><span class="line">        <span class="string">"S"</span>: <span class="keyword">this</span>.getMilliseconds() <span class="comment">//毫秒 </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) &#123;</span><br><span class="line">        <span class="comment">// 这里 RegExp的用法挺有意思的</span></span><br><span class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="keyword">this</span>.getFullYear() + <span class="string">''</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'('</span> + k + <span class="string">')'</span>).test(fmt)) &#123;</span><br><span class="line">            fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length === <span class="number">1</span>) ? o[k] : (<span class="string">'00'</span> + o[k]).substr((<span class="string">''</span> + o[k]).length))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fmt</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>使用<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">format1(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">'yy-MM-dd hh:m:ss'</span>)  <span class="comment">// 18-08-23 11:46:11</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().format2(<span class="string">'yyyy-M-d h:m:s'</span>)  <span class="comment">// 2018-8-23 11:46:11</span></span><br></pre></td></tr></table></figure>
<h4 id="数字四舍五入"><a href="#数字四舍五入" class="headerlink" title="数字四舍五入"></a>数字四舍五入</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="attr">v:</span> <span class="string">值，</span> <span class="attr">p:</span> <span class="string">精度</span></span><br><span class="line"><span class="string">function</span> <span class="string">round(v,</span> <span class="string">p)</span> <span class="string">&#123;</span></span><br><span class="line">    <span class="string">p</span> <span class="string">=</span> <span class="string">Math.pow(10,</span> <span class="string">p</span> <span class="string">&gt;&gt;&gt;</span> <span class="number">31</span> <span class="string">?</span> <span class="attr">0 :</span> <span class="string">p</span> <span class="string">|</span> <span class="number">0</span><span class="string">)</span></span><br><span class="line">    <span class="string">v</span> <span class="string">*=</span> <span class="string">p</span></span><br><span class="line">    <span class="string">return</span> <span class="string">(v</span> <span class="string">+</span> <span class="number">0.5</span> <span class="string">+</span> <span class="string">(v</span> <span class="string">&gt;&gt;</span> <span class="number">31</span><span class="string">)</span> <span class="string">|</span> <span class="number">0</span><span class="string">)</span> <span class="string">/</span> <span class="string">p</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">//</span> <span class="string">使用</span></span><br><span class="line"><span class="string">round(123.456788,</span> <span class="number">2</span><span class="string">)</span>  <span class="string">//</span> <span class="number">123.46</span></span><br></pre></td></tr></table></figure>
<h4 id="浏览器原生-Base64编码和解码方法"><a href="#浏览器原生-Base64编码和解码方法" class="headerlink" title="浏览器原生 Base64编码和解码方法"></a>浏览器原生 Base64编码和解码方法</h4>  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">支持度为 IE10+，其他主流浏览器完全支持</span><br><span class="line"></span><br><span class="line">编码(btoa):</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.btoa(stringToEncode)</span><br><span class="line">解码(atob)：</span><br><span class="line"></span><br><span class="line"><span class="comment">// encodedData 代表 base64字符串</span></span><br><span class="line"><span class="built_in">window</span>.atob(encodedData)</span><br><span class="line">对中文进行编码会报错，可以先将中文转码，再进行编码，解码同样如此：</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.btoa(<span class="built_in">window</span>.encodeURIComponent(<span class="string">'嘻嘻哈哈'</span>))</span><br><span class="line"><span class="built_in">window</span>.atob(<span class="built_in">window</span>.decodeURIComponent(<span class="string">'JUU1JTk4JUJCJUU1JTk4JUJCJUU1JTkzJTg4JUU1JTkzJTg4'</span>))</span><br><span class="line">如果 IE9-浏览器需要此功能，可使用 polyfill， 然后像下面这样引入即可：</span><br><span class="line"></span><br><span class="line">&lt;!--[<span class="keyword">if</span> IE]&gt;</span><br><span class="line">&lt;script src=<span class="string">"./base64-polyfill.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;![endif]--&gt;</span><br><span class="line">任意文件也可以使用此 api进行编码和解码，使用 FileReader:</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// e.target.result就是该文件的完整Base64 Data-URI</span></span><br><span class="line">&#125;;</span><br><span class="line">reader.readAsDataURL(file);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="利用委托冒泡，检测ul下被点击的li标签"><a href="#利用委托冒泡，检测ul下被点击的li标签" class="headerlink" title="利用委托冒泡，检测ul下被点击的li标签"></a>利用委托冒泡，检测ul下被点击的li标签</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">"ul"</span>);</span><br><span class="line">    <span class="keyword">var</span> aLi = oUl.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line">    oUl.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">var</span> target = ev.target || ev.srcElement;</span><br><span class="line">        <span class="keyword">if</span>(target.nodeName.toLowerCase() == <span class="string">"li"</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> that=target;</span><br><span class="line">        <span class="keyword">var</span> index;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;aLi.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(aLi[i]===target)&#123;</span><br><span class="line">            index=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(index&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            alert(<span class="string">'我的下标是：'</span>+index);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="直接把函数赋值给变量"><a href="#直接把函数赋值给变量" class="headerlink" title="直接把函数赋值给变量"></a>直接把函数赋值给变量</h4><pre><code>- 凡是使用 return 返回函数调用的(也就是回调)，都可以去掉这个间接包裹层，最终连参数和括号一起去掉
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getServerStuff = <span class="function"><span class="keyword">function</span><span class="params">(callback)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ajaxCall(<span class="function"><span class="keyword">function</span><span class="params">(json)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> callback(json)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上述代码等价于下面这句：</span></span><br><span class="line"><span class="keyword">const</span> getServerStuff = <span class="function"><span class="keyword">function</span><span class="params">(callback)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ajaxCall(callback)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 上述代码等价于下面这句：</span></span><br><span class="line"><span class="keyword">const</span> getServerStuff = ajaxCall</span><br></pre></td></tr></table></figure></code></pre><h4 id="遍历对象"><a href="#遍历对象" class="headerlink" title="遍历对象"></a>遍历对象</h4><pre><code>当使用 for in 循环遍历对象的属性时，原型链上的所有属性都将被访问，同时如果遍历的是数组，
遍历顺序有可能不是按照实际数组的内部顺序，因此如果遍历数组，尽可能使用传统的 for 循环</code></pre><h4 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty"></a>hasOwnProperty</h4><pre><code>当检查对象上某个属性是否存在时，hasOwnProperty 是唯一可用的方法。 同时在使用 for in遍历对象时，
推荐总是使用 hasOwnProperty 方法，这将会避免原型对象扩展带来的干扰。</code></pre><h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h4><pre><code>应该尽量避免使用数组构造函数创建新数组。推荐使用数组的字面语法。它们更加短小和简洁，因此增加了代码的可读性。</code></pre><h4 id="检测对象的类型"><a href="#检测对象的类型" class="headerlink" title="检测对象的类型"></a>检测对象的类型</h4><pre><code>为了检测一个对象的类型，强烈推荐使用 Object.prototype.toString 方法； 因为这是唯一一个可依赖的方式。</code></pre><h4 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h4><pre><code>instanceof 操作符应该仅仅用来比较来自同一个 JavaScript 上下文的自定义对象。
 正如 typeof 操作符一样，任何其它的用法都应该是避免的。</code></pre><h4 id="手工清空定时器"><a href="#手工清空定时器" class="headerlink" title="手工清空定时器"></a>手工清空定时器</h4><pre><code><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> 每个<span class="keyword">set</span>Timeout 都会返回一个 ID 标识</span><br><span class="line">var id = <span class="keyword">set</span>Timeout<span class="params">(foo, 1000)</span>;</span><br><span class="line"><span class="keyword">clear</span>Timeout<span class="params">(id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">//</span> 清空<span class="string">"所有"</span>的定时器</span><br><span class="line">for<span class="params">(var <span class="attr">i</span> = 1; i &lt; 1000; i++)</span> &#123;</span><br><span class="line">    <span class="keyword">clear</span>Timeout<span class="params">(i)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h4 id="优化选择器"><a href="#优化选择器" class="headerlink" title="优化选择器"></a>优化选择器</h4><pre><code><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">选择器以 ID 开始总是最好的。</span><br><span class="line"><span class="comment">//  快</span></span><br><span class="line"><span class="constructor">$('#<span class="params">container</span> <span class="params">div</span>.<span class="params">robotarm</span>')</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非常快</span></span><br><span class="line"><span class="constructor">$('#<span class="params">container</span>')</span>.find('div.robotarm');</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 $.fn.find 的方式会更快是因为在第一步里只有 ID，</span></span><br><span class="line"> 根本没用到快速选择器引擎，而是使用了浏览器内置的极速的 document.get<span class="constructor">ElementById()</span>。</span><br><span class="line">选择器的右侧部分应该尽可能具体，左侧则不需要那么具体</span><br><span class="line"><span class="comment">//未优化的</span></span><br><span class="line"><span class="constructor">$('<span class="params">div</span>.<span class="params">data</span> .<span class="params">gonzalez</span>')</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化过的</span></span><br><span class="line"><span class="constructor">$('.<span class="params">data</span> <span class="params">td</span>.<span class="params">gonzalez</span>')</span>;</span><br><span class="line">避免使用无定向选择器</span><br><span class="line"><span class="constructor">$('.<span class="params">buttons</span> &gt; <span class="operator">*</span>')</span>;  <span class="comment">// 极慢</span></span><br><span class="line"><span class="constructor">$('.<span class="params">buttons</span>')</span>.children<span class="literal">()</span>;  <span class="comment">// 快很多</span></span><br><span class="line"></span><br><span class="line"><span class="constructor">$('.<span class="params">gender</span> :<span class="params">radio</span>')</span>;  <span class="comment">// 暗示这是一个无定向的搜索</span></span><br><span class="line"><span class="constructor">$('.<span class="params">gender</span> <span class="operator">*</span>:<span class="params">radio</span>')</span>; <span class="comment">// 同上，这只不过是说出来了</span></span><br><span class="line"><span class="constructor">$('.<span class="params">gender</span> <span class="params">input</span>:<span class="params">radio</span>')</span>; <span class="comment">// 这就差不多了</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="使用事件委派"><a href="#使用事件委派" class="headerlink" title="使用事件委派"></a>使用事件委派</h4><pre><code><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果列表里面元素很多，不堪想象</span></span><br><span class="line">$(<span class="string">'li.trigger'</span>).click(handlerFn);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这样写好一点，用 $.fn.live 做事件委派</span></span><br><span class="line">$(<span class="string">'li.trigger'</span>).live(<span class="string">'click'</span>, handlerFn);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最好的做法，用 $.fn.delegate 做事件委派，还可以指定一个上下文</span></span><br><span class="line">$(<span class="string">'#myList'</span>).delegate(<span class="string">'li.trigger'</span>, <span class="string">'click'</span>, handlerFn);</span><br><span class="line"><span class="comment">// 先将元素 detach 出来再操作</span></span><br><span class="line"><span class="comment">// DOM 操作是慢的，你应该尽量避免去操作它。 </span></span><br><span class="line">jQuery 在 <span class="number">1.4</span> 版引入了 $.fn.detach 来帮助解决这个问题：让你可以先将元素从 DOM 树中剥离出来再进行操作。</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="symbol">$ta</span>ble = $(<span class="string">'#myTable'</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="symbol">$pare</span>nt = <span class="symbol">$ta</span>ble.parent();</span><br><span class="line"></span><br><span class="line"><span class="symbol">$ta</span>ble.detach();</span><br><span class="line"><span class="comment">// ... 添加大量的行到表格中去</span></span><br><span class="line"><span class="symbol">$pare</span>nt.append(table);</span><br><span class="line">应该使用样式表给大量元素修改 CSS</span><br><span class="line">如果你在用 $.fn.css 给多于 <span class="number">20</span> 个元素修改 CSS，考虑一下添加一个 style 标签，</span><br><span class="line"> 这样可以速度可以提升 <span class="number">60</span>%。 操作大于 <span class="number">20</span> 个元素是不错的，但少于时就不值了</span><br><span class="line"></span><br><span class="line"><span class="comment">// 少量css操作</span></span><br><span class="line">$(<span class="string">'a.swedberg'</span>).css(<span class="string">'color'</span>, <span class="string">'#asd123'</span>);</span><br><span class="line"><span class="comment">// 大量css操作，最好使用样式表</span></span><br><span class="line">$(<span class="string">'&lt;style type="text/css"&gt;a.swedberg &#123; color : #asd123 &#125;&lt;/style&gt;'</span>).appendTo(<span class="string">'head'</span>);</span><br><span class="line">使用 $.data 而不是 $.fn.data</span><br><span class="line"><span class="comment">// 常规写法</span></span><br><span class="line">$(elem).data(key,value);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 快 10 倍</span></span><br><span class="line">$.data(elem,key,value);</span><br><span class="line">别费时间在空白的选择结果上了</span><br><span class="line"><span class="comment">// 太糟了，执行了三个方法后才意识到里面是空的</span></span><br><span class="line">$(<span class="string">'#nosuchthing'</span>).slideUp();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这会好点，就是代码有点长</span></span><br><span class="line"><span class="keyword">var</span> <span class="symbol">$my</span>Selection = $(<span class="string">'#nosuchthing'</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="symbol">$my</span>Selection.length) &#123; mySelection.slideUp(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最好的做法是添加一个 doOnce 插件</span></span><br><span class="line">jQuery.fn.doOnce = <span class="function"><span class="keyword">function</span>(<span class="params">func</span>)</span>&#123; </span><br><span class="line">    this.length &amp;&amp; func.apply(this);</span><br><span class="line">    <span class="keyword">return</span> this; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="string">'li.cartitems'</span>).doOnce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="comment">// make it ajax! \o/</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></code></pre><h4 id="判定-IE7"><a href="#判定-IE7" class="headerlink" title="判定 IE7-"></a>判定 IE7-</h4><pre><code>// 其中 &apos;p&apos;[0]，`p`可以换成任何单字符，如果原样返回这个字符，则说明是 IE8+，
否则返回 undefined 则表明是 IE7-
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">'p'</span>[<span class="number">0</span>])&#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">"It\'s IE8+"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">"It\'s IE7-"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h4 id="处理大量的数据"><a href="#处理大量的数据" class="headerlink" title="处理大量的数据"></a>处理大量的数据</h4><pre><code>将数据的数据量很大，一次性处理这些数据所需花费的时间较长，并且可能导致诸如浏览器暂时失去响应的结果，
 那么最好将这些数据分割成数个小的 “进程”，利用事件轮询来取得一个更加流畅的效果。

使用 setTimeout（黑科技）来异步排程，基本上它的意思是“将这个函数贴在事件轮询队列的末尾”。

下面这些是一般处理数据的方法，当数据量很大时，可能导致浏览器失去响应：
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> res = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// `response(..)`从Ajax调用收到一个结果数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">response</span><span class="params">(data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 连接到既存的`res`数组上</span></span><br><span class="line">    res = res.concat(</span><br><span class="line">        <span class="comment">// 制造一个新的变形过的数组，所有的`data`值都翻倍</span></span><br><span class="line">        data.map( <span class="function"><span class="keyword">function</span><span class="params">(val)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> val * <span class="number">2</span>;</span><br><span class="line">        &#125; )</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ajax(..) 是某个包中任意的Ajax函数</span></span><br><span class="line">ajax( <span class="string">"http://some.url.1"</span>, response );</span><br><span class="line">ajax( <span class="string">"http://some.url.2"</span>, response );</span><br><span class="line">最好使用以下写法，利用 setTimeout 来将处理数据的过程，分割成数个小的“进程”：</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> res = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// `response(..)`从Ajax调用收到一个结果数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">response</span><span class="params">(data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 我们一次只处理1000件</span></span><br><span class="line">    <span class="keyword">var</span> chunk = data.splice( <span class="number">0</span>, <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 连接到既存的`res`数组上</span></span><br><span class="line">    res = res.concat(</span><br><span class="line">        <span class="comment">// 制造一个新的变形过的数组，所有的`data`值都翻倍</span></span><br><span class="line">        chunk.map( <span class="function"><span class="keyword">function</span><span class="params">(val)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> val * <span class="number">2</span>;</span><br><span class="line">        &#125; )</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 还有东西要处理吗？</span></span><br><span class="line">    <span class="keyword">if</span> (data.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 异步规划下一个批处理，将剩余的数据追加到下一个事件轮询队列中</span></span><br><span class="line">        setTimeout( <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">            response( data );</span><br><span class="line">        &#125;, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ajax(..) 是某个包中任意的Ajax函数</span></span><br><span class="line">ajax( <span class="string">"http://some.url.1"</span>, response );</span><br><span class="line">ajax( <span class="string">"http://some.url.2"</span>, response );</span><br></pre></td></tr></table></figure></code></pre><h4 id="字符输出"><a href="#字符输出" class="headerlink" title="字符输出"></a>字符输出</h4><pre><code>HTML中字符输出使用&amp;#x配上 charCode值；
在JavaScript文件中为防止乱码转义，则是 \u配上 charCode值；
而在 CSS文件中，如 CSS伪元素的 content属性，直接使用 \配上 charCode值。
因此，想在 HTML/JS/CSS中转义“我”这个汉字，分别是：

&amp;#x6211;
\u6211, 如console.log(&apos;\u6211&apos;)
\6211, 如.xxx:before { content: &apos;\6211&apos;; }
使用 js获取字符 charCode方法：

// 例如获取 `好`的 charCode
&apos;你好&apos;.charCodeAt(1).toString(16)
考虑到直接 &amp;#x3000;这种形式暴露在HTML中，可能会让屏幕阅读器等辅助设备读取，从而影响正常阅读流，
因此， 我们可以进一步优化下，使用标签，利用伪元素，例如：

.full:before { content: &apos;\2003&apos;; speak: none; }
这样，占位的空格字符即不能读，也不能选了。</code></pre><h4 id="CSS中层叠上下文顺序"><a href="#CSS中层叠上下文顺序" class="headerlink" title="CSS中层叠上下文顺序"></a>CSS中层叠上下文顺序</h4><h5 id="由上到下，层次依次递减"><a href="#由上到下，层次依次递减" class="headerlink" title="由上到下，层次依次递减"></a>由上到下，层次依次递减</h5><pre><code><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 正z-index</span></span><br><span class="line"><span class="comment">// z-index:auto / z-index:0 / 不依赖 z-index的层叠上下文</span></span><br><span class="line"><span class="comment">// inline/inline-block水平盒子</span></span><br><span class="line"><span class="comment">// float浮动盒子</span></span><br><span class="line"><span class="comment">// block块状水平盒子</span></span><br><span class="line"><span class="comment">// 负z-index</span></span><br><span class="line"><span class="comment">// 层叠上下文background / border</span></span><br><span class="line"><span class="comment">// 异常捕获</span></span><br><span class="line"><span class="comment">// try...catch</span></span><br><span class="line"><span class="comment">// 使用try catch能够很好的捕获异常并对应进行相应处理，不至于让页面挂掉，但是其存在一些弊端，</span></span><br><span class="line">比如需要在捕获异常的代码上进行包裹，会导致页面臃肿不堪，不适用于整个项目的异常捕获。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onerror</span><br><span class="line"><span class="built_in">window</span>.onerror提供了全局监听异常的功能，不过可能会存在以下问题：</span><br><span class="line"></span><br><span class="line">Script error <span class="built_in">window</span>.onerror无法准确捕获到跨域资源的异常信息，例如 CDN上的静态资源，</span><br><span class="line">只会统一返回 Script error 解决方案： script标签配置 crossorigin=<span class="string">"anonymous"</span></span><br><span class="line"> 并且服务器添加 Access-Control-Allow-Origin: *(一般 CDN服务器都会配置此属性):</span><br><span class="line"><span class="comment">//&lt;script src="http://cdn.xxx.com/index.js" crossorigin="anonymous"&gt;</span></span><br><span class="line">sourceMap</span><br><span class="line">线上代码一般是混淆压缩的，无法正确清晰地定位报错代码的位置，所以需要启用 sourceMap，例如，在 webpack打包工具中启用：</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    devtool: <span class="string">'#source-map'</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MVVM框架中的异常捕获</span><br><span class="line">一般的 MVVM框架自带异常捕获机制，并且通常会屏蔽外部添加的异常捕获代码，例如 <span class="built_in">window</span>.onerror。</span><br><span class="line"></span><br><span class="line">下面是 vue2.x中捕获全局异常的方法：</span><br><span class="line"></span><br><span class="line">Vue.config.errorHandler = <span class="function"><span class="keyword">function</span> (<span class="params">err, vm, info</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; </span><br><span class="line">        message, <span class="comment">// 异常信息</span></span><br><span class="line">        name, <span class="comment">// 异常名称</span></span><br><span class="line">        script,  <span class="comment">// 异常脚本url</span></span><br><span class="line">        line,  <span class="comment">// 异常行号</span></span><br><span class="line">        column,  <span class="comment">// 异常列号</span></span><br><span class="line">        stack  <span class="comment">// 异常堆栈信息</span></span><br><span class="line">    &#125; = err;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// vm为抛出异常的 Vue 实例</span></span><br><span class="line">    <span class="comment">// info为 Vue 特定的错误信息，比如错误所在的生命周期钩子</span></span><br><span class="line">    <span class="comment">// 只在 2.2.0+ 可用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h4 id="异常上报"><a href="#异常上报" class="headerlink" title="异常上报"></a>异常上报</h4><pre><code>捕获到异常后，需要进行上报，这一步比较简单，例如直接将捕获到的错误通过 ajax全部上传即可。

sourceMap 异常解析
上传的错误日志可能是混淆加密后的代码的错误日志，不好分析，
所以还需要使用 soureMap分析工具对其进行解析。 这样的工具，例如 source-map</code></pre><h4 id="深度判等"><a href="#深度判等" class="headerlink" title="深度判等"></a>深度判等</h4><pre><code>- 两个对象结构和数据完全一致，即认为相等，而不要求是同一引用
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deepEqual</span> (<span class="params">o1, o2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> o1 !== <span class="string">'object'</span> || <span class="keyword">typeof</span> o2 !== <span class="string">'object'</span>) &#123; <span class="keyword">return</span> o1 === o2 &#125;</span><br><span class="line">    <span class="comment">// 完全遍历 o1,保证 o2 的数据结构可以覆盖 o1的，也就是说 o2的数据结构大于等于 o1的</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> p <span class="keyword">in</span> o1) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!deepEqual(o1[p], o2[p])) &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保证 o2中存在的数据结构在 o1中也存在，结合上一步，即可证明二者数据结构完全一致</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> q <span class="keyword">in</span> o2) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!(q <span class="keyword">in</span> o1)) &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h4 id="深度覆盖"><a href="#深度覆盖" class="headerlink" title="深度覆盖"></a>深度覆盖</h4><pre><code>- 将源对象的值覆盖目标对象，相同结构相同参数部分直接覆盖，其它部分保持不变，例如： 修改前：
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">target = &#123;x: <span class="number">1</span>, y: &#123;a: <span class="number">1</span>, b:<span class="number">1</span> &#125;, z: <span class="number">1</span>&#125;;</span><br><span class="line">source = &#123;x: <span class="number">2</span>, y: &#123;a: <span class="number">2</span>&#125;&#125;;</span><br><span class="line">修改后：</span><br><span class="line"></span><br><span class="line">target = &#123;x: <span class="number">2</span>, y: &#123;a: <span class="number">2</span>, b:<span class="number">1</span> &#125;, z: <span class="number">1</span>&#125;</span><br><span class="line">实现：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepAssign</span> <span class="params">(target, <span class="rest_arg">...sources</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> target !== <span class="string">'object'</span>) &#123;</span><br><span class="line">    console.error(<span class="string">'[deepAssign] bad parameters, target should be an object, parameters:'</span>, arguments)</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (let source of sources) &#123;</span><br><span class="line">    <span class="keyword">if</span> (source != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> source !== <span class="string">'object'</span>) &#123;</span><br><span class="line">        console.warn(<span class="string">'[deepAssign] bad parameters, source should all be object, parameters:'</span>, arguments)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> p <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> target[p] === <span class="string">'object'</span> &amp;&amp; <span class="keyword">typeof</span> source[p] === <span class="string">'object'</span>) &#123; deepAssign(target[p], source[p]) &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; target[p] = source[p] &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h4 id="监控网页的崩溃"><a href="#监控网页的崩溃" class="headerlink" title="监控网页的崩溃"></a>监控网页的崩溃</h4><p>由于网页崩溃以后，页面上的 js很可能也是无法运行的了，所以无法使用页面上的 js进行网页崩溃的监控，需要另寻他法。<br>1.<a href="https://mp.weixin.qq.com/s/HnMZLI7hZ5sXU7bOXh615A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/HnMZLI7hZ5sXU7bOXh615A</a><br>2.<a href="https://zhuanlan.zhihu.com/p/40273861" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/40273861</a></p>
<h4 id="解决堆栈"><a href="#解决堆栈" class="headerlink" title="解决堆栈"></a>解决堆栈</h4><h5 id="堆栈溢出一般是由什么原因导致？"><a href="#堆栈溢出一般是由什么原因导致？" class="headerlink" title="堆栈溢出一般是由什么原因导致？"></a>堆栈溢出一般是由什么原因导致？</h5><ul>
<li><p>1.没有回收垃圾资源</p>
</li>
<li><p>2.层次太深的递归调用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nextListItem = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 假设 list是一个已经存在的数组</span></span><br><span class="line">    <span class="keyword">if</span> (list.pop()) &#123;</span><br><span class="line">    nextListItem();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码在 list数组长度较大的时候，由于可能会不断地进行回调自身的操作，不断在申请内存用于存放堆栈信息，<br>一直到函数达到一定条件不再进行持续的回调自身，最初的函数才运行结束，释放掉所申请的所有内存，<br>而如果在此期间所申请的总内存超出了线程的栈空间，则将发生栈溢出。</p>
</li>
</ul>
<p>有两种解决方式：</p>
<p>异步</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nextListItem = () =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">list</span>.pop()) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(nextListItem, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>的作用就是让代码异步运行，将每次回调自身函数的执行放到事件队列中，</span><br><span class="line">上一个函数执行完就可以退出，释放所占用的内存，不会造成内存累计的情况。</span><br></pre></td></tr></table></figure>
<p>闭包</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nextListItem = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (list.pop()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nextListItem()</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 为了避免不断调用，例如 nextListItem()()()，增加一个自动调用器</span></span><br><span class="line"><span class="keyword">const</span> autoRun = <span class="function"><span class="params">func</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> value = func()</span><br><span class="line">    <span class="keyword">typeof</span> value === <span class="string">'function'</span> &amp;&amp; autoRun(value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">autoRun(nextListItem)</span><br><span class="line">闭包返回的是一个新函数，之前的函数在运行结束后可以释放内存，所以也不存在内存堆积的情况。</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>codeBlock</category>
      </categories>
      <tags>
        <tag>codeBlock</tag>
      </tags>
  </entry>
  <entry>
    <title>centos7 宝塔[LNMP] 访问swoole服务问题</title>
    <url>/posts/593ef122.html</url>
    <content><![CDATA[<blockquote class="blockquote-center"></blockquote>
<div class="note success">
            <p>centos7 宝塔[LNMP] 访问swoole服务问题</p>
          </div>

<h3 id="centos7-宝塔安装LNMP环境"><a href="#centos7-宝塔安装LNMP环境" class="headerlink" title="centos7 宝塔安装LNMP环境"></a>centos7 宝塔安装LNMP环境</h3><ul>
<li>已集成swoole服务+异步redis</li>
<li>已配置好虚拟域名 <a href="http://www.swoole.live" target="_blank" rel="noopener">www.swoole.live</a> 访问TP根目录</li>
<li>采用TP5.1框架</li>
<li>请先关闭linux防火墙<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">firewall防火墙</span><br><span class="line">1、查看firewall服务状态</span><br><span class="line">systemctl status firewalld</span><br><span class="line">出现Active: active (running)切高亮显示则表示是启动状态。</span><br><span class="line">出现 Active: inactive (dead)灰色表示停止，看单词也行。</span><br><span class="line">2、开启 关闭 重启 开机禁止</span><br><span class="line">service firewalld  start</span><br><span class="line">service firewalld  stop</span><br><span class="line">service firewalld  restart</span><br><span class="line">systemctl <span class="builtin-name">disable</span> firewalld</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h5 id="通过虚拟域名访问swoole的httpserver服务失败"><a href="#通过虚拟域名访问swoole的httpserver服务失败" class="headerlink" title="通过虚拟域名访问swoole的httpserver服务失败"></a>通过虚拟域名访问swoole的httpserver服务失败</h5></li>
</ul>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">出现以下两个问题</span><br><span class="line"><span class="string">http:</span>\<span class="regexp">/\/</span>www.swoole.<span class="string">live:</span><span class="number">9501</span><span class="regexp">/live/</span>detail.html</span><br><span class="line"><span class="number">1.</span>域名+端口访问httpserver服务一直出现无法连接状态 </span><br><span class="line"><span class="number">2.</span>域名+端口访问httpserver服务成功后并设置静态文件选项，一直无法加载出来</span><br><span class="line"></span><br><span class="line">- 重新复制并改写nginx的配置文件  <span class="regexp">/vhosts/</span>swoole.conf</span><br><span class="line">- 在nginx.conf主文件引入swoole.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> www.swoole.live;</span><br><span class="line">	<span class="attribute">root</span> /www/wwwroot/www.swoole.live/public/;</span><br><span class="line">	<span class="attribute">index</span> index.php index.html index.htm default.php default.htm default.html;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则</span></span><br><span class="line">    <span class="comment">#error_page 404/404.html;</span></span><br><span class="line">    <span class="comment">#SSL-END</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#ERROR-PAGE-START  错误页配置，可以注释、删除或修改</span></span><br><span class="line">    <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">    <span class="comment">#error_page 502 /502.html;</span></span><br><span class="line">    <span class="comment">#ERROR-PAGE-END</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#PHP-INFO-START  PHP引用配置，可以注释或修改</span></span><br><span class="line">    <span class="attribute">include</span> enable-php-<span class="number">72</span>.conf;</span><br><span class="line">    <span class="comment">#PHP-INFO-END</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#以下参照swoole手册  放在这个位置是因为访问是swoole.php 的PHP后缀文件</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">    	<span class="comment"># 通过PHP-FPM进行解析PHP文件</span></span><br><span class="line">    	<span class="comment">#fastcgi_pass 127.0.0.1:9000;</span></span><br><span class="line">		<span class="attribute">fastcgi_pass</span> unix:/tmp/php-cgi-72.sock;<span class="comment">#设置监听并开启fpm服务</span></span><br><span class="line">		<span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">		<span class="attribute">fastcgi_param</span> SCRIPT_FILENAME <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">		<span class="attribute">include</span> fastcgi_params;</span><br><span class="line">		<span class="comment"># 访问swoole http\server 服务配置内容如下</span></span><br><span class="line">		<span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">"keep-alive"</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">if</span> (!-e <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">             <span class="attribute">proxy_pass</span> http://192.168.33.110:9501;<span class="comment">#最重要是通过代理进行转发</span></span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#禁止访问的文件或目录</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md)</span></span><br><span class="line"><span class="regexp"></span>    &#123;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">404</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#一键申请SSL证书验证目录相关设置</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.well-known</span>&#123;</span><br><span class="line">        <span class="attribute">allow</span> all;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .*\.(gif|jpg|jpeg|png|bmp|swf)$</span></span><br><span class="line"><span class="regexp"></span>    &#123;</span><br><span class="line">        <span class="attribute">expires</span>      <span class="number">30d</span>;</span><br><span class="line">        <span class="attribute">error_log</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">access_log</span> /dev/null;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .*\.(js|css)?$</span></span><br><span class="line"><span class="regexp"></span>    &#123;</span><br><span class="line">        <span class="attribute">expires</span>      <span class="number">12h</span>;</span><br><span class="line">        <span class="attribute">error_log</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">access_log</span> /dev/null; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">access_log</span>  /www/wwwlogs/www.swoole.live.log;</span><br><span class="line">    <span class="attribute">error_log</span>  /www/wwwlogs/www.swoole.live.<span class="literal">error</span>.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Uf28781cb630e423cb2d4f708873dcb01X.jpg" alt="访问服务成功"></p>
<p><a href="https://blog.csdn.net/hudeyong926/article/details/99540724" target="_blank" rel="noopener">swoole 之http服务器静态资源</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Http</span> </span>&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">CONST</span> HOST = <span class="string">'192.168.33.123'</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">CONST</span> PORT = <span class="string">'9501'</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">CONST</span> ENABLE_STATIC_HANDLER = <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">CONST</span> DOCUMENT_ROOT = <span class="string">'/www/wwwroot/www.swoole.live/public/static'</span>;</span></span><br><span class="line"><span class="php">    </span></span><br><span class="line"><span class="php">    <span class="keyword">private</span> $http = <span class="keyword">null</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;http = <span class="keyword">new</span> Swoole\Http\Server(<span class="keyword">self</span>::HOST, <span class="keyword">self</span>::PORT);</span></span><br><span class="line"><span class="php">        <span class="comment">//静态文件加载失败----document_root单词写错！！！！</span></span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;http-&gt;set([</span></span><br><span class="line"><span class="php">             <span class="string">'enable_static_handler'</span> =&gt; <span class="keyword">self</span>::ENABLE_STATIC_HANDLER,</span></span><br><span class="line"><span class="php">             <span class="string">'document_root'</span> =&gt;<span class="keyword">self</span>::DOCUMENT_ROOT,</span></span><br><span class="line"><span class="php">        ]);</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;http-&gt;on(<span class="string">'request'</span>, [<span class="keyword">$this</span>, <span class="string">'onRequest'</span>]);</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;http-&gt;start();</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line">    /**</span><br><span class="line">     * onRequest function </span><br><span class="line">     *</span><br><span class="line">     * @param [type] $request</span><br><span class="line">     * @param [type] $response</span><br><span class="line">     * @return void</span><br><span class="line">     * @Description  </span><br><span class="line">     * @author </span><br><span class="line">     * @date 2019-10-26</span><br><span class="line"><span class="php">     */</span></span><br><span class="line"><span class="php">	 <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">onRequest</span><span class="params">($request, $response)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        $response-&gt;header(<span class="string">"Content-Type"</span>, <span class="string">"text/html; charset=utf-8"</span>);</span></span><br><span class="line"><span class="php">        $response-&gt;end(<span class="string">""</span> . rand(<span class="number">1000</span>, <span class="number">9999</span>));</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">new</span> Http();<span class="comment">//实例化http类</span></span></span><br></pre></td></tr></table></figure>
<p>结果如下：<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Ubbe80be981c647d799902643508ebdaes.jpg" alt="加载静态资源成功"></p>
]]></content>
      <categories>
        <category>Swoole</category>
      </categories>
      <tags>
        <tag>swoole nginx httpserver</tag>
      </tags>
  </entry>
  <entry>
    <title>CakePHP学习</title>
    <url>/posts/cf2bd071.html</url>
    <content><![CDATA[<div class="note success">
            <p>CakePHP学习的水平只有这么点</p>
          </div>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cakephp.org/images/slider/slide-1.jpg" alt="CakePHP"></p>
<h5 id="不定期持续更新学习中…"><a href="#不定期持续更新学习中…" class="headerlink" title="不定期持续更新学习中….."></a>不定期持续更新学习中…..</h5><a id="more"></a>
<h5 id="主要基于Cakephp-2-x版本进行总结"><a href="#主要基于Cakephp-2-x版本进行总结" class="headerlink" title="主要基于Cakephp 2.x版本进行总结"></a>主要基于Cakephp 2.x版本进行总结</h5><p><a href="https://api.cakephp.org/2.10/package-Cake.html" target="_blank" rel="noopener">Cakephp 2.x版本APi</a></p>
<h5 id="Cakephp命名规范"><a href="#Cakephp命名规范" class="headerlink" title="Cakephp命名规范"></a>Cakephp命名规范</h5><ul>
<li><p>控制器</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">控制器的类名是复数，首字母大写, 并且以 Controller 结尾。</span><br><span class="line">例子：UsersController 和 ArticleCategoriesController 。</span><br><span class="line">$this-&gt;<span class="keyword">User</span>  <span class="title">单数</span></span><br></pre></td></tr></table></figure></li>
<li><p>访问控制器URL</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">单个单词的控制器映射到一个简单的小写URL路径。例如 `UsersController` </span><br><span class="line">（将是定义在名称为 **UsersController.php** 的文件中）</span><br><span class="line">可以从 </span><br><span class="line">[<span class="string">http:</span>\<span class="regexp">/\/</span>example.com<span class="regexp">/项目名/</span>控制器类复数]</span><br><span class="line">(<span class="string">http:</span>\<span class="regexp">/\/</span>example.com<span class="regexp">/demo/</span>users) </span><br><span class="line">注意：</span><br><span class="line">访问的URL路径是小写并且用 DashedRoute 类来分割。</span><br><span class="line"><span class="regexp">/article-categories/</span>view-all 是</span><br><span class="line">访问 <span class="string">ArticleCategoriesController:</span>:viewAll() 方法的正确方式。</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件名和类名命名</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">控制器类  LatestArticlesController 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">LatestArticlesController</span>.</span></span>php</span><br><span class="line">组件类   MyHandyComponent 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">MyHandyComponent</span>.</span></span>php</span><br><span class="line">Table 类   OptionValuesTable 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">OptionValuesTable</span>.</span></span>php.</span><br><span class="line">Entity 类    OptionValue 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">OptionValue</span>.</span></span>php.</span><br><span class="line">Behavior 类   EspeciallyFunkableBehavior 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">EspeciallyFunkableBehavior</span>.</span></span>php</span><br><span class="line">视图类   SuperSimpleView 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">SuperSimpleView</span>.</span></span>php</span><br><span class="line">Helper 类   BestEverHelper 将对应文件名 <span class="module-access"><span class="module"><span class="identifier">BestEverHelper</span>.</span></span>php</span><br></pre></td></tr></table></figure></li>
<li><p>数据库表名命名</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line">需与Model层名字对应并且     复数形式并用下划线分割(两个单词以上)</span><br><span class="line"><span class="built_in"> users,</span> article_categories, 和 user_favorite_pages 等。</span><br></pre></td></tr></table></figure></li>
<li><p>模型层命名</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">单数形式</span><br><span class="line">主要是分两类</span><br><span class="line"><span class="keyword">Table</span> 类名是复数、首字母大写、以 <span class="keyword">Table</span> 结尾的。</span><br><span class="line"></span><br><span class="line">UsersTable、ArticleCategoriesTable</span><br><span class="line"> 分别是对应 users、article_categories表的 <span class="keyword">table</span> 类名。</span><br><span class="line"></span><br><span class="line">Entity 类名是单数、首字母大写、无后缀的。</span><br><span class="line">User、ArticleCategory </span><br><span class="line">分别是对应 users、article_categories表的 entity 类名。</span><br></pre></td></tr></table></figure></li>
<li><p>视图层命名</p>
<figure class="highlight isbl"><table><tr><td class="code"><pre><span class="line">视图模板文件使用它对应的控制器方法的名字以下划线形式命名。</span><br><span class="line"><span class="variable">ArticlesController</span> 类的 <span class="function"><span class="title">viewAll</span>()</span></span><br><span class="line">防范将会对应视图模板文件 <span class="variable">src</span>/<span class="variable">Template</span>/<span class="variable">Articles</span>/<span class="variable">view_all.ctp</span>。</span><br></pre></td></tr></table></figure></li>
<li><p>请求方式与获取</p>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">POST 数据可以通过 $<span class="function"><span class="title">this</span>-&gt;</span><span class="function"><span class="title">request</span>-&gt;</span>getData() 获取</span><br><span class="line">GET 数据可以通过 $<span class="function"><span class="title">this</span>-&gt;</span><span class="function"><span class="title">request</span>-&gt;</span>query()获取</span><br></pre></td></tr></table></figure></li>
<li><p>debug打印变量内容信息</p>
<figure class="highlight isbl"><table><tr><td class="code"><pre><span class="line">检查它里面的数据内容，我们可以通过方法    <span class="function"><span class="title">pr</span>() 或者 <span class="title">debug</span>()</span></span><br></pre></td></tr></table></figure></li>
<li><p>Edit编辑功能页面信息提示</p>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line"><span class="number">2.3</span>版本</span><br><span class="line"> $<span class="function"><span class="title">this</span>-&gt;</span>S<span class="function"><span class="title">ession</span>-&gt;</span>setFlash(<span class="string">'edit successfully'</span>);</span><br><span class="line"><span class="number">2.10</span>以上版本</span><br><span class="line"> $<span class="function"><span class="title">this</span>-&gt;</span>F<span class="function"><span class="title">lash</span>-&gt;</span>success(__(<span class="string">'Your article has been updated.'</span>));<span class="comment">//提示更新成功信息</span></span><br><span class="line"> $<span class="function"><span class="title">this</span>-&gt;</span>F<span class="function"><span class="title">lash</span>-&gt;</span>error(__(<span class="string">'Unable to update your article.'</span>));<span class="comment">//提示更新失败信息</span></span><br></pre></td></tr></table></figure></li>
<li><p>绑定至视图</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">  <span class="symbol">$</span>this-&gt;<span class="keyword">set</span>(compact(<span class="string">'article'</span>));</span><br><span class="line">  <span class="symbol">$</span>this-&gt;<span class="keyword">set</span>(<span class="string">'article'</span>, $article); </span><br><span class="line"><span class="comment">//注入article视图 使用 set() 函数将数据传入模版（将在下部分创建）CakePHP 将会自动渲染模版。</span></span><br></pre></td></tr></table></figure></li>
<li><p>cookie使用</p>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line"><span class="comment">//配置cookie</span></span><br><span class="line">$<span class="function"><span class="title">this</span>-&gt;</span>C<span class="function"><span class="title">ookie</span>-&gt;</span>configKey(<span class="string">'User'</span>, [</span><br><span class="line">    <span class="string">'expires'</span> =&gt; <span class="string">'+10 days'</span>,</span><br><span class="line">    <span class="string">'httpOnly'</span> =&gt; <span class="literal">true</span></span><br><span class="line">]);</span><br><span class="line"><span class="comment">//配置参数如下</span></span><br><span class="line">expires  <span class="built_in">path</span> domain  secure   key httpOnly  entryption</span><br><span class="line"><span class="comment">//设置cookie值</span></span><br><span class="line">$<span class="function"><span class="title">this</span>-&gt;</span>C<span class="function"><span class="title">ookie</span>-&gt;</span>write(<span class="string">'name'</span>, <span class="string">'Larry'</span>);</span><br><span class="line">$<span class="function"><span class="title">this</span>-&gt;</span>C<span class="function"><span class="title">ookie</span>-&gt;</span>write(<span class="string">'User'</span>,</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Larry'</span>, <span class="string">'role'</span> =&gt; <span class="string">'Lead'</span>]</span><br><span class="line">);</span><br><span class="line">$<span class="function"><span class="title">this</span>-&gt;</span>C<span class="function"><span class="title">ookie</span>-&gt;</span>configKey(<span class="string">'User'</span>, <span class="string">'encryption'</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="comment">//读取cookie</span></span><br><span class="line">$<span class="function"><span class="title">this</span>-&gt;</span>C<span class="function"><span class="title">ookie</span>-&gt;</span>read(<span class="string">'User'</span>);</span><br><span class="line"><span class="comment">//删除cookie</span></span><br><span class="line">$<span class="function"><span class="title">this</span>-&gt;</span>C<span class="function"><span class="title">ookie</span>-&gt;</span>delete(<span class="string">'foo.bar'</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>Paginator分页</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticlesController</span> <span class="keyword">extends</span> <span class="title">AppController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $paginate = [</span><br><span class="line">        <span class="string">'fields'</span> =&gt; [<span class="string">'Articles.id'</span>, <span class="string">'Articles.created'</span>],</span><br><span class="line">        <span class="string">'conditions'</span> =&gt; $conditions,</span><br><span class="line">        <span class="string">'limit'</span> =&gt; <span class="number">25</span>,</span><br><span class="line">        <span class="string">'order'</span> =&gt; [</span><br><span class="line">            <span class="string">'Articles.title'</span> =&gt; <span class="string">'asc'</span></span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">initialize</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">parent</span>::initialize();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;loadComponent(<span class="string">'Paginator'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> $conditions = <span class="keyword">$this</span>-&gt;_filter(<span class="keyword">$this</span>-&gt;request-&gt;query, $depts);</span><br><span class="line"> <span class="keyword">$this</span>-&gt;paginate = <span class="keyword">array</span>(</span><br><span class="line">     <span class="string">'paramType'</span> =&gt; <span class="string">'querystring'</span>,</span><br><span class="line">     <span class="string">'conditions'</span> =&gt; $conditions,</span><br><span class="line">     <span class="string">'limit'</span> =&gt; <span class="number">15</span>,</span><br><span class="line">      <span class="string">'order'</span> =&gt; <span class="string">'MonthlyTarget.id DESC'</span></span><br><span class="line"> );</span><br></pre></td></tr></table></figure></li>
<li><p>前端视图页面</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">三部分组成</span><br><span class="line">布局：</span><br><span class="line">布局文件存放在<span class="regexp">/app/</span>views/layouts 目录中。可以通过创建</span><br><span class="line"><span class="regexp">/app/</span>views<span class="regexp">/layouts/</span><span class="keyword">default</span>.ctp 文件来覆盖 CakePHP 的默认布局。一旦新的默认布局被创</span><br><span class="line">建，控制器显示的视图代码就会被放到新的布局中去。</span><br><span class="line"></span><br><span class="line">元素:重复使用的代码块</span><br><span class="line"></span><br><span class="line">助手</span><br></pre></td></tr></table></figure></li>
<li><p>cakephp 关联关系<br><a href="https://www.php1.cn/detail/CakePHP_GuanLianGuanXi.html" target="_blank" rel="noopener">cakephp 关联关系理解</a></p>
</li>
</ul>
<h5 id="window环境下使用cake-bake-生成-M-V-C-文件"><a href="#window环境下使用cake-bake-生成-M-V-C-文件" class="headerlink" title="window环境下使用cake bake  生成 M V C 文件"></a>window环境下使用cake bake  生成 M V C 文件</h5><h6 id="确定console文件位置"><a href="#确定console文件位置" class="headerlink" title="确定console文件位置"></a>确定console文件位置</h6><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Uad7d955d00d549558b2e2c8896daa31cA.jpg" alt=""></p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line">遇到问题</span><br><span class="line">需要配置系统环境变量</span><br><span class="line"><span class="symbol">cake</span> <span class="keyword">bake </span> 和php</span><br><span class="line">配置完成后重新打开命令行---&gt;我使用git <span class="keyword">bash</span></span><br><span class="line"><span class="keyword">运行 </span>php -v看是否正常</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U5688b335edac4c6a8c2b5f3fc405a903G.jpg" alt=""></p>
<h5 id="生成对应的数据表MVC文件"><a href="#生成对应的数据表MVC文件" class="headerlink" title="生成对应的数据表MVC文件"></a>生成对应的数据表MVC文件</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U7239a938fd914f3f817071548f89191f4.jpg" alt=""></p>
<h5 id="常用的Model的方法"><a href="#常用的Model的方法" class="headerlink" title="常用的Model的方法"></a>常用的Model的方法</h5><h6 id="查询方法："><a href="#查询方法：" class="headerlink" title="查询方法："></a>查询方法：</h6><p><a href="https://book.cakephp.org/2.0/zh/models/retrieving-your-data.html" target="_blank" rel="noopener">具体介绍</a></p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="builtin-name">find</span>( string <span class="variable">$type</span> = <span class="string">'first'</span> , array <span class="variable">$query</span> = array() )</span><br><span class="line"><span class="builtin-name">find</span>(<span class="string">'first'</span>);</span><br><span class="line">返回一个结果，你可以在任何期望获得一个结果的情况下使用它</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">find</span>(<span class="string">'list'</span>); </span><br><span class="line">使用<span class="builtin-name">find</span>(<span class="string">'list'</span>)返回的是键值对的数组,快速实现下拉菜单,合并成为一个数组</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">find</span>(<span class="string">'all'</span>);</span><br><span class="line">返回一个数组，可能包含多个结果</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">find</span>(<span class="string">'count'</span>);</span><br><span class="line">返回一个整数值</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">find</span>(<span class="string">'threaded'</span>);</span><br><span class="line">返回一个嵌套数组，适用于想使用模型数据的 parent_id 字段来建立嵌套结果的情况。</span><br><span class="line">更好的处理嵌套的数据 使用tree行为。</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">find</span>(<span class="string">'neighbors'</span>);</span><br><span class="line">返回查询的记录的 前一条和后一条记录 类似first</span><br><span class="line">findByxx();</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line"><span class="variable">$model</span>-&gt;<span class="builtin-name">find</span>(<span class="string">'all'</span>, array(</span><br><span class="line">  <span class="string">'conditions'</span> =&gt; array(<span class="string">'name'</span> =&gt; <span class="string">'Thomas Anderson'</span>),</span><br><span class="line">  <span class="string">'fields'</span> =&gt; array(<span class="string">'name'</span>, <span class="string">'email'</span>),</span><br><span class="line">  <span class="string">'order'</span> =&gt; <span class="string">'field3 DESC'</span>,</span><br><span class="line">  <span class="string">'recursive'</span> =&gt; 1,</span><br><span class="line">  <span class="string">'group'</span> =&gt; <span class="string">'type'</span>,</span><br><span class="line">  <span class="string">'callbacks'</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<h6 id="保存方法："><a href="#保存方法：" class="headerlink" title="保存方法："></a>保存方法：</h6><p><a href="https://book.cakephp.org/2.0/zh/models/saving-your-data.html" target="_blank" rel="noopener">具体介绍</a></p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">Model::save();保存数组格式的数据</span><br><span class="line"></span><br><span class="line">Model::saveAll();</span><br><span class="line">saveAll 函数只是 saveMany 方法和 saveAssociated 方法的包装。</span><br><span class="line">它会检查 数据并且决定应当执行哪种类型的保存。</span><br><span class="line">如果数据是数字索引数组的格式，就会调用 saveMany 方法，否则调用 saveAssociated 方法。</span><br><span class="line"></span><br><span class="line">Model::create();保存新数据重置模型的状态</span><br><span class="line">Model::saveField();保存单个字段的值</span><br><span class="line">Model::updateAll();用一次调用更新一条或多条记录</span><br><span class="line">Model::saveMany();用于同时保存同一模型的多行</span><br><span class="line">Model::saveAssociated();用于同时保存多个模型关联</span><br><span class="line"><span class="variable">$this</span>-&gt;MonthlyTarget-&gt;save(<span class="variable">$this</span>-&gt;request-&gt;data)</span><br></pre></td></tr></table></figure>
<h6 id="关联模型"><a href="#关联模型" class="headerlink" title="关联模型"></a>关联模型</h6><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Controller::loadModel(string $modelClass, mixed $id)</span><br><span class="line">当要使用的模型不是控制器的缺省模型或者关联模型</span><br><span class="line"><span class="keyword">$this</span>-&gt;loadModel(<span class="string">'Article'</span>);</span><br><span class="line">$recentArticles = <span class="keyword">$this</span>-&gt;Article-&gt;find(</span><br><span class="line">    <span class="string">'all'</span>,</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'limit'</span> =&gt; <span class="number">5</span>, <span class="string">'order'</span> =&gt; <span class="string">'Article.created DESC'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">$this</span>-&gt;loadModel(<span class="string">'User'</span>, <span class="number">2</span>);</span><br><span class="line">$user = <span class="keyword">$this</span>-&gt;User-&gt;read();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>cakephp</category>
      </categories>
      <tags>
        <tag>cakephp</tag>
      </tags>
  </entry>
  <entry>
    <title>Swoole编译安装和TP5接入使用等问题</title>
    <url>/posts/5d473dd.html</url>
    <content><![CDATA[<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="http://noobcourse.php20.cn/NoobCourse/Introduction.html" alt="swoole新手入门手册"></p>
<div class="note success">
            <p>Swoole编译安装和TP5接入使用等问题</p>
          </div>

<div class="note danger">
            <p>以下是通过PHP7.2.23和Swoole4.4.9安装编译遇到的问题！<br>PHP7.2.23安装路径/home/var/www/soft/php<br>swoole 编译安装目录 /home/var/www/soft/php/lib/php/extensions</p>
          </div>

<h4 id="记住以下两个命令"><a href="#记住以下两个命令" class="headerlink" title="记住以下两个命令"></a>记住以下两个命令</h4><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">查看PHP扩展</span></span><br><span class="line"><span class="attr">php</span> <span class="string">-m</span></span><br><span class="line"><span class="attr">查看swoole扩展</span></span><br><span class="line"><span class="attr">php</span> <span class="string">--ri swoole</span></span><br><span class="line"><span class="attr">查找文件</span></span><br><span class="line"><span class="attr">find</span> <span class="string">/|grep 文件名</span></span><br><span class="line"></span><br><span class="line"><span class="attr">杀死进程</span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlp 查看占用端口号的服务 </span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlp | grep :3306  用管道符给grep处理 只查看3306这个端口号</span></span><br><span class="line"><span class="attr">nestat</span> <span class="string">-anp | grep :3306</span></span><br><span class="line"><span class="attr">kill</span> <span class="string">-9 pid[端口号进程ID]</span></span><br></pre></td></tr></table></figure>

<h4 id="在Linux下，编译安装PHP时报错libxml2-configure-error"><a href="#在Linux下，编译安装PHP时报错libxml2-configure-error" class="headerlink" title="在Linux下，编译安装PHP时报错libxml2 configure: error"></a>在Linux下，编译安装PHP时报错libxml2 configure: error</h4><figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">在Linux下，编译安装PHP时报错：</span><br><span class="line">libxml2 configure: error: xml2-config<span class="built_in"> not </span>found. </span><br><span class="line">Please<span class="built_in"> check </span>your libxml2 installation.</span><br><span class="line"></span><br><span class="line">但是在Linux下已经安装了libxml2，</span><br><span class="line">我通过rpm -qa | grep libxml2就可以查到，那为什么还会提示那个错误呢</span><br><span class="line"></span><br><span class="line">解决方法：</span><br><span class="line">安装的版本应该是libxml2-dev</span><br><span class="line">1.ubuntu/debian镜像:</span><br><span class="line">sudo apt-get install libxml2-dev</span><br><span class="line"></span><br><span class="line">centos/redhat镜像:</span><br><span class="line">2.sudo yum install libxml2-devel</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/7xPR6FVoQHyE2Wt.png" alt="image.png"></p>
<h4 id="解决PHP-7编译安装错误：cannot-stat-‘phar-phar’-No-such-file-or-directory，主要包括解决PHP-7编译安装错误：cannot-stat-‘phar-phar’-No-such-file-or-directory"><a href="#解决PHP-7编译安装错误：cannot-stat-‘phar-phar’-No-such-file-or-directory，主要包括解决PHP-7编译安装错误：cannot-stat-‘phar-phar’-No-such-file-or-directory" class="headerlink" title="解决PHP 7编译安装错误：cannot stat ‘phar.phar’: No such file or directory，主要包括解决PHP 7编译安装错误：cannot stat ‘phar.phar’: No such file or directory"></a>解决PHP 7编译安装错误：cannot stat ‘phar.phar’: No such file or directory，主要包括解决PHP 7编译安装错误：cannot stat ‘phar.phar’: No such file or directory</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">cp -pR -f phar.phar /usr/local/php7/bin/phar</span><br><span class="line">cp: cannot stat <span class="string">'phar.phar'</span>: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">make: *** [install-pharcmd] <span class="builtin-name">Error</span> 1</span><br><span class="line">解决办法</span><br><span class="line"><span class="builtin-name">find</span> . -name <span class="string">'phar.phar'</span></span><br><span class="line">找到 phar.phar 文件, 移动或者复制到安装指令执行的目录下就行了.</span><br></pre></td></tr></table></figure>
<h4 id="执行phpize进行扩展PHP扩展模块出现以下问题"><a href="#执行phpize进行扩展PHP扩展模块出现以下问题" class="headerlink" title="执行phpize进行扩展PHP扩展模块出现以下问题"></a>执行phpize进行扩展PHP扩展模块出现以下问题</h4><p>phpize：增加php扩展服务</p>
<figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">[vagrant@bogon swoole]$ /home/var/www/soft/php/bin/phpize</span><br><span class="line">Configuring for:</span><br><span class="line">PHP Api Version:         20170718</span><br><span class="line">Zend Module Api No:      20170718</span><br><span class="line">Zend Extension Api No:   320170718</span><br><span class="line">Cannot find autoconf. Please<span class="built_in"> check </span>your autoconf installation<span class="built_in"> and </span>the</span><br><span class="line">$PHP_AUTOCONF environment variable. Then, rerun this script.</span><br><span class="line">解决方法：</span><br><span class="line">sudo yum install autoconf</span><br></pre></td></tr></table></figure>
<h4 id="添加到系统环境变量"><a href="#添加到系统环境变量" class="headerlink" title="添加到系统环境变量"></a>添加到系统环境变量</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">解决php -v查看到版本于phpinfo()打印的版本不一致问题</span><br><span class="line"></span><br><span class="line">查看执行那个php.ini</span><br><span class="line">php -i | grep php.ini</span><br><span class="line"></span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=执行php路径:$PATH</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=/www/server/php/70/bin:$PATH</span><br><span class="line"></span><br><span class="line">保存退出</span><br><span class="line">source /etc/profile</span><br><span class="line">2.</span><br><span class="line">宝塔面板：</span><br><span class="line">删除先前存在文件</span><br><span class="line">rm-f /usr/bin/php</span><br><span class="line">默认版本改成72</span><br><span class="line">ln -sf /www/server/php/72/bin/php /usr/bin/php</span><br></pre></td></tr></table></figure>
<h4 id="执行将swoole扩展模块添加到PHP7扩展"><a href="#执行将swoole扩展模块添加到PHP7扩展" class="headerlink" title="执行将swoole扩展模块添加到PHP7扩展"></a>执行将swoole扩展模块添加到PHP7扩展</h4><figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">linux下执行以下命令</span><br><span class="line">解压完成后</span><br><span class="line">进入 swoole解压目录  </span><br><span class="line">cd swoole </span><br><span class="line">执行 /www/server/php/72/bin/phpize</span><br><span class="line"><span class="keyword">.</span>/configure  --with-php-config= /www/server/php/72/bin/php-config</span><br><span class="line"></span><br><span class="line">报错：</span><br><span class="line">configure: error: C++ preprocessor <span class="string">"/lib/cpp"</span> fails sanity check</span><br><span class="line">解决方法：</span><br><span class="line"> yum install glibc-headers</span><br><span class="line"> yum install gcc-c++</span><br><span class="line"></span><br><span class="line">3.编译：make</span><br><span class="line">4.执行make install </span><br><span class="line">5.查看swoole </span><br><span class="line">php -m</span><br><span class="line">php --ri swoole</span><br><span class="line">找到PHP版本的php.ini文件添加  --&gt;查看执行那个PHP.ini文件====&gt;php -i | grep php.ini</span><br><span class="line">extension=swoole</span><br></pre></td></tr></table></figure>
<h4 id="执行make-install出现权限不足"><a href="#执行make-install出现权限不足" class="headerlink" title="执行make install出现权限不足"></a>执行make install出现权限不足</h4><figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">出现权限不足：</span><br><span class="line">Installing shared <span class="symbol">extensions:</span> /www/server/php/<span class="number">72</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span></span></span><br><span class="line">/no-debug-non-zts-<span class="number">20170718</span>/<span class="symbol">cp:</span>cannot create regular file </span><br><span class="line"><span class="string">'/home/var/www/soft/php/lib/php/extensions/no-debug-non-zts-20170718/#INST@29034#'</span>: </span><br><span class="line">Permission denied</span><br><span class="line"></span><br><span class="line">解决方法：</span><br><span class="line">sudo chmod <span class="number">777</span> /home/var/www/soft/php/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20170718/</span></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/zxl8PSXJQ5kANHG.png" alt="image.png"></p>
<h4 id="telnet-command-not-found-服务不存在"><a href="#telnet-command-not-found-服务不存在" class="headerlink" title="telnet: command not found 服务不存在"></a>telnet: command not found 服务不存在</h4><p><a href="https://blog.csdn.net/qq_38018165/article/details/89919556" target="_blank" rel="noopener">安装Telnet</a></p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">[<span class="symbol">vagrant@</span>localhost ~]$ telnet <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">9501</span></span><br><span class="line">-bash: telnet: command <span class="keyword">not</span> found</span><br><span class="line">解决办法</span><br><span class="line">yum list telnet*              列出telnet相关的安装包</span><br><span class="line">yum install telnet-server          安装telnet服务</span><br><span class="line">yum install telnet.*           安装telnet客户端</span><br></pre></td></tr></table></figure>
<h4 id="使用Xftp上传本地文件到centos上，传输文件类型显示错误"><a href="#使用Xftp上传本地文件到centos上，传输文件类型显示错误" class="headerlink" title="使用Xftp上传本地文件到centos上，传输文件类型显示错误"></a>使用Xftp上传本地文件到centos上，传输文件类型显示错误</h4><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">更改文件权限 </span><br><span class="line">chmod <span class="number">777</span>  dir【文件/文件夹名称】</span><br></pre></td></tr></table></figure>

<h4 id="安装使用异步redis前置条件"><a href="#安装使用异步redis前置条件" class="headerlink" title="安装使用异步redis前置条件"></a>安装使用异步redis前置条件</h4><p>1.安装redis服务<br>2.安装hiredis库<br>3.重新编译swoole<br><a href="https://wiki.swoole.com/wiki/index/prid-1" target="_blank" rel="noopener">参考官网手册</a></p>
<h4 id="安装redis服务"><a href="#安装redis服务" class="headerlink" title="安装redis服务"></a>安装redis服务</h4><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line">官网下载redis包</span><br><span class="line">进行编译 make</span><br><span class="line">进入该目录中src 启动redis服务</span><br><span class="line">[root@bogon src] ./redis-server</span><br><span class="line">Increased maximum number of open files to <span class="number">10032</span> (it was originally <span class="keyword">set</span> to <span class="number">1024</span>).</span><br><span class="line">                <span class="literal">_</span>.<span class="literal">_</span>                                                  </span><br><span class="line">           <span class="literal">_</span>.-``__ <span class="string">''</span>-.<span class="literal">_</span>                                             </span><br><span class="line">      <span class="literal">_</span>.-``    `.  `<span class="literal">_</span>.  <span class="string">''</span>-.<span class="literal">_</span>           Redis <span class="number">5.0</span><span class="number">.5</span> (<span class="number">00000000</span>/<span class="number">0</span>) <span class="number">64</span> bit</span><br><span class="line">  .-`` .-```.  ```\/    <span class="literal">_</span>.,<span class="literal">_</span> <span class="string">''</span>-.<span class="literal">_</span>                                   </span><br><span class="line"> (    <span class="string">'      ,       .-`  | `,    )     Running in standalone mode</span></span><br><span class="line"><span class="string"> |`-._`-...-` __...-.``-._|'</span>` <span class="literal">_</span>.-<span class="string">'|     Port: 6379</span></span><br><span class="line"><span class="string"> |    `-._   `._    /     _.-'</span>    |     PID: <span class="type">9267</span></span><br><span class="line"><span class="type">  </span>`-.<span class="literal">_</span>    `-.<span class="literal">_</span>  `-./  <span class="literal">_</span>.-<span class="string">'    _.-'</span>                                   </span><br><span class="line"> |`-.<span class="literal">_</span>`-.<span class="literal">_</span>    `-.__.-<span class="string">'    _.-'</span><span class="literal">_</span>.-<span class="string">'|                                  </span></span><br><span class="line"><span class="string"> |    `-._`-._        _.-'</span><span class="literal">_</span>.-<span class="string">'    |           http://redis.io        </span></span><br><span class="line"><span class="string">  `-._    `-._`-.__.-'</span><span class="literal">_</span>.-<span class="string">'    _.-'</span>                                   </span><br><span class="line"> |`-.<span class="literal">_</span>`-.<span class="literal">_</span>    `-.__.-<span class="string">'    _.-'</span><span class="literal">_</span>.-<span class="string">'|                                  </span></span><br><span class="line"><span class="string"> |    `-._`-._        _.-'</span><span class="literal">_</span>.-<span class="string">'    |                                  </span></span><br><span class="line"><span class="string">  `-._    `-._`-.__.-'</span><span class="literal">_</span>.-<span class="string">'    _.-'</span>                                   </span><br><span class="line">      `-.<span class="literal">_</span>    `-.__.-<span class="string">'    _.-'</span>                                       </span><br><span class="line">          `-.<span class="literal">_</span>        <span class="literal">_</span>.-<span class="string">'</span></span><br></pre></td></tr></table></figure>
<h4 id="安装hiredis库并重新编译swoole"><a href="#安装hiredis库并重新编译swoole" class="headerlink" title="安装hiredis库并重新编译swoole"></a>安装hiredis库并重新编译swoole</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">下载hiredis包:http<span class="variable">s:</span>//github.<span class="keyword">com</span>/redis/hiredis/releases</span><br><span class="line">解压hiredis包</span><br><span class="line"><span class="keyword">cd</span> 进入该目录  执行sudo <span class="keyword">make</span> -<span class="keyword">j</span></span><br><span class="line">执行sudo <span class="keyword">make</span> install</span><br><span class="line">执行sudo ldconfig</span><br><span class="line"><span class="keyword">cd</span> 进入swoole安装位置</span><br><span class="line"></span><br><span class="line">执行以下命令</span><br><span class="line">./configure --with-php-config=/home/var/www/soft/php/bin/php-config</span><br><span class="line">清除先前编译缓存</span><br><span class="line"><span class="keyword">make</span> clean</span><br><span class="line"><span class="keyword">make</span> install</span><br><span class="line">查看swoole扩展和redis扩展有没有安装成功</span><br><span class="line">php -<span class="keyword">m</span>  存在扩展</span><br><span class="line">php --<span class="keyword">ri</span> swoole  存在acry_redis</span><br></pre></td></tr></table></figure>



<h3 id="更改web服务器为Nginx"><a href="#更改web服务器为Nginx" class="headerlink" title="更改web服务器为Nginx"></a>更改web服务器为Nginx</h3><h4 id="Linux安装Nginx报错make-No-targets-specified-and-no-makefile-found-Stop-解决方法"><a href="#Linux安装Nginx报错make-No-targets-specified-and-no-makefile-found-Stop-解决方法" class="headerlink" title="Linux安装Nginx报错make: *** No targets specified and no makefile found. Stop.解决方法"></a>Linux安装Nginx报错make: *** No targets specified and no makefile found. Stop.解决方法</h4><figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">以下是在依赖包安装好前提下：</span><br><span class="line">先运行./configure，生成makefile，再执行<span class="built_in">make</span>，即可正常运行</span><br></pre></td></tr></table></figure>
<h4 id="nginx大致安装过程"><a href="#nginx大致安装过程" class="headerlink" title="nginx大致安装过程"></a>nginx大致安装过程</h4><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">一.</span> <span class="string">gcc 安装</span></span><br><span class="line"><span class="meta">安装</span> <span class="string">nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境，</span></span><br><span class="line"><span class="meta">如果没有</span> <span class="string">gcc 环境，则需要安装：</span></span><br><span class="line"></span><br><span class="line"><span class="attr">yum</span> <span class="string">install gcc-c++</span></span><br><span class="line"></span><br><span class="line"><span class="meta">二.</span> <span class="string">PCRE pcre-devel 安装</span></span><br><span class="line"><span class="meta">PCRE(Perl</span> <span class="string">Compatible Regular Expressions) 是一个Perl库，包括 perl 兼容的正则表达式库。</span></span><br><span class="line"><span class="attr">nginx</span> <span class="string">的 http 模块使用 pcre 来解析正则表达式，所以需要在 linux 上安装 pcre 库，</span></span><br><span class="line"><span class="meta">pcre-devel</span> <span class="string">是使用 pcre 开发的一个二次开发库。nginx也需要此库。命令：</span></span><br><span class="line"></span><br><span class="line"><span class="attr">yum</span> <span class="string">install -y pcre pcre-devel</span></span><br><span class="line"></span><br><span class="line"><span class="meta">三.</span> <span class="string">zlib 安装</span></span><br><span class="line"><span class="attr">zlib</span> <span class="string">库提供了很多种压缩和解压缩的方式，</span></span><br><span class="line"><span class="attr">nginx</span> <span class="string">使用 zlib 对 http 包的内容进行 gzip ，所以需要在 Centos 上安装 zlib 库。</span></span><br><span class="line"></span><br><span class="line"><span class="attr">yum</span> <span class="string">install -y zlib zlib-devel</span></span><br><span class="line"></span><br><span class="line"><span class="meta">四.</span> <span class="string">OpenSSL 安装</span></span><br><span class="line"><span class="attr">OpenSSL</span> <span class="string">是一个强大的安全套接字层密码库，</span></span><br><span class="line"><span class="meta">囊括主要的密码算法、常用的密钥和证书封装管理功能及</span> <span class="string">SSL 协议，</span></span><br><span class="line"><span class="attr">并提供丰富的应用程序供测试或其它目的使用。</span></span><br><span class="line"><span class="attr">nginx</span> <span class="string">不仅支持 http 协议，还支持 https（即在ssl协议上传输http），</span></span><br><span class="line"><span class="meta">所以需要在</span> <span class="string">Centos 安装 OpenSSL 库。</span></span><br><span class="line"></span><br><span class="line"><span class="attr">yum</span> <span class="string">install -y openssl openssl-devel</span></span><br><span class="line"></span><br><span class="line"><span class="attr">以上依赖包已安装完成</span></span><br><span class="line"></span><br><span class="line"><span class="meta">在根目录下进行安装【查看当前目录路径</span>   <span class="string">pwd】</span></span><br><span class="line"><span class="attr">/root</span></span><br><span class="line"><span class="attr">下载包</span></span><br><span class="line"><span class="attr">wget</span> <span class="string">-c https://nginx.org/download/nginx-1.12.0.tar.gz</span></span><br><span class="line"><span class="attr">解压包</span></span><br><span class="line"><span class="attr">tar</span> <span class="string">-zxvf nginx-1.12.0.tar.gz</span></span><br><span class="line"><span class="attr">cd</span> <span class="string">nginx-1.12.0</span></span><br><span class="line"><span class="attr">生成配置文件</span></span><br><span class="line"><span class="attr">./configure</span></span><br><span class="line"><span class="attr">编译</span></span><br><span class="line"><span class="attr">make</span></span><br><span class="line"><span class="attr">编译安装</span></span><br><span class="line"><span class="attr">make</span> <span class="string">install</span></span><br><span class="line"><span class="attr">查看安装路径</span></span><br><span class="line"><span class="attr">whereis</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure>

<h4 id="使用高版本的swoole-4-4-9-协程Coroutine进行异步文件和异步数据库操作"><a href="#使用高版本的swoole-4-4-9-协程Coroutine进行异步文件和异步数据库操作" class="headerlink" title="使用高版本的swoole 4.4.9 协程Coroutine进行异步文件和异步数据库操作"></a>使用高版本的swoole 4.4.9 协程Coroutine进行异步文件和异步数据库操作</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查看swoole版本  php --ri swoole</span></span><br><span class="line"><span class="comment">// 异步文件系统仅限于4.3.0之前的版本，后续版本已经全面使用协程（coroutine）代替原有方案，</span></span><br><span class="line"><span class="comment">//具体参见：Coroutine模块</span></span><br><span class="line"><span class="comment">//以下针对是4.3.0以下swoole的版本</span></span><br><span class="line"><span class="comment">//本次安装的swoole是4.4.9</span></span><br><span class="line"></span><br><span class="line"> 使用协程进行连接Mysql</span><br><span class="line"><span class="comment">// 第一种写法create缩写</span></span><br><span class="line"><span class="comment">// go() 是 Swoole\Coroutine::create() 的缩写</span></span><br><span class="line">go(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//以下实例化都可以</span></span><br><span class="line">    $db =<span class="keyword">new</span> Co\MySQL();</span><br><span class="line">    <span class="comment">// $db = new Swoole\Coroutine\MySQL();</span></span><br><span class="line">    $server = [</span><br><span class="line">        <span class="string">'host'</span> =&gt; <span class="string">'主机地址'</span>,</span><br><span class="line">        <span class="string">'port'</span> =&gt; <span class="number">3306</span>,</span><br><span class="line">        <span class="string">'user'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">        <span class="string">'password'</span> =&gt; <span class="string">'密码'</span>,</span><br><span class="line">        <span class="string">'database'</span> =&gt; <span class="string">'swoole'</span>,</span><br><span class="line">        <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>, <span class="comment">//指定字符集</span></span><br><span class="line">    ];</span><br><span class="line">    $res = $db-&gt;connect($server);</span><br><span class="line">    <span class="comment">// var_dump($res);</span></span><br><span class="line">    $result = $db-&gt;query(<span class="string">'SELECT * FROM test'</span>);</span><br><span class="line">    <span class="comment">// var_dump($result);</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 第二种写法</span></span><br><span class="line">Co::create(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// $swoole_mysql = new Swoole\Coroutine\MySQL();</span></span><br><span class="line">    $swoole_mysql =<span class="keyword">new</span> Co\MySQL();</span><br><span class="line">    $server = [</span><br><span class="line">        <span class="string">'host'</span> =&gt; <span class="string">'主机地址'</span>,</span><br><span class="line">        <span class="string">'port'</span> =&gt; <span class="number">3306</span>,</span><br><span class="line">        <span class="string">'user'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">        <span class="string">'password'</span> =&gt; <span class="string">'密码'</span>,</span><br><span class="line">        <span class="string">'database'</span> =&gt; <span class="string">'swoole'</span>,</span><br><span class="line">        <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>, <span class="comment">//指定字符集</span></span><br><span class="line">    ];</span><br><span class="line">    $res1 = $swoole_mysql-&gt;connect($server);</span><br><span class="line">    $res = $swoole_mysql-&gt;query(<span class="string">'select sleep(1)'</span>);</span><br><span class="line">    var_dump($res);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">协程异步文件操作：</span><br><span class="line"><span class="keyword">use</span> <span class="title">Swoole</span>\<span class="title">Coroutine</span>\<span class="title">System</span>;</span><br><span class="line">$SwooleReadFileName = <span class="keyword">__DIR__</span>.<span class="string">'/log.txt'</span>;</span><br><span class="line">go(<span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">($SwooleReadFileName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $r =  System::readFile($SwooleReadFileName);</span><br><span class="line">    var_dump($r);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$fp = fopen(<span class="keyword">__DIR__</span> . <span class="string">"/log.txt"</span>, <span class="string">"r"</span>);</span><br><span class="line">go(<span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">($fp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fseek($fp, <span class="number">1</span>);<span class="comment">//移动文件指针到指定位置</span></span><br><span class="line">    $r =  System::fread($fp);</span><br><span class="line">    var_dump($r);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="swoole中的task任务分发在TP5启用"><a href="#swoole中的task任务分发在TP5启用" class="headerlink" title="swoole中的task任务分发在TP5启用"></a>swoole中的task任务分发在TP5启用</h4><figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Server</span>-&gt;task方法</span><br><span class="line"></span><br><span class="line">使用<span class="built_in">Task</span>功能，必须先设置 task_worker_num，并且必须设置<span class="built_in">Server</span>的onTask和onFinish事件回调函数</span><br><span class="line"></span><br><span class="line">事件：</span><br><span class="line"><span class="built_in">set</span>配置项开启了 task_enable_coroutine</span><br><span class="line">参考：http.php文件</span><br></pre></td></tr></table></figure>
<h4 id="swoole中的redis在TP5启用set一直失败"><a href="#swoole中的redis在TP5启用set一直失败" class="headerlink" title="swoole中的redis在TP5启用set一直失败"></a>swoole中的redis在TP5启用set一直失败</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 启用redis协程服务</span></span><br><span class="line">go(<span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">($data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 使用命名空间 需要在swoole加\</span></span><br><span class="line">    $redis = <span class="keyword">new</span> \Swoole\Coroutine\Redis();</span><br><span class="line">    $redis-&gt;connect(config(<span class="string">'redis.host'</span>), config(<span class="string">'redis.port'</span>));</span><br><span class="line">    <span class="comment">// 缓存到redis 参数</span></span><br><span class="line">    $redis-&gt;set(Redis::smskey($data[<span class="string">'phone'</span>]), $data[<span class="string">'code'</span>]);</span><br><span class="line">    <span class="comment">// 验证码发送成功</span></span><br><span class="line">    <span class="keyword">return</span> Uitl::show(config(<span class="string">'code.success'</span>), <span class="string">'Verification code success to send'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">以上设置失效时间导致一直set失败或者是操作失误</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET KEY VALUE [EX seconds] [PX milliseconds] [NX|XX]</span><br><span class="line"> </span><br><span class="line">EX seconds − 设置指定的到期时间(以秒为单位)。</span><br><span class="line">PX milliseconds - 设置指定的到期时间(以毫秒为单位)。</span><br><span class="line">NX - 仅在键不存在时设置键。</span><br><span class="line">XX - 只有在键已存在时才设置。</span><br><span class="line">示例</span><br><span class="line"></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET mykey <span class="string">"redis"</span> EX <span class="number">60</span> NX</span><br><span class="line">OK</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Swoole</category>
      </categories>
      <tags>
        <tag>Swoole</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux IO模型</title>
    <url>/posts/8601bab2.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">IO 进程线程、同步异步、阻塞非阻塞、并发并行</blockquote>

<h4 id="用户空间和内核空间"><a href="#用户空间和内核空间" class="headerlink" title="用户空间和内核空间"></a>用户空间和内核空间</h4><ul>
<li>现代操作系统采用虚拟存储器, 那么对32位操作系统而言, 它的寻址空间(虚拟存储空间)为4G(2^32)<br>操作系统的核心是内核, 不同于普通的应用程序, 内核可以访问受保护的内存空间, 也拥有访问底层硬件设备的所有权限</li>
</ul>
<p>为了防止用户进程直接操作内核, 保证内核的安全</p>
<ul>
<li><p>操作系统：将虚拟空间分为：内核和用户</p>
</li>
<li><p>内核空间：对Linux系统而言, 将最高的1GB字节(从虚拟地址0xC0000000~0xFFFFFFFF), 供内核使用</p>
</li>
<li><p>用户空间：较低的3GB字节(从虚拟地址0x00000000~0xB0000000), 供各个进程使用</p>
</li>
</ul>
<p>Linux的一次IO操作，分为两个阶段： </p>
<ul>
<li><p>(1)内核空间准备数据</p>
</li>
<li><p>(2)将数据从内核空间缓冲区拷贝到用户空间缓冲区</p>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/duiying/img/master/LinuxIO.png" alt="IO操作过程"></p>
<h4 id="进程切换"><a href="#进程切换" class="headerlink" title="进程切换"></a>进程切换</h4><ul>
<li><p>什么是进程切换</p>
<p>为了控制进程的执行, 内核必须有能力挂起正在CPU上运行的进程, 并恢复以前挂起的某个进程的执行的行为。</p>
</li>
<li><p>什么是PCB（process controlle block）</p>
</li>
</ul>
<p>系统为了管理进程设置的一个专门的数据结构</p>
<p>PCB(进程控制块)是系统感知进程存在的唯一标志</p>
<ul>
<li>进程切换的过程</li>
</ul>
<ol>
<li>保存处理机上下文, 包括程序计数器和其他寄存器</li>
<li>更新PCB信息</li>
<li>将进程的PCB移入相应的队列, 如就绪、在某事件阻塞等队列</li>
<li>选择另一个进程执行, 并更新其PCB</li>
<li>更新内存管理的数据结构</li>
<li>恢复处理机上下文</li>
</ol>
<h4 id="进程阻塞"><a href="#进程阻塞" class="headerlink" title="进程阻塞"></a>进程阻塞</h4><p>正在执行的进程, 由于期待的某些事件未发生,<br>如请求资源失败、等待某种操作的完成、新数据尚未到达或无新工作做等,<br>则由系统自动执行阻塞原语(Block), 使自己由运行状态变为阻塞状态</p>
<ul>
<li>特征：</li>
</ul>
<ol>
<li>只有处于运行状态的进程(获得CPU), 才能被阻塞</li>
<li>进程的阻塞是进程自身的一种主动行为</li>
<li>当进程进入阻塞状态, 不占用CPU资源</li>
</ol>
<h4 id="文件描述符-file-descriptor"><a href="#文件描述符-file-descriptor" class="headerlink" title="文件描述符 file descriptor"></a>文件描述符 file descriptor</h4><p>每个进程在PCB中保存着一份文件描述符表, 文件描述符表中每一项都有一个指向已打开文件的指针<br>文件描述符表的索引就是文件描述符<br>当程序打开一个现有文件或者创建一个新文件时, 内核向进程返回一个文件描述符</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/duiying/img/master/linux-fd.png" alt="文件描述符"></p>
<p> <a href="https://www.cnblogs.com/mhq-martin/p/9035640.html" target="_blank" rel="noopener">15分钟读懂进程线程、同步异步、阻塞非阻塞、并发并行</a><br> <a href="https://mp.weixin.qq.com/s/WMi7LZj0bqXa72V9fRhwCA" target="_blank" rel="noopener">nginx、swoole高并发原理初探</a></p>
<h4 id="同步-异步关注的是消息通知的机制，而阻塞-非阻塞关注的是程序（线程）等待消息通知时的状态。"><a href="#同步-异步关注的是消息通知的机制，而阻塞-非阻塞关注的是程序（线程）等待消息通知时的状态。" class="headerlink" title="同步/异步关注的是消息通知的机制，而阻塞/非阻塞关注的是程序（线程）等待消息通知时的状态。"></a>同步/异步关注的是消息通知的机制，而阻塞/非阻塞关注的是程序（线程）等待消息通知时的状态。</h4><h4 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h4><p>就是我调用一个功能，该功能没有结束前，我死等结果。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">例如表单提交，没有返回结果之前，浏览器不能去执行其他的操作</span><br></pre></td></tr></table></figure>
<h4 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h4><p>我调用一个功能，不需要知道该功能结果，该功能有结果后通知我（回调通知）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">例如ajax发送请求，回调函数没有返回请求结果之前浏览器可以去执行其他操作</span><br></pre></td></tr></table></figure>
<h4 id="阻塞"><a href="#阻塞" class="headerlink" title="阻塞"></a>阻塞</h4><p>调用我（函数），我（函数）没有接收完数据或者没有得到结果之前，我不会返回。</p>
<a id="more"></a>
<h4 id="非阻塞"><a href="#非阻塞" class="headerlink" title="非阻塞"></a>非阻塞</h4><p>调用我（函数），我（函数）立即返回，通过状态、通知和回调来通知调用者。</p>
<p>同步IO和异步IO的区别就在于：数据拷贝的时候进程是否阻塞<br>阻塞IO和非阻塞IO的区别就在于：应用程序的调用是否立即返回</p>
<h4 id="linux的五种IO模型"><a href="#linux的五种IO模型" class="headerlink" title="linux的五种IO模型"></a>linux的五种IO模型</h4><ul>
<li>阻塞I/O（blocking I/O）</li>
<li>非阻塞I/O （nonblocking I/O</li>
<li>I/O复用(select 和poll)（I/O multiplexing） </li>
<li>信号驱动I/O （signal driven I/O (SIGIO)）</li>
<li>异步I/O （asynchronous I/O (the POSIX aio_functions)）<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">前<span class="number">4</span>种都是同步，最后一种才是异步</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>IO</category>
      </categories>
      <tags>
        <tag>IO阻塞线程同步</tag>
      </tags>
  </entry>
  <entry>
    <title>编译安装Mysql</title>
    <url>/posts/2ce8eb6c.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">编译安装Linux centos7 mysql数据库</blockquote>

<h4 id="1·下载官网压缩包安装前的准备"><a href="#1·下载官网压缩包安装前的准备" class="headerlink" title="1·下载官网压缩包安装前的准备"></a>1·下载官网压缩包安装前的准备</h4><h6 id="辨识标准"><a href="#辨识标准" class="headerlink" title="辨识标准"></a>辨识标准</h6><p><a href="https://blog.csdn.net/haopeng7816/article/details/83956679" target="_blank" rel="noopener">其他辨别方法链接</a></p>
 <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">PC<span class="built_in"> server </span>X86 系列</span><br><span class="line">I386--I686 都是32位</span><br><span class="line">x86_64 是 64位</span><br></pre></td></tr></table></figure>
<h6 id="查看linux系统版本32位还是64位"><a href="#查看linux系统版本32位还是64位" class="headerlink" title="查看linux系统版本32位还是64位"></a>查看linux系统版本32位还是64位</h6><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">我的本机是<span class="number">64</span>位的centos7系统</span><br><span class="line">查看命令:</span><br><span class="line">uname  -a</span><br><span class="line">getconf LONG_BIT</span><br><span class="line">内容显示:</span><br><span class="line">执行命令：uname  -a</span><br><span class="line">Linux bogon <span class="number">3.10</span><span class="number">.0</span><span class="number">-957.5</span><span class="number">.1</span>.el7.x86_64</span><br><span class="line">#<span class="number">1</span> SMP Fri Feb <span class="number">1</span> <span class="number">14</span>:<span class="number">54</span>:<span class="number">57</span> UTC <span class="number">2019</span> x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>

<a id="more"></a>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U6f9fe3774c9f436986f3b5058f8b89f2q.jpg" alt="查看linux系统位数"></p>
<h5 id="访问官网进入下载页面"><a href="#访问官网进入下载页面" class="headerlink" title="访问官网进入下载页面"></a>访问官网进入下载页面</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U7fa2f1a8f5764228b2caae42fadd6a37r.jpg" alt="访问官网进入下载页面"></p>
<h5 id="往下找到该位置-MySQL-Community-GPL-Downloads-»"><a href="#往下找到该位置-MySQL-Community-GPL-Downloads-»" class="headerlink" title="往下找到该位置 MySQL Community (GPL) Downloads »"></a>往下找到该位置 MySQL Community (GPL) Downloads »</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U37008da1ce7f4d9eabf03766a5842b01H.jpg" alt="MySQL Community (GPL) Downloads "></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U55a1160c3e4b4acba10244ba307ef2f2n.jpg" alt="找到community server"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Ufc6d932d3324449994cd987ffb40d7e7F.jpg" alt="从这边准确找你想要安装的mysql包"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Uc9785d0a3d1b456881d580938b47eeb4E.jpg" alt="下载对应系统包"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/Uc48b7f57d6984af1912a4fe0c0f95fe7z.jpg" alt="本次下载版本"></p>
<h5 id="解压过程中出现以下问题："><a href="#解压过程中出现以下问题：" class="headerlink" title="解压过程中出现以下问题："></a>解压过程中出现以下问题：</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">tar: Exiting <span class="keyword">with</span> <span class="keyword">failure</span> <span class="keyword">status</span> due <span class="keyword">to</span> previous <span class="keyword">errors</span></span><br><span class="line">网上概述说是没有sudo权限或者是没在其当前目录进行解压，经测试还是会出现这个问题!</span><br></pre></td></tr></table></figure>
<h5 id="于是尝试另外一种方法"><a href="#于是尝试另外一种方法" class="headerlink" title="于是尝试另外一种方法"></a>于是尝试另外一种方法</h5><h6 id="2-安装仓库源并选择对应版本进行安装！！！"><a href="#2-安装仓库源并选择对应版本进行安装！！！" class="headerlink" title="2.安装仓库源并选择对应版本进行安装！！！"></a>2.安装仓库源并选择对应版本进行安装！！！</h6><h5 id="参考步骤如下"><a href="#参考步骤如下" class="headerlink" title="参考步骤如下"></a>参考步骤如下</h5><p><a href="https://juejin.im/post/5c088b066fb9a049d4419985" target="_blank" rel="noopener">安装步骤链接</a></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">先检查系统是否装有mysql</span></span><br><span class="line"><span class="attr">rpm</span> <span class="string">-qa | grep mysql    返回空说明没有安装相关服务</span></span><br><span class="line"><span class="attr">注意：</span></span><br><span class="line"><span class="attr">yum</span> <span class="string">install mysql安装命令是无效的，</span></span><br><span class="line"><span class="attr">因为centos-7默认是Mariadb，所以执行以下命令只是更新Mariadb数据库</span></span><br></pre></td></tr></table></figure>
<h5 id="设置mysql-默认编码格式出现重启失败"><a href="#设置mysql-默认编码格式出现重启失败" class="headerlink" title="设置mysql 默认编码格式出现重启失败"></a>设置mysql 默认编码格式出现重启失败</h5><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">[root@bogon vagrant]#<span class="built_in"> service </span>mysqld restart</span><br><span class="line">Redirecting <span class="keyword">to</span> /bin/systemctl restart mysqld.service</span><br><span class="line">Job <span class="keyword">for</span> mysqld.service failed because the control process exited with <span class="builtin-name">error</span> code.</span><br><span class="line"> See <span class="string">"systemctl status mysqld.service"</span> <span class="keyword">and</span> <span class="string">"journalctl -xe"</span> <span class="keyword">for</span> details.</span><br><span class="line">解决：</span><br><span class="line">1，进入编辑my.cnf</span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">2，在[mysqld]   下边   添加以下内容</span><br><span class="line"><span class="attribute">character-set-server</span>=utf8</span><br><span class="line"><span class="attribute">init_connect</span>=<span class="string">'SET NAMES utf8'</span></span><br><span class="line">3，在[mysqld]    上边   添加以下内容</span><br><span class="line">[mysql]</span><br><span class="line"><span class="attribute">default-character-set</span>=utf8</span><br><span class="line">4，重启MySQL</span><br><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U2fc0ddd3312740e48ae47f888967e94dR.jpg" alt="解决后的截图"></p>
<h5 id="查看默认数据库密码"><a href="#查看默认数据库密码" class="headerlink" title="查看默认数据库密码"></a>查看默认数据库密码</h5><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sudo <span class="keyword">cat</span> /var/<span class="built_in">log</span>/mysqld.<span class="built_in">log</span> | <span class="keyword">grep</span> -i <span class="string">'temporary password'</span></span><br></pre></td></tr></table></figure>
<h5 id="查看数据库编码格式"><a href="#查看数据库编码格式" class="headerlink" title="查看数据库编码格式"></a>查看数据库编码格式</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%character%'</span>;</span><br></pre></td></tr></table></figure>
<h5 id="使用初始化密码进入数据库不能进行任何操作需修改原始密码"><a href="#使用初始化密码进入数据库不能进行任何操作需修改原始密码" class="headerlink" title="使用初始化密码进入数据库不能进行任何操作需修改原始密码"></a>使用初始化密码进入数据库不能进行任何操作需修改原始密码</h5><p>ALTER USER ‘root’@’localhost’ IDENTIFIED BY ‘new password’;<br>//以下命令是在有User表的情况下进行修改<br>UPDATE user SET Password = ‘new-password’ WHERE User = ‘root’;</p>
<p>！！！！出现以下错误:<br>mysql5.7默认安装了密码安全检查插件（validate_password），默认密码检查策略要求密码必须包含：<br>大小写字母、数字和特殊符号，并且长度不能少于8位.</p>
<h5 id="ALTER-USER-‘root’-’localhost’-IDENTIFIED-BY-‘Chewc10-14’"><a href="#ALTER-USER-‘root’-’localhost’-IDENTIFIED-BY-‘Chewc10-14’" class="headerlink" title="ALTER USER ‘root’@’localhost’ IDENTIFIED BY ‘Chewc10!14’;"></a>ALTER USER ‘root’@’localhost’ IDENTIFIED BY ‘Chewc10!14’;</h5><p>密码策略问题异常信息<br>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</p>
<h5 id="查看密码策略机制-需要重置原始密码"><a href="#查看密码策略机制-需要重置原始密码" class="headerlink" title="查看密码策略机制,需要重置原始密码"></a>查看密码策略机制,需要重置原始密码</h5><p>show variables like ‘%password%’;</p>
<p>navicat连接失败：<br>ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: YES)<br>密码错误</p>
<p><a href="https://blog.csdn.net/hello_world_qwp/article/details/79551789" target="_blank" rel="noopener">查看密码策略参考文章</a></p>
<h5 id="登录mysql命令"><a href="#登录mysql命令" class="headerlink" title="登录mysql命令"></a>登录mysql命令</h5><figure class="highlight haml"><table><tr><td class="code"><pre><span class="line">sudo  mysql -u root -p</span><br><span class="line">mysql常用选项</span><br><span class="line">    -<span class="ruby">u：指定用户</span></span><br><span class="line"><span class="ruby">    -p：密码</span></span><br><span class="line"><span class="ruby">    -h：一般用于远程登录，后面+服务器ip主机名</span></span><br><span class="line"><span class="ruby">    -P：+端口</span></span><br><span class="line"><span class="ruby">    -S：+套接字文件</span></span><br></pre></td></tr></table></figure>
<h5 id="忘记mysql数据库登录密码修改"><a href="#忘记mysql数据库登录密码修改" class="headerlink" title="忘记mysql数据库登录密码修改"></a>忘记mysql数据库登录密码修改</h5><p><a href="https://www.cnblogs.com/yanziwen/p/9215264.html" target="_blank" rel="noopener">centos7 忘记Mysql登录密码</a></p>
<h5 id="开启远程连接"><a href="#开启远程连接" class="headerlink" title="开启远程连接"></a>开启远程连接</h5><p><a href="https://blog.csdn.net/qq_39248703/article/details/88875174" target="_blank" rel="noopener">CentOS7 安装MySQL并开启远程连接</a></p>
<h5 id="MySQL导入sql文件，过大导致错误（2006-MySQL-server-has-gone-away）"><a href="#MySQL导入sql文件，过大导致错误（2006-MySQL-server-has-gone-away）" class="headerlink" title="MySQL导入sql文件，过大导致错误（2006 - MySQL server has gone away）"></a>MySQL导入sql文件，过大导致错误（2006 - MySQL server has gone away）</h5> <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">只对当前导入有效：</span><br><span class="line">查看通信缓冲区的最大长度：</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'max_allowed_packet'</span>;</span><br><span class="line"></span><br><span class="line">默认最大是1M，可以修改通信缓冲区的最大长度，修改为16M:</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> max_allowed_packet=<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">如果是想永久生效，可以修改配置文件，</span><br><span class="line">在my.ini（windows下）或者my.cnf（linux下）加入或修改配置：</span><br><span class="line">max_allowed_packet = 16M</span><br><span class="line"></span><br><span class="line">重启mysql</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql编译安装</tag>
      </tags>
  </entry>
  <entry>
    <title>归纳总结PHP面试(笔试)</title>
    <url>/posts/5c07421a.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">来自网络相关面试题(笔试题) </blockquote>

<h5 id="—PHP基础和进阶知识"><a href="#—PHP基础和进阶知识" class="headerlink" title="—PHP基础和进阶知识"></a>—PHP基础和进阶知识</h5><h6 id="超全局变量（8个）"><a href="#超全局变量（8个）" class="headerlink" title="超全局变量（8个）"></a>超全局变量（8个）</h6><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="variable">$_GET</span> -----&gt;get传送方式</span><br><span class="line"><span class="variable">$_POST</span> -----&gt;post传送方式</span><br><span class="line"><span class="variable">$_REQUEST</span> -----&gt;可以接收到get和post两种方式的值</span><br><span class="line"><span class="variable">$GLOBALS</span> -----&gt;所有的变量都放在里面</span><br><span class="line"><span class="variable">$_FILE</span> -----&gt;上传文件使用</span><br><span class="line"><span class="variable">$_SERVER</span> -----&gt;系统环境变量</span><br><span class="line"><span class="variable">$_SESSION</span> -----&gt;会话控制的时候会用到</span><br><span class="line"><span class="variable">$_COOKIE</span> -----&gt;会话控制的时候会用到</span><br></pre></td></tr></table></figure>
<h6 id="Include-require-include-once-require-once-的区别"><a href="#Include-require-include-once-require-once-的区别" class="headerlink" title="Include require include_once require_once 的区别."></a>Include require include_once require_once 的区别.</h6><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">处理失败方式不同：</span><br><span class="line"><span class="keyword">require</span> 失败时会产生一个致命级别错误，并停止程序运行。</span><br><span class="line"><span class="keyword">include</span> 失败时只产生一个警告级别错误，程序继续运行。</span><br><span class="line"><span class="keyword">include_once</span>/<span class="keyword">require_once</span>和<span class="keyword">include</span>/<span class="keyword">require</span> 处理错误方式一样，</span><br><span class="line">唯一区别在于当所包含的文件代码已经存在时候，不在包含。</span><br><span class="line">注意:包含文件不存在或者语法错误的时候<span class="keyword">require</span>是致命的，而<span class="keyword">include</span>不是</span><br><span class="line">  ● <span class="keyword">require_once</span>表示了只包含一次，避免了重复包含</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h6 id="echo、print-r、print、var-dump之间的区别"><a href="#echo、print-r、print、var-dump之间的区别" class="headerlink" title="echo、print_r、print、var_dump之间的区别"></a>echo、print_r、print、var_dump之间的区别</h6><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> echo、print是php语句，var_dump和print_r是函数</span><br><span class="line"><span class="number">2.</span>echo 输出一个或多个字符串，中间以逗号隔开，</span><br><span class="line">没有返回值是语言结构而不是真正的函数，因此不能作为表达式的一部分使用</span><br><span class="line"><span class="number">3.</span> print也是php的一个关键字，有返回值 只能打印出简单类型变量的值(如<span class="built_in">int</span>，<span class="built_in">string</span>)，</span><br><span class="line">如果字符串显示成功则返回<span class="literal">true</span>，否则返回<span class="literal">false</span></span><br><span class="line"><span class="number">4.</span>print_r 可以打印出复杂类型变量的值(如数组、对象）</span><br><span class="line">以列表的形式显示，并以<span class="built_in">array</span>、object开头，</span><br><span class="line">但print_r输出布尔值和NULL的结果没有意义，</span><br><span class="line">因为都是打印<span class="string">"\n"</span>，因此var_dump()函数更适合调试</span><br><span class="line"><span class="number">5.</span>var_dump() 判断一个变量的类型和长度，并输出变量的数值</span><br></pre></td></tr></table></figure>
<h5 id="说明php中传值与传引用的区别，并说明传值什么时候传引用？"><a href="#说明php中传值与传引用的区别，并说明传值什么时候传引用？" class="headerlink" title="说明php中传值与传引用的区别，并说明传值什么时候传引用？"></a>说明php中传值与传引用的区别，并说明传值什么时候传引用？</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">这意味着：当一个变量的赋予另外一个变量时，改变其中一个变量的值，将不会影响到另外一个变量</span><br><span class="line">php也提供了另外一种方式给变量赋值：引用赋值。</span><br><span class="line">这意味着新的变量简单的__引用__(换言之，成为了其别名或者指向)了原始变量。</span><br><span class="line">改动的新的变量将影响到原始变量，反之亦然。</span><br><span class="line">使用引用赋值，简单地将一个&amp;符号加到将要赋值的变量前(源变量)</span><br><span class="line">对象默认是传引用 对于较大是的数据，传引用比较好，这样可以节省内存的开销</span><br></pre></td></tr></table></figure>
<h6 id="用PHP打印出前一天的时间格式是2006-5-10-22-21-21"><a href="#用PHP打印出前一天的时间格式是2006-5-10-22-21-21" class="headerlink" title="用PHP打印出前一天的时间格式是2006-5-10 22:21:21"></a>用PHP打印出前一天的时间格式是2006-5-10 22:21:21</h6><figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">echo date('Y-m-d H<span class="symbol">:i</span><span class="symbol">:s</span>', strtotime('-1 day'))</span><br></pre></td></tr></table></figure>
<h6 id="实现中文字串截取无乱码的方法。"><a href="#实现中文字串截取无乱码的方法。" class="headerlink" title="实现中文字串截取无乱码的方法。"></a>实现中文字串截取无乱码的方法。</h6><figure class="highlight perl"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.--- mb_substr()</span><br><span class="line"><span class="number">2</span>.function GBsubstr($string, $start, $length) &#123;</span><br><span class="line">	<span class="keyword">if</span>(strlen($string)&gt;$length)&#123;</span><br><span class="line">		$str=null;</span><br><span class="line">		$len=$start+$length;</span><br><span class="line">		<span class="keyword">for</span>($i=$start;$i&lt;$len;$i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">ord</span>(<span class="keyword">substr</span>($string,$i,<span class="number">1</span>))&gt;<span class="number">0xa0</span>)&#123;</span><br><span class="line">			$str.=<span class="keyword">substr</span>($string,$i,<span class="number">2</span>);</span><br><span class="line">			$i++;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			$str.=<span class="keyword">substr</span>($string,$i,<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> $str.’…’;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> $string;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="如何用php的环境变量得到一个网页地址的内容？ip地址又要怎样得到？"><a href="#如何用php的环境变量得到一个网页地址的内容？ip地址又要怎样得到？" class="headerlink" title="如何用php的环境变量得到一个网页地址的内容？ip地址又要怎样得到？"></a>如何用php的环境变量得到一个网页地址的内容？ip地址又要怎样得到？</h6><figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line">$_SERVSR[‘REQUEST_URI’] , $_SERVER[‘REMOTE_ADDR’]</span><br></pre></td></tr></table></figure>
<h6 id="字符串翻转"><a href="#字符串翻转" class="headerlink" title="字符串翻转"></a>字符串翻转</h6><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">strrev函数</span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">strrev</span><span class="params">($str)</span>  </span></span><br><span class="line"><span class="function">   </span>&#123;  </span><br><span class="line">     $len=strlen($str);  </span><br><span class="line">       $newstr = <span class="string">''</span>;  </span><br><span class="line">    <span class="keyword">for</span>($i=$len;$i&gt;=<span class="number">0</span>;$i--)  </span><br><span class="line">       &#123;  </span><br><span class="line">          $newstr .= $str&#123;$i&#125;;  </span><br><span class="line">      &#125;  </span><br><span class="line">     <span class="keyword">return</span> $newstr;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h6 id="求两个日期的差数，例如2007-2-5-2007-3-6-的日期差数"><a href="#求两个日期的差数，例如2007-2-5-2007-3-6-的日期差数" class="headerlink" title="求两个日期的差数，例如2007-2-5 ~ 2007-3-6 的日期差数"></a>求两个日期的差数，例如2007-2-5 ~ 2007-3-6 的日期差数</h6><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">(strtotime(‘<span class="number">2007</span><span class="number">-3</span><span class="number">-6</span>’)-strtotime(‘<span class="number">2007</span><span class="number">-2</span><span class="number">-5</span>’))/<span class="number">3600</span>*<span class="number">24</span></span><br></pre></td></tr></table></figure>

<h5 id="—Mysql知识相关"><a href="#—Mysql知识相关" class="headerlink" title="—Mysql知识相关"></a>—Mysql知识相关</h5><h6 id="Mysql-的存储引擎-myisam和innodb的区别。"><a href="#Mysql-的存储引擎-myisam和innodb的区别。" class="headerlink" title="Mysql 的存储引擎,myisam和innodb的区别。"></a>Mysql 的存储引擎,myisam和innodb的区别。</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">a. MyISAM类型不支持事务处理等高级处理，而InnoDB类型支持.</span><br><span class="line">b. MyISAM类型的表强调的是性能，其执行数度比InnoDB类型更快.</span><br><span class="line">c. InnoDB不支持FULLTEXT类型的索引.</span><br><span class="line">d. InnoDB 中不保存表的具体行数，也就是说，</span><br><span class="line">执行<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> <span class="keyword">table</span>时，<span class="keyword">InnoDB</span>要扫描一遍整个表来计算有多少行，</span><br><span class="line">但是MyISAM只要简单的读出保存好的行数即可.</span><br><span class="line">e. 对于AUTO_INCREMENT类型的字段，<span class="keyword">InnoDB</span>中必须包含只有该字段的索引，</span><br><span class="line">但是在MyISAM表中，可以和其他字段一起建立联合索引。</span><br><span class="line">f. <span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">table</span>时，</span><br><span class="line"><span class="keyword">InnoDB</span>不会重新建立表，而是一行一行的删除。</span><br><span class="line">g. <span class="keyword">LOAD</span> <span class="keyword">TABLE</span> <span class="keyword">FROM</span> <span class="keyword">MASTER</span>操作对<span class="keyword">InnoDB</span>是不起作用的，</span><br><span class="line">解决方法是首先把<span class="keyword">InnoDB</span>表改成MyISAM表，导入数据后再改成<span class="keyword">InnoDB</span>表，</span><br><span class="line">但是对于使用的额外的<span class="keyword">InnoDB</span>特性(例如外键)的表不适用.</span><br><span class="line">h. MyISAM支持表锁，<span class="keyword">InnoDB</span>支持行锁。</span><br></pre></td></tr></table></figure>


<h6 id="优化数据库的方法"><a href="#优化数据库的方法" class="headerlink" title="优化数据库的方法"></a>优化数据库的方法</h6><p><a href="https://www.jianshu.com/p/dac715a88b44" target="_blank" rel="noopener">MySQL数据库优化的八种方式(经典必看)</a></p>
<figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line">● 选取最适用的字段属性，尽可能减少定义字段	宽度，尽量把字段设置NOTNULL，</span><br><span class="line">  例如<span class="string">'省份'</span>、<span class="string">'性别'</span>最好适用<span class="keyword">ENUM</span></span><br><span class="line">● 使用连接(<span class="keyword">JOIN</span>)来代替子查询</span><br><span class="line">● 适用联合(<span class="keyword">UNION</span>)来代替手动创建的临时表</span><br><span class="line">● 事务处理</span><br><span class="line">● 锁定表、优化事务处理</span><br><span class="line">● 适用外键，优化锁定表</span><br><span class="line">● 建立索引</span><br><span class="line">● 优化查询语句</span><br></pre></td></tr></table></figure>
<h5 id="写出三种以上MySQL数据库存储引擎的名称（提示：不区分大小写）"><a href="#写出三种以上MySQL数据库存储引擎的名称（提示：不区分大小写）" class="headerlink" title="写出三种以上MySQL数据库存储引擎的名称（提示：不区分大小写）"></a>写出三种以上MySQL数据库存储引擎的名称（提示：不区分大小写）</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MyISAM、InnoDB、</span><br><span class="line">BDB（Berkeley DB）、</span><br><span class="line"><span class="keyword">Merge</span>、<span class="keyword">Memory</span>（<span class="keyword">Heap</span>）、Example、Federated、<span class="keyword">Archive</span>、CSV、Blackhole、MaxDB 等等十几个引擎</span><br></pre></td></tr></table></figure>
<h6 id="说出你所知道的三种以上开源数据库的名称（提示：想想目前国外流行的开源数据库）"><a href="#说出你所知道的三种以上开源数据库的名称（提示：想想目前国外流行的开源数据库）" class="headerlink" title="说出你所知道的三种以上开源数据库的名称（提示：想想目前国外流行的开源数据库）"></a>说出你所知道的三种以上开源数据库的名称（提示：想想目前国外流行的开源数据库）</h6><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">MySQL</span>、SQLite、<span class="keyword">BDB（Berkeley </span>DB）、PostgreSQL、Firebird</span><br></pre></td></tr></table></figure>
<h6 id="MySQL数据库中的字段类型varchar和char的主要区别是什么？那种字段的查找效率要高，为什么"><a href="#MySQL数据库中的字段类型varchar和char的主要区别是什么？那种字段的查找效率要高，为什么" class="headerlink" title="MySQL数据库中的字段类型varchar和char的主要区别是什么？那种字段的查找效率要高，为什么?"></a>MySQL数据库中的字段类型varchar和char的主要区别是什么？那种字段的查找效率要高，为什么?</h6><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="type">Varchar</span>是变长，节省存储空间，<span class="type">char</span>是固定长度。查找效率要<span class="type">char</span>型快，因为<span class="type">varchar</span>是非定长，</span><br><span class="line">必须先查找长度，然后进行数据的提取，比<span class="type">char</span>定长类型多了一个步骤，所以效率低一些</span><br></pre></td></tr></table></figure>
<h5 id="—Nginx知识相关"><a href="#—Nginx知识相关" class="headerlink" title="—Nginx知识相关"></a>—Nginx知识相关</h5><h5 id="—Linux知识相关"><a href="#—Linux知识相关" class="headerlink" title="—Linux知识相关"></a>—Linux知识相关</h5><h5 id="—HTTP协议相关"><a href="#—HTTP协议相关" class="headerlink" title="—HTTP协议相关"></a>—HTTP协议相关</h5><h6 id="HTTP中POST、GET、PUT、DELETE方式的区别"><a href="#HTTP中POST、GET、PUT、DELETE方式的区别" class="headerlink" title="HTTP中POST、GET、PUT、DELETE方式的区别"></a>HTTP中POST、GET、PUT、DELETE方式的区别</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">HTTP定义了与服务器交互的不同的方法</span><br><span class="line">最基本的是POST、GET、PUT、<span class="keyword">DELETE</span>，与其比不可少的<span class="keyword">URL</span>的全称是资源描述符，</span><br><span class="line">我们可以这样理解：<span class="keyword">url</span>描述了一个网络上资源，</span><br><span class="line">而post、<span class="keyword">get</span>、put、<span class="keyword">delegate</span>就是对这个资源进行增、删、改、查的操作！</span><br></pre></td></tr></table></figure>
<h6 id="HTTP协议中几个状态码的含义-503-500-401-403-404-200-301-302。。。"><a href="#HTTP协议中几个状态码的含义-503-500-401-403-404-200-301-302。。。" class="headerlink" title="HTTP协议中几个状态码的含义:503 500 401 403 404 200 301 302。。。"></a>HTTP协议中几个状态码的含义:503 500 401 403 404 200 301 302。。。</h6><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">200</span> : 请求成功，请求的数据随之返回。</span><br><span class="line"><span class="number">301</span> : 永久性重定向。</span><br><span class="line"><span class="number">302</span> : 暂时行重定向。</span><br><span class="line"><span class="number">401</span> : 当前请求需要用户验证。</span><br><span class="line"><span class="number">403</span> : 服务器拒绝执行请求，即没有权限。</span><br><span class="line"><span class="number">404</span> : 请求失败，请求的数据在服务器上未发现。</span><br><span class="line"><span class="number">500</span> : 服务器错误。一般服务器端程序执行错误。</span><br><span class="line"><span class="number">503</span> : 服务器临时维护或过载。这个状态时临时性的。</span><br><span class="line">HTTP状态码分类:</span><br><span class="line">  ● <span class="number">1</span>** - 信息，服务器收到的请求，需要请求者继续执行操作</span><br><span class="line">  ● <span class="number">2</span>** - 成功，操作被成功接收并处理</span><br><span class="line">  ● <span class="number">3</span>** - 重定向，需要进一步的操作以完成请求</span><br><span class="line">  ● <span class="number">4</span>** - 客户端错误，请求包含语法错误或者无法完成请求</span><br><span class="line">  ● <span class="number">5</span>** 服务器错误，服务器在处理请求的过程 中发生了错误</span><br></pre></td></tr></table></figure>

<h5 id="—正则表达式相关"><a href="#—正则表达式相关" class="headerlink" title="—正则表达式相关"></a>—正则表达式相关</h5><h6 id="邮箱正则"><a href="#邮箱正则" class="headerlink" title="邮箱正则"></a>邮箱正则</h6><figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">/^<span class="comment">([a-zA-Z0-9_-])</span>+@<span class="comment">([a-zA-Z0-9_-])</span>+<span class="comment">(.[a-zA-Z0-9_-])</span>+/</span><br></pre></td></tr></table></figure>

<h6 id="手机正则"><a href="#手机正则" class="headerlink" title="手机正则"></a>手机正则</h6><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">^<span class="number">1</span>(<span class="number">3</span>|<span class="number">4</span>|<span class="number">5</span>|<span class="number">7</span>|<span class="number">8</span>)\d&#123;<span class="number">9</span>&#125;$</span><br></pre></td></tr></table></figure>
<h6 id="写出匹配邮箱地址和URL的两个正则表达式。"><a href="#写出匹配邮箱地址和URL的两个正则表达式。" class="headerlink" title="写出匹配邮箱地址和URL的两个正则表达式。"></a>写出匹配邮箱地址和URL的两个正则表达式。</h6><p>类似下面的：<br>邮箱地址：<a href="mailto:user_name.first@example.com.cn">user_name.first@example.com.cn</a><br>URL地址：<a href="http://www.example.com.cn/user_profile.php?uid=1" target="_blank" rel="noopener">http://www.example.com.cn/user_profile.php?uid=1</a><br>（提示：使用标准的正则表达式，就是PHP中preg_* 类的正则处理函数能够解析的正则）</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">邮箱：\<span class="regexp">/\/w+([-+.]/</span>w+)*@<span class="regexp">/w+([-.]/</span>w+)*<span class="regexp">/./</span>w+([-.]<span class="regexp">/w+)*/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">URL：/^<span class="link">http:////</span>[<span class="string">/w</span>]<span class="code">+/.[/w]+</span>[/S]<span class="strong">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="—redis和Memcache相关"><a href="#—redis和Memcache相关" class="headerlink" title="—redis和Memcache相关"></a>—redis和Memcache相关</h5><h5 id="—模板smarty等相关"><a href="#—模板smarty等相关" class="headerlink" title="—模板smarty等相关"></a>—模板smarty等相关</h5><h5 id="—web网络安全知识"><a href="#—web网络安全知识" class="headerlink" title="—web网络安全知识"></a>—web网络安全知识</h5><h6 id="xss攻击"><a href="#xss攻击" class="headerlink" title="xss攻击"></a>xss攻击</h6><figure class="highlight less"><table><tr><td class="code"><pre><span class="line">利用<span class="selector-tag">php</span> <span class="selector-tag">htmlentities</span>函数</span><br><span class="line">例子</span><br><span class="line"><span class="selector-tag">php</span>防止<span class="selector-tag">XSS</span>跨站脚本攻击的方法:是针对非法的<span class="selector-tag">HTML</span>代码包括单双引号等，使用<span class="selector-tag">htmlspecialchars</span>()函数 。</span><br><span class="line">在使用<span class="selector-tag">htmlspecialchars</span>()函数的时候注意第二个参数,</span><br><span class="line"> 直接用<span class="selector-tag">htmlspecialchars</span>($string) 的话,第二个参数默认是<span class="selector-tag">ENT_COMPAT</span>,函数默认只是转化双引号(“), 不对单引号(‘)做转义.</span><br></pre></td></tr></table></figure>
<h6 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">（简单又有效的方法）PreparedStatement</span><br><span class="line"> 使用正则表达式过滤传入的参数</span><br><span class="line"> 字符串过滤</span><br><span class="line"> jsp中调用该函数检查是否包函非法字符</span><br></pre></td></tr></table></figure>
<h5 id="—数据算法结构知识"><a href="#—数据算法结构知识" class="headerlink" title="—数据算法结构知识"></a>—数据算法结构知识</h5><h6 id="写一个排序算法，可以是冒泡排序或者是快速排序，假设待排序对象是一个维数组。（提示：不能使用系统已有函数，另外请仔细回忆以前学习过的基础知识）"><a href="#写一个排序算法，可以是冒泡排序或者是快速排序，假设待排序对象是一个维数组。（提示：不能使用系统已有函数，另外请仔细回忆以前学习过的基础知识）" class="headerlink" title="写一个排序算法，可以是冒泡排序或者是快速排序，假设待排序对象是一个维数组。（提示：不能使用系统已有函数，另外请仔细回忆以前学习过的基础知识）"></a>写一个排序算法，可以是冒泡排序或者是快速排序，假设待排序对象是一个维数组。（提示：不能使用系统已有函数，另外请仔细回忆以前学习过的基础知识）</h6><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 冒泡排序（数组排序）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble_sort</span><span class="params">($array)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $count = count($array);</span><br><span class="line">    <span class="keyword">if</span> ($count &lt;=<span class="number">0</span> ) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;$count; $i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>($j=$count<span class="number">-1</span>; $j&gt;$i; $j--)&#123;</span><br><span class="line">            <span class="keyword">if</span> ($array[$j] &lt; $array[$j<span class="number">-1</span>])&#123;</span><br><span class="line">                $tmp = $array[$j];</span><br><span class="line">                $array[$j] = $array[$j<span class="number">-1</span>];</span><br><span class="line">                $array[$j<span class="number">-1</span>] = $tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 快速排序（数组排序）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quicksort</span><span class="params">($array)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (count($array) &lt;= <span class="number">1</span>) <span class="keyword">return</span> $array;</span><br><span class="line">    $key = $array[];</span><br><span class="line">    $left_arr = <span class="keyword">array</span>();</span><br><span class="line">    $right_arr = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span> ($i=<span class="number">1</span>; $i&lt;count($array); $i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> ($array[$i] &lt;= $key)</span><br><span class="line">            $left_arr[] = $array[$i];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            $right_arr[] = $array[$i];</span><br><span class="line">    &#125;</span><br><span class="line">    $left_arr = quicksort($left_arr);</span><br><span class="line">    $right_arr = quicksort($right_arr);</span><br><span class="line">    <span class="keyword">return</span> array_merge($left_arr， <span class="keyword">array</span>($key)， $right_arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="写一个遍历指定目录下所有子目录和子文件的函数（提示：可以使用递归的方法）"><a href="#写一个遍历指定目录下所有子目录和子文件的函数（提示：可以使用递归的方法）" class="headerlink" title="写一个遍历指定目录下所有子目录和子文件的函数（提示：可以使用递归的方法）"></a>写一个遍历指定目录下所有子目录和子文件的函数（提示：可以使用递归的方法）</h6><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> dir_all ( <span class="variable">$path</span> ) &#123;</span><br><span class="line">        <span class="variable">$handler</span> = opendir(<span class="variable">$path</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">false</span>!==(<span class="variable">$tmp</span> = readdir(<span class="variable">$handler</span>))) &#123; </span><br><span class="line">                <span class="keyword">if</span>(is_dir( <span class="string">"<span class="variable">$path</span>/<span class="variable">$tmp</span>"</span> )) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="variable">$tmp</span>==<span class="string">"."</span> | <span class="variable">$tmp</span>==<span class="string">".."</span>) <span class="built_in">continue</span>;</span><br><span class="line">                                <span class="built_in">echo</span> <span class="variable">$tmp</span>.<span class="string">"&lt;br&gt;/n"</span>;</span><br><span class="line">                                dir_all (<span class="string">"<span class="variable">$path</span>/<span class="variable">$tmp</span>"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">echo</span> <span class="variable">$tmp</span> .<span class="string">"&lt;br&gt;/n"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="—高并发大流量"><a href="#—高并发大流量" class="headerlink" title="—高并发大流量"></a>—高并发大流量</h5><h6 id="对于大流量网站，采用什么方法来解决访问量的问题"><a href="#对于大流量网站，采用什么方法来解决访问量的问题" class="headerlink" title="对于大流量网站，采用什么方法来解决访问量的问题"></a>对于大流量网站，采用什么方法来解决访问量的问题</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">● 确认服务器硬件是否能够支持当前的流量</span><br><span class="line">● 数据库读写分离，优化数据表</span><br><span class="line">● 程序功能规则，禁止外部的盗链</span><br><span class="line">● 控制大文件的下载</span><br><span class="line">● 使用不同主机分流主要流量</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP-interview</category>
      </categories>
      <tags>
        <tag>PHP面试笔试题</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP常用代码(文章)</title>
    <url>/posts/f488806d.html</url>
    <content><![CDATA[<h6 id="100-个最常用的-PHP-函数"><a href="#100-个最常用的-PHP-函数" class="headerlink" title="100 个最常用的 PHP 函数"></a>100 个最常用的 PHP 函数</h6><p><a href="https://juejin.im/post/5c9b2e395188252d876e5b58" target="_blank" rel="noopener">100 个最常用的 PHP 函数文章</a></p>
<h6 id="PHP-完整实战-23-种设计模式"><a href="#PHP-完整实战-23-种设计模式" class="headerlink" title="PHP 完整实战 23 种设计模式"></a>PHP 完整实战 23 种设计模式</h6><p><a href="https://juejin.im/entry/5857b81b1b69e60056ec2f55" target="_blank" rel="noopener">PHP 完整实战 23 种设计模式</a></p>
<a id="more"></a>

<h4 id="获取IP地址"><a href="#获取IP地址" class="headerlink" title="获取IP地址"></a>获取IP地址</h4><figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">private function clientIp($safe = false) &#123;</span><br><span class="line">	<span class="keyword">if</span> (!$safe &amp;&amp; <span class="keyword">env</span>(<span class="string">'HTTP_X_FORWARDED_FOR'</span>)) &#123;</span><br><span class="line">		$ipaddr = preg_replace(<span class="string">'/(?:,.*)/'</span>, <span class="string">''</span>, <span class="keyword">env</span>(<span class="string">'HTTP_X_FORWARDED_FOR'</span>));</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">env</span>(<span class="string">'HTTP_CLIENT_IP'</span>)) &#123;</span><br><span class="line">			$ipaddr = <span class="keyword">env</span>(<span class="string">'HTTP_CLIENT_IP'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			$ipaddr = <span class="keyword">env</span>(<span class="string">'REMOTE_ADDR'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">env</span>(<span class="string">'HTTP_CLIENTADDRESS'</span>)) &#123;</span><br><span class="line">		$tmpipaddr = <span class="keyword">env</span>(<span class="string">'HTTP_CLIENTADDRESS'</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!empty($tmpipaddr)) &#123;</span><br><span class="line">			$ipaddr = preg_replace(<span class="string">'/(?:,.*)/'</span>, <span class="string">''</span>, $tmpipaddr);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">trim</span>($ipaddr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="发送sms-以SDK包为准"><a href="#发送sms-以SDK包为准" class="headerlink" title="发送sms  以SDK包为准"></a>发送sms  以SDK包为准</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send_sms</span><span class="params">($mobile,$msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">$authKey = <span class="string">"XXXXXXXXXXX"</span>;</span><br><span class="line">date_default_timezone_set(<span class="string">"Asia/Kolkata"</span>);</span><br><span class="line">$date = strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>);</span><br><span class="line"><span class="comment">//Multiple mobiles numbers separated by comma</span></span><br><span class="line">$mobileNumber = $mobile;</span><br><span class="line">           </span><br><span class="line"><span class="comment">//Sender ID,While using route4 sender id should be 6 characters long.</span></span><br><span class="line">$senderId = <span class="string">"IKOONK"</span>;</span><br><span class="line">           </span><br><span class="line"><span class="comment">//Your message to send, Add URL encoding here.</span></span><br><span class="line">$message = urlencode($msg);</span><br><span class="line">           </span><br><span class="line"><span class="comment">//Define route </span></span><br><span class="line">$route = <span class="string">"template"</span>;</span><br><span class="line"><span class="comment">//Prepare you post parameters</span></span><br><span class="line">$postData = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'authkey'</span> =&gt; $authKey,</span><br><span class="line">    <span class="string">'mobiles'</span> =&gt; $mobileNumber,</span><br><span class="line">    <span class="string">'message'</span> =&gt; $message,</span><br><span class="line">    <span class="string">'sender'</span> =&gt; $senderId,</span><br><span class="line">    <span class="string">'route'</span> =&gt; $route</span><br><span class="line">);</span><br><span class="line">           </span><br><span class="line"><span class="comment">//API URL</span></span><br><span class="line">$url=<span class="string">"https://control.msg91.com/sendhttp.php"</span>;</span><br><span class="line">           </span><br><span class="line"><span class="comment">// init the resource</span></span><br><span class="line">$ch = curl_init();</span><br><span class="line">curl_setopt_array($ch, <span class="keyword">array</span>(</span><br><span class="line">    CURLOPT_URL =&gt; $url,</span><br><span class="line">    CURLOPT_RETURNTRANSFER =&gt; <span class="keyword">true</span>,</span><br><span class="line">    CURLOPT_POST =&gt; <span class="keyword">true</span>,</span><br><span class="line">    CURLOPT_POSTFIELDS =&gt; $postData</span><br><span class="line">    <span class="comment">//,CURLOPT_FOLLOWLOCATION =&gt; true</span></span><br><span class="line">));</span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line"><span class="comment">//Ignore SSL certificate verification</span></span><br><span class="line">curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, <span class="number">0</span>);</span><br><span class="line">curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="number">0</span>);</span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line"><span class="comment">//get response</span></span><br><span class="line">$output = curl_exec($ch);</span><br><span class="line"><span class="comment">//Print error if any</span></span><br><span class="line"><span class="keyword">if</span>(curl_errno($ch))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'error:'</span> . curl_error($ch);</span><br><span class="line">&#125;</span><br><span class="line">           </span><br><span class="line">curl_close($ch);</span><br><span class="line">&#125;</span><br><span class="line">其中“$authKey = <span class="string">"XXXXXXXXXXX"</span>;”需要你输入你的密码，“$senderId = <span class="string">"IKOONK"</span>;”需要你输入你的 SenderID。当输入移动号码的时候需要指定国家代码 (比如，美国是 <span class="number">1</span>，印度是 <span class="number">91</span> )。</span><br><span class="line">语法：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$message = <span class="string">"Hello World"</span>;</span><br><span class="line">$mobile = <span class="string">"918112998787"</span>;</span><br><span class="line">send_sms($mobile,$message);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="阿里云短信发送"><a href="#阿里云短信发送" class="headerlink" title="阿里云短信发送"></a>阿里云短信发送</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//新版短信API接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">SendMessageByAliyun2</span><span class="params">($templateCode=<span class="string">''</span>,$mobiles=<span class="string">''</span>,$parmArr=array<span class="params">()</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	&lt;!-- 需要下载对应的SDK包 --&gt;</span><br><span class="line">       $HttpSocket = <span class="keyword">new</span> HttpSocket();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//发送的接口URL</span></span><br><span class="line">	$postUrl=<span class="string">"https://dysmsapi.aliyuncs.com/"</span>;</span><br><span class="line">	</span><br><span class="line">	$params = <span class="keyword">array</span> ();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// *** 需用户填写部分 ***</span></span><br><span class="line">	<span class="comment">// fixme 必填：是否启用https</span></span><br><span class="line">	$security = <span class="keyword">false</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// fixme 必填: 请参阅 https://ak-console.aliyun.com/ 取得您的AK信息</span></span><br><span class="line">	$accessKeyId = <span class="string">"accessKeyId"</span>;</span><br><span class="line">	$accessKeySecret = <span class="string">"accessKeySecret"</span>;</span><br><span class="line">	<span class="comment">// fixme 必填: 短信接收号码</span></span><br><span class="line">	$params[<span class="string">"PhoneNumbers"</span>] = $mobiles;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// fixme 必填: 短信签名，应严格按"签名名称"填写，请参考: https://dysms.console.aliyun.com/dysms.htm#/develop/sign</span></span><br><span class="line">	$params[<span class="string">"SignName"</span>] = <span class="string">"签名名称"</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// fixme 必填: 短信模板Code，应严格按"模板CODE"填写, 请参考: https://dysms.console.aliyun.com/dysms.htm#/develop/template</span></span><br><span class="line">	$params[<span class="string">"TemplateCode"</span>] = <span class="string">"模板CODE"</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// fixme 可选: 设置模板参数, 假如模板中存在变量需要替换则为必填项</span></span><br><span class="line">	<span class="comment">//$params['TemplateParam'] = Array (</span></span><br><span class="line">	<span class="comment">//		"smscode" =&gt; "12345"</span></span><br><span class="line">	<span class="comment">//);</span></span><br><span class="line">	<span class="keyword">if</span>(!<span class="keyword">empty</span>($parmArr))</span><br><span class="line">		$params[<span class="string">'TemplateParam'</span>]=$parmArr;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// fixme 可选: 设置发送短信流水号</span></span><br><span class="line">	<span class="comment">//$params['OutId'] = "12345";</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// fixme 可选: 上行短信扩展码, 扩展码字段控制在7位或以下，无特殊需求用户请忽略此字段</span></span><br><span class="line">	<span class="comment">//$params['SmsUpExtendCode'] = "1234567";</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// *** 需用户填写部分结束, 以下代码若无必要无需更改 ***</span></span><br><span class="line">	<span class="keyword">if</span>(!<span class="keyword">empty</span>($params[<span class="string">"TemplateParam"</span>]) &amp;&amp; is_array($params[<span class="string">"TemplateParam"</span>])) &#123;</span><br><span class="line">		$params[<span class="string">"TemplateParam"</span>] = json_encode($params[<span class="string">"TemplateParam"</span>], JSON_UNESCAPED_UNICODE);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	$params=array_merge($params, <span class="keyword">array</span>(</span><br><span class="line">					<span class="string">"RegionId"</span> =&gt; <span class="string">"cn-hangzhou"</span>,</span><br><span class="line">					<span class="string">"Action"</span> =&gt; <span class="string">"SendSms"</span>,</span><br><span class="line">					<span class="string">"Version"</span> =&gt; <span class="string">"2017-05-25"</span>,</span><br><span class="line">			));</span><br><span class="line">	</span><br><span class="line">	$apiParams = array_merge(<span class="keyword">array</span> (</span><br><span class="line">			<span class="string">"SignatureMethod"</span> =&gt; <span class="string">"HMAC-SHA1"</span>,</span><br><span class="line">			<span class="string">"SignatureNonce"</span> =&gt; uniqid(mt_rand(<span class="number">0</span>,<span class="number">0xffff</span>), <span class="keyword">true</span>),</span><br><span class="line">			<span class="string">"SignatureVersion"</span> =&gt; <span class="string">"1.0"</span>,</span><br><span class="line">			<span class="string">"AccessKeyId"</span> =&gt; $accessKeyId,</span><br><span class="line">			<span class="string">"Timestamp"</span> =&gt; gmdate(<span class="string">"Y-m-d\TH:i:s\Z"</span>),</span><br><span class="line">			<span class="string">"Format"</span> =&gt; <span class="string">"JSON"</span>,</span><br><span class="line">	), $params);</span><br><span class="line">	ksort($apiParams);</span><br><span class="line">	</span><br><span class="line">	$sortedQueryStringTmp = <span class="string">""</span>;</span><br><span class="line">	<span class="keyword">foreach</span> ($apiParams <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">		$sortedQueryStringTmp .= <span class="string">"&amp;"</span> . <span class="keyword">$this</span>-&gt;_encode($key) . <span class="string">"="</span> . <span class="keyword">$this</span>-&gt;_encode($value);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	$stringToSign = <span class="string">"POST&amp;%2F&amp;"</span> . <span class="keyword">$this</span>-&gt;_encode(substr($sortedQueryStringTmp, <span class="number">1</span>));</span><br><span class="line">	</span><br><span class="line">	$sign = base64_encode(hash_hmac(<span class="string">"sha1"</span>, $stringToSign, $accessKeySecret . <span class="string">"&amp;"</span>,<span class="keyword">true</span>));</span><br><span class="line">	</span><br><span class="line">	$signature = <span class="keyword">$this</span>-&gt;_encode($sign);</span><br><span class="line">	</span><br><span class="line">	$respond=$HttpSocket-&gt;post($postUrl,<span class="string">"Signature=&#123;$signature&#125;&#123;$sortedQueryStringTmp&#125;"</span>);</span><br><span class="line">	</span><br><span class="line">	$jsonResult=json_decode($respond);</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>($jsonResult-&gt;Code) &amp;&amp; $jsonResult-&gt;Code==<span class="string">"OK"</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="阻止-SQL-注入"><a href="#阻止-SQL-注入" class="headerlink" title="阻止 SQL 注入"></a>阻止 SQL 注入</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clean</span><span class="params">($input)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_array($input))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">foreach</span> ($input <span class="keyword">as</span> $key =&gt; $val)</span><br><span class="line">         &#123;</span><br><span class="line">            $output[$key] = clean($val);</span><br><span class="line">            <span class="comment">// $output[$key] = $this-&gt;clean($val);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        $output = (string) $input;</span><br><span class="line">        <span class="comment">// if magic quotes is on then use strip slashes</span></span><br><span class="line">        <span class="keyword">if</span> (get_magic_quotes_gpc()) </span><br><span class="line">        &#123;</span><br><span class="line">            $output = stripslashes($output);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// $output = strip_tags($output);</span></span><br><span class="line">        $output = htmlentities($output, ENT_QUOTES, <span class="string">'UTF-8'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// return the clean text</span></span><br><span class="line">    <span class="keyword">return</span> $output;</span><br><span class="line">&#125;</span><br><span class="line">语法：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$text = <span class="string">"&lt;script&gt;alert(1)&lt;/script&gt;"</span>;</span><br><span class="line">$text = clean($text);</span><br><span class="line"><span class="keyword">echo</span> $text;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="检测用户位置-检测用户是在哪个城市访问你的网站"><a href="#检测用户位置-检测用户是在哪个城市访问你的网站" class="headerlink" title="检测用户位置[检测用户是在哪个城市访问你的网站"></a>检测用户位置[检测用户是在哪个城市访问你的网站</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">detect_city</span><span class="params">($ip)</span> </span>&#123;</span><br><span class="line">                  </span><br><span class="line">        $default = <span class="string">'UNKNOWN'</span>;</span><br><span class="line">           </span><br><span class="line">        $curlopt_useragent = <span class="string">'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6 (.NET CLR 3.5.30729)'</span>;</span><br><span class="line">                  </span><br><span class="line">        $url = <span class="string">'http://ipinfodb.com/ip_locator.php?ip='</span> . urlencode($ip);</span><br><span class="line">        $ch = curl_init();</span><br><span class="line">                  </span><br><span class="line">        $curl_opt = <span class="keyword">array</span>(</span><br><span class="line">            CURLOPT_FOLLOWLOCATION  =&gt; <span class="number">1</span>,</span><br><span class="line">            CURLOPT_HEADER      =&gt; <span class="number">0</span>,</span><br><span class="line">            CURLOPT_RETURNTRANSFER  =&gt; <span class="number">1</span>,</span><br><span class="line">            CURLOPT_USERAGENT   =&gt; $curlopt_useragent,</span><br><span class="line">            CURLOPT_URL       =&gt; $url,</span><br><span class="line">            CURLOPT_TIMEOUT         =&gt; <span class="number">1</span>,</span><br><span class="line">            CURLOPT_REFERER         =&gt; <span class="string">'http://'</span> . $_SERVER[<span class="string">'HTTP_HOST'</span>],</span><br><span class="line">        );</span><br><span class="line">                  </span><br><span class="line">        curl_setopt_array($ch, $curl_opt);</span><br><span class="line">                  </span><br><span class="line">        $content = curl_exec($ch);</span><br><span class="line">                  </span><br><span class="line">        <span class="keyword">if</span> (!is_null($curl_info)) &#123;</span><br><span class="line">            $curl_info = curl_getinfo($ch);</span><br><span class="line">        &#125;</span><br><span class="line">                  </span><br><span class="line">        curl_close($ch);</span><br><span class="line">                  </span><br><span class="line">        <span class="keyword">if</span> ( preg_match(<span class="string">'&#123;&lt;li&gt;City : ([^&lt;]*)&lt;/li&gt;&#125;i'</span>, $content, $regs) )  &#123;</span><br><span class="line">            $city = $regs[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( preg_match(<span class="string">'&#123;&lt;li&gt;State/Province : ([^&lt;]*)&lt;/li&gt;&#125;i'</span>, $content, $regs) )  &#123;</span><br><span class="line">            $state = $regs[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">           </span><br><span class="line">        <span class="keyword">if</span>( $city!=<span class="string">''</span> &amp;&amp; $state!=<span class="string">''</span> )&#123;</span><br><span class="line">          $location = $city . <span class="string">', '</span> . $state;</span><br><span class="line">          <span class="keyword">return</span> $location;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="keyword">return</span> $default; </span><br><span class="line">        &#125;</span><br><span class="line">                  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    语法</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    $ip = $_SERVER[<span class="string">'REMOTE_ADDR'</span>];</span><br><span class="line">    $city = detect_city($ip);</span><br><span class="line">    <span class="keyword">echo</span> $city;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="获取-Web-页面的源代码"><a href="#获取-Web-页面的源代码" class="headerlink" title="获取 Web 页面的源代码"></a>获取 Web 页面的源代码</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">使用下面的函数，可以获取任意 Web 页面的 HTML 代码</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">display_sourcecode</span><span class="params">($url)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">$lines = file($url);</span><br><span class="line">$output = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($lines <span class="keyword">as</span> $line_num =&gt; $line) &#123; </span><br><span class="line">    <span class="comment">// loop thru each line and prepend line numbers</span></span><br><span class="line">    $output.= <span class="string">"Line #&lt;b&gt;&#123;$line_num&#125;&lt;/b&gt; : "</span> . htmlspecialchars($line) . <span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">语法：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$url = <span class="string">"http://blog.koonk.com"</span>;</span><br><span class="line">$source = display_sourcecode($url);</span><br><span class="line"><span class="keyword">echo</span> $source;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="获取用户真实IP"><a href="#获取用户真实IP" class="headerlink" title="获取用户真实IP"></a>获取用户真实IP</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRealIpAddr</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (!emptyempty($_SERVER[<span class="string">'HTTP_CLIENT_IP'</span>]))  </span><br><span class="line">    &#123;  </span><br><span class="line">        $ip=$_SERVER[<span class="string">'HTTP_CLIENT_IP'</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">elseif</span> (!emptyempty($_SERVER[<span class="string">'HTTP_X_FORWARDED_FOR'</span>]))  </span><br><span class="line">    <span class="comment">//to check ip is pass from proxy  </span></span><br><span class="line">    &#123;  </span><br><span class="line">        $ip=$_SERVER[<span class="string">'HTTP_X_FORWARDED_FOR'</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">else</span>  </span><br><span class="line">    &#123;  </span><br><span class="line">        $ip=$_SERVER[<span class="string">'REMOTE_ADDR'</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> $ip;  </span><br><span class="line">&#125;</span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$ip = getRealIpAddr();</span><br><span class="line"><span class="keyword">echo</span> $ip;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="强制性文件下载"><a href="#强制性文件下载" class="headerlink" title="强制性文件下载"></a>强制性文件下载</h4><figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">如果你需要下载特定的文件而不用另开新窗口，下面的代码片段可以帮助你。</span><br><span class="line"></span><br><span class="line">function force_download(<span class="symbol">$</span><span class="keyword">file</span>) </span><br><span class="line">&#123; </span><br><span class="line">    <span class="symbol">$</span>dir      = <span class="string">"../log/exports/"</span>; </span><br><span class="line">    <span class="keyword">if</span> ((isset(<span class="symbol">$</span><span class="keyword">file</span>))&amp;&amp;(file_exists(<span class="symbol">$</span>dir.<span class="symbol">$</span><span class="keyword">file</span>))) &#123; </span><br><span class="line">       header(<span class="string">"Content-type: application/force-download"</span>); </span><br><span class="line">       header(<span class="string">'Content-Disposition: inline; filename="'</span> . <span class="symbol">$</span>dir.<span class="symbol">$</span><span class="keyword">file</span> . <span class="string">'"'</span>); </span><br><span class="line">       header(<span class="string">"Content-Transfer-Encoding: Binary"</span>); </span><br><span class="line">       header(<span class="string">"Content-length: "</span>.filesize(<span class="symbol">$</span>dir.<span class="symbol">$</span><span class="keyword">file</span>)); </span><br><span class="line">       header(<span class="string">'Content-Type: application/octet-stream'</span>); </span><br><span class="line">       header(<span class="string">'Content-Disposition: attachment; filename="'</span> . <span class="symbol">$</span><span class="keyword">file</span> . <span class="string">'"'</span>); </span><br><span class="line">       readfile(<span class="string">"$dir$file"</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">       echo <span class="string">"No file selected"</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">&lt;php</span><br><span class="line">force_download(<span class="string">"image.jpg"</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h4 id="把秒转换成天数，小时数和分钟"><a href="#把秒转换成天数，小时数和分钟" class="headerlink" title="把秒转换成天数，小时数和分钟"></a>把秒转换成天数，小时数和分钟</h4><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> secsToStr(<span class="variable">$secs</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$secs</span>&gt;=<span class="number">86400</span>)&#123;<span class="variable">$days</span><span class="built_in">=floor</span>(<span class="variable">$secs</span>/<span class="number">86400</span>);<span class="variable">$secs</span>=<span class="variable">$secs</span><span class="meta">%86400</span>;<span class="variable">$r</span>=<span class="variable">$days</span>.<span class="string">' day'</span>;<span class="keyword">if</span>(<span class="variable">$days</span>&lt;&gt;<span class="number">1</span>)&#123;<span class="variable">$r</span>.=<span class="string">'s'</span>;&#125;<span class="keyword">if</span>(<span class="variable">$secs</span>&gt;<span class="number">0</span>)&#123;<span class="variable">$r</span>.=<span class="string">', '</span>;&#125;&#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$secs</span>&gt;=<span class="number">3600</span>)&#123;<span class="variable">$hours</span><span class="built_in">=floor</span>(<span class="variable">$secs</span>/<span class="number">3600</span>);<span class="variable">$secs</span>=<span class="variable">$secs</span><span class="meta">%3600</span>;<span class="variable">$r</span>.=<span class="variable">$hours</span>.<span class="string">' hour'</span>;<span class="keyword">if</span>(<span class="variable">$hours</span>&lt;&gt;<span class="number">1</span>)&#123;<span class="variable">$r</span>.=<span class="string">'s'</span>;&#125;<span class="keyword">if</span>(<span class="variable">$secs</span>&gt;<span class="number">0</span>)&#123;<span class="variable">$r</span>.=<span class="string">', '</span>;&#125;&#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$secs</span>&gt;=<span class="number">60</span>)&#123;<span class="variable">$minutes</span><span class="built_in">=floor</span>(<span class="variable">$secs</span>/<span class="number">60</span>);<span class="variable">$secs</span>=<span class="variable">$secs</span><span class="meta">%60</span>;<span class="variable">$r</span>.=<span class="variable">$minutes</span>.<span class="string">' minute'</span>;<span class="keyword">if</span>(<span class="variable">$minutes</span>&lt;&gt;<span class="number">1</span>)&#123;<span class="variable">$r</span>.=<span class="string">'s'</span>;&#125;<span class="keyword">if</span>(<span class="variable">$secs</span>&gt;<span class="number">0</span>)&#123;<span class="variable">$r</span>.=<span class="string">', '</span>;&#125;&#125;</span><br><span class="line">    <span class="variable">$r</span>.=<span class="variable">$secs</span>.<span class="string">' second'</span>;<span class="keyword">if</span>(<span class="variable">$secs</span>&lt;&gt;<span class="number">1</span>)&#123;<span class="variable">$r</span>.=<span class="string">'s'</span>;&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$r</span>;</span><br><span class="line">&#125;</span><br><span class="line">语法：</span><br><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$seconds</span> = <span class="string">"56789"</span>;</span><br><span class="line"><span class="variable">$output</span> = secsToStr(<span class="variable">$seconds</span>);</span><br><span class="line">echo <span class="variable">$output</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h4 id="检测用户语言"><a href="#检测用户语言" class="headerlink" title="检测用户语言"></a>检测用户语言</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">使用下面的 PHP 代码片段可以检测用户浏览器所使用的语言</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_client_language</span><span class="params">($availableLanguages, $default=<span class="string">'en'</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>($_SERVER[<span class="string">'HTTP_ACCEPT_LANGUAGE'</span>])) &#123;</span><br><span class="line">        $langs=explode(<span class="string">','</span>,$_SERVER[<span class="string">'HTTP_ACCEPT_LANGUAGE'</span>]);</span><br><span class="line">        <span class="keyword">foreach</span> ($langs <span class="keyword">as</span> $value)&#123;</span><br><span class="line">            $choice=substr($value,<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span>(in_array($choice, $availableLanguages))&#123;</span><br><span class="line">                <span class="keyword">return</span> $choice;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> $default;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取当前页面-URL"><a href="#获取当前页面-URL" class="headerlink" title="获取当前页面 URL"></a>获取当前页面 URL</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">这个 PHP 片段可以帮助你让用户登录后直接跳转到之前浏览的页面</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">current_url</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">$url = <span class="string">"http://"</span> . $_SERVER[<span class="string">'HTTP_HOST'</span>] . $_SERVER[<span class="string">'REQUEST_URI'</span>];</span><br><span class="line">$validURL = str_replace(<span class="string">"&amp;"</span>, <span class="string">"&amp;"</span>, $url);</span><br><span class="line"><span class="keyword">return</span> validURL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="计算两个地图坐标之间的距离"><a href="#计算两个地图坐标之间的距离" class="headerlink" title="计算两个地图坐标之间的距离"></a>计算两个地图坐标之间的距离</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDistanceBetweenPointsNew</span><span class="params">($latitude1, $longitude1, $latitude2, $longitude2)</span> </span>&#123;</span><br><span class="line">    $theta = $longitude1 - $longitude2;</span><br><span class="line">    $miles = (sin(deg2rad($latitude1)) * sin(deg2rad($latitude2))) + (cos(deg2rad($latitude1)) * cos(deg2rad($latitude2)) * cos(deg2rad($theta)));</span><br><span class="line">    $miles = acos($miles);</span><br><span class="line">    $miles = rad2deg($miles);</span><br><span class="line">    $miles = $miles * <span class="number">60</span> * <span class="number">1.1515</span>;</span><br><span class="line">    $feet = $miles * <span class="number">5280</span>;</span><br><span class="line">    $yards = $feet / <span class="number">3</span>;</span><br><span class="line">    $kilometers = $miles * <span class="number">1.609344</span>;</span><br><span class="line">    $meters = $kilometers * <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">return</span> compact(<span class="string">'miles'</span>,<span class="string">'feet'</span>,<span class="string">'yards'</span>,<span class="string">'kilometers'</span>,<span class="string">'meters'</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$point1 = <span class="keyword">array</span>(<span class="string">'lat'</span> =&gt; <span class="number">40.770623</span>, <span class="string">'long'</span> =&gt; <span class="number">-73.964367</span>);</span><br><span class="line">$point2 = <span class="keyword">array</span>(<span class="string">'lat'</span> =&gt; <span class="number">40.758224</span>, <span class="string">'long'</span> =&gt; <span class="number">-73.917404</span>);</span><br><span class="line">$distance = getDistanceBetweenPointsNew($point1[<span class="string">'lat'</span>], $point1[<span class="string">'long'</span>], $point2[<span class="string">'lat'</span>], $point2[<span class="string">'long'</span>]);</span><br><span class="line"><span class="keyword">foreach</span> ($distance <span class="keyword">as</span> $unit =&gt; $value) &#123;</span><br><span class="line">    <span class="keyword">echo</span> $unit.<span class="string">': '</span>.number_format($value,<span class="number">4</span>).<span class="string">''</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取远程文件大小"><a href="#获取远程文件大小" class="headerlink" title="获取远程文件大小"></a>获取远程文件大小</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">remote_filesize</span><span class="params">($url, $user = <span class="string">""</span>, $pw = <span class="string">""</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ob_start();</span><br><span class="line">    $ch = curl_init($url);</span><br><span class="line">    curl_setopt($ch, CURLOPT_HEADER, <span class="number">1</span>);</span><br><span class="line">    curl_setopt($ch, CURLOPT_NOBODY, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">empty</span>($user) &amp;&amp; !<span class="keyword">empty</span>($pw))</span><br><span class="line">    &#123;</span><br><span class="line">        $headers = <span class="keyword">array</span>(<span class="string">'Authorization: Basic '</span> .  base64_encode(<span class="string">"$user:$pw"</span>));</span><br><span class="line">        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);</span><br><span class="line">    &#125;</span><br><span class="line">    $ok = curl_exec($ch);</span><br><span class="line">    curl_close($ch);</span><br><span class="line">    $head = ob_get_contents();</span><br><span class="line">    ob_end_clean();</span><br><span class="line">    $regex = <span class="string">'/Content-Length:\s([0-9].+?)\s/'</span>;</span><br><span class="line">    $count = preg_match($regex, $head, $matches);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">isset</span>($matches[<span class="number">1</span>]) ? $matches[<span class="number">1</span>] : <span class="string">"unknown"</span>;</span><br><span class="line">&#125;</span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$file = <span class="string">"http://koonk.com/images/logo.png"</span>;</span><br><span class="line">$size = remote_filesize($url);</span><br><span class="line"><span class="keyword">echo</span> $size;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="检查网站是否宕机"><a href="#检查网站是否宕机" class="headerlink" title="检查网站是否宕机"></a>检查网站是否宕机</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Visit</span><span class="params">($url)</span></span>&#123;</span><br><span class="line">    $agent = <span class="string">"Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"</span>;$ch=curl_init();</span><br><span class="line">    curl_setopt ($ch, CURLOPT_URL,$url );</span><br><span class="line">    curl_setopt($ch, CURLOPT_USERAGENT, $agent);</span><br><span class="line">    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">    curl_setopt ($ch,CURLOPT_VERBOSE,<span class="keyword">false</span>);</span><br><span class="line">    curl_setopt($ch, CURLOPT_TIMEOUT, <span class="number">5</span>);</span><br><span class="line">    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, <span class="keyword">FALSE</span>);</span><br><span class="line">    curl_setopt($ch,CURLOPT_SSLVERSION,<span class="number">3</span>);</span><br><span class="line">    curl_setopt($ch,CURLOPT_SSL_VERIFYHOST, <span class="keyword">FALSE</span>);</span><br><span class="line">    $page=curl_exec($ch);</span><br><span class="line">    <span class="comment">//echo curl_error($ch);</span></span><br><span class="line">    $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);</span><br><span class="line">    curl_close($ch);</span><br><span class="line">    <span class="keyword">if</span>($httpcode&gt;=<span class="number">200</span> &amp;&amp; $httpcode&lt;<span class="number">300</span>) <span class="keyword">return</span>=<span class="string">""</span> <span class="keyword">true</span>;=<span class="string">""</span> <span class="keyword">else</span>=<span class="string">""</span> <span class="keyword">false</span>;=<span class="string">""</span> &#125;=<span class="string">""</span> <span class="keyword">if</span>=<span class="string">""</span> (visit(<span class="string">"http:="</span><span class="string">" www.google.com"</span>))=<span class="string">""</span> <span class="keyword">echo</span>=<span class="string">""</span> <span class="string">"website="</span><span class="string">" ok"</span>.<span class="string">"n"</span>;=<span class="string">""</span> down<span class="string">";&lt;="</span><span class="string">" pre="</span><span class="string">"&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP常用代码块</tag>
      </tags>
  </entry>
  <entry>
    <title>360解读PHP面试题</title>
    <url>/posts/263d185a.html</url>
    <content><![CDATA[<meta name="referrer" content="no-referrer" />
<blockquote class="blockquote-center">360解读PHP面试题(理论)</blockquote>

<h5 id="1-php引用变量"><a href="#1-php引用变量" class="headerlink" title="1.php引用变量"></a>1.php引用变量</h5><p><a href="https://www.cnblogs.com/chrdai/p/11061174.html" target="_blank" rel="noopener">引用传值的核心原理解析</a></p>
<h5 id="2-php字符串定义方式和区别"><a href="#2-php字符串定义方式和区别" class="headerlink" title="2.php字符串定义方式和区别"></a>2.php字符串定义方式和区别</h5><p>单引号：不能解析变量 转义字符  效率高<br> 双引号：解析变量 特殊字符  {}包含  转义字符  效率低<br><a href="https://blog.csdn.net/fdipzone/article/details/24937669" target="_blank" rel="noopener">heredoc newdoc区别</a></p>
<h5 id="3-常量与数据类型"><a href="#3-常量与数据类型" class="headerlink" title="3.常量与数据类型"></a>3.常量与数据类型</h5><p><a href="https://www.w3school.com.cn/php/php_superglobals.asp" target="_blank" rel="noopener">数据类型</a></p>
<a id="more"></a>

<h5 id="4-运算符"><a href="#4-运算符" class="headerlink" title="4.运算符"></a>4.运算符</h5><p>错误抑制符@：放在PHP表达式前面可以抑制任何错误信息<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a3bf50b3e0ce6b58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-0d75e5130c501e81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="5-php遍历数组三种方式及区别"><a href="#5-php遍历数组三种方式及区别" class="headerlink" title="5.php遍历数组三种方式及区别"></a>5.php遍历数组三种方式及区别</h5><p>for<br>foreach<br>while list  each</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-1afcf535ef260425.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="6-自定义函数及其内部函数"><a href="#6-自定义函数及其内部函数" class="headerlink" title="6.自定义函数及其内部函数"></a>6.自定义函数及其内部函数</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-90fac53f52edde18.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3f1fa7b1ceeee905.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>global 关键字 函数体内设置全局<br>global $outer -&gt;全局变量<br>$GLOBAL[‘$outer’]</p>
<h6 id="静态变量-static"><a href="#静态变量-static" class="headerlink" title="静态变量 static"></a>静态变量 static</h6><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-face571d5c79d25c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8437386479b9eb24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-e0d08131fdeb336e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-50586453e255c837.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-77375a7091984f73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$a</span> = 1;</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-dd2c5b403be70d6e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ddf731e94865a6d8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7292ceb55626a8d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-e2f5037a5dae3f39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-06d0815113639584.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-737ffb4c3102c242.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-00037196c90b9389.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-50fe27e34073c2e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-dc19e59ed446c293.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-c106fe9bad4b9d12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-684009fe7d57c31c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b89df1ba5e2cba00.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7cbceb83bfa8111c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="7-正则表达式"><a href="#7-正则表达式" class="headerlink" title="7.正则表达式"></a>7.正则表达式</h5><h5 id="8-文件及目录处理"><a href="#8-文件及目录处理" class="headerlink" title="8.文件及目录处理"></a>8.文件及目录处理</h5><h5 id="9-会话控制技术"><a href="#9-会话控制技术" class="headerlink" title="9.会话控制技术"></a>9.会话控制技术</h5><h6 id="为什么要使用会话控制技术？"><a href="#为什么要使用会话控制技术？" class="headerlink" title="为什么要使用会话控制技术？"></a>为什么要使用会话控制技术？</h6><p><a href="https://www.jianshu.com/p/a3e7e67c5f12" target="_blank" rel="noopener">为什么要使用会话控制技术文章</a></p>
<p>允许服务器跟踪同一个客户端做出的连续请求，这样就可以保存用户的状态，完成用户的登录状态的保存</p>
<h5 id="10-面向对象"><a href="#10-面向对象" class="headerlink" title="10.面向对象"></a>10.面向对象</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-29f1dda1d44ebc2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-54ce352ba8d215d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-c0a4036b861e3911.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>方法重写：会覆盖父类方法—&gt;防止覆盖 先使用parent::父类方法在执行子类方<br>单一继承：只能同时继承一个父类<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-26e1858fab56cb55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-55afda835b4c1f67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-0c4cc01f53ef6eaf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="11-网络协议"><a href="#11-网络协议" class="headerlink" title="11.网络协议"></a>11.网络协议</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-d6679437164ff39d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ebfd10d72269fca7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-76134398491c029e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-f3daa5cfdd2d0fc1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-033c55c1903b5249.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5c507dafb41f98ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-f3333158d73ee540.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-91a565762c98f4f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-08bd94f3d2b8e19c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-9f01cf9142e5d441.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-24708ac11a974e3f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-817a194d27674c41.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-791cd3e123ce6b44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7ba375c985dbae82.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3ad1a12721490a48.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="12-开发环境及其配置相关"><a href="#12-开发环境及其配置相关" class="headerlink" title="12.开发环境及其配置相关"></a>12.开发环境及其配置相关</h5><p>版本控制软件：集中式和分布式<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-89a54d30dfb08dbe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b8ed5e9b812e4be7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h6 id="CGI-FASTCGI-PHP-FPM"><a href="#CGI-FASTCGI-PHP-FPM" class="headerlink" title="CGI   FASTCGI    PHP-FPM"></a>CGI   FASTCGI    PHP-FPM</h6><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-998fc5db5c0ef585.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="14-JS和JQ基础"><a href="#14-JS和JQ基础" class="headerlink" title="14.JS和JQ基础"></a>14.JS和JQ基础</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-9cc6c7dd96b8a492.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5ba7059f7d296451.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5c21e8382301c221.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-d42d30cd2987db33.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-15710c99966a40b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-030fd7ba12f5d9a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h5><p>number  string array boolean math regexp date<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-447c788de871410e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7b8ad0bf273cfdec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-276b1460be92e855.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-9fcfcf140b8f85a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-dd717a09fc747ef7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="15-AJAX"><a href="#15-AJAX" class="headerlink" title="15.AJAX"></a>15.AJAX</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ab5040cb144909ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-6b0ab574c0e5de65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a2b7019e13011fd7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-0b0740ef4ee47512.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-254587aef31c576f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3972dc95a84d88b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h6 id="16-Linux基础"><a href="#16-Linux基础" class="headerlink" title="16.Linux基础"></a>16.Linux基础</h6><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-dc14253c60132381.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-f2af438a6a26a354.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b8a6ebc68f3b94e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-fcc40f63e1e90ee5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-22e485863d84c394.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b204e4e8da3be953.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-bdd4736c851255cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p> <img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ae728164bdbf5b23.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-897c9aed8bd58ee7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-81dce788843af462.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-61352be2c74773fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-bf9e9821e2885f98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7f7df32ae35c3904.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-c229f73274615255.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-d6916da5f0130cc9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-d7b0b30dd756098d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a7950ecb1685c5e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-31f466754b27ce7a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-20eb8fc8acc4a88c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-bdf6a0301bc02fc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-4754aa098964ecbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a5e56daa680e5326.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ef01cec1b1f5a3b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-4325891bdad43369.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3b1338ee1e425b6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5bf91e201d6e8504.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-0aafe12b1f664d20.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-dc0665824fe6d918.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-4c8e2c45f424da82.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="17-Mysql数据库"><a href="#17-Mysql数据库" class="headerlink" title="17.Mysql数据库"></a>17.Mysql数据库</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3d10aed5d765caed.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-386a44a31a49cb1a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b8f400e85e85b4ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7246a502cee48a16.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-29abc95a1f3b544f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-171b395bd01d9ca2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-414b7df2d83075f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-62e1aa0bff61c24e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a3a420e9e2516b66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-206b41607ff6c943.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-92611a8413149f63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8700dbbc94c381cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-9231166b7056fb10.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-502c22625d5c4896.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-766b6a4cac796352.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-02efead6f888b39d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7979fffcb420ae38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a94fbfb4e21f0178.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3559794341142d66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8cd984b55a3d2504.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-c3840b2eb50cd7bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-99d204a26761061e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b486f02c53a8cf6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ccc4140f7c58d1fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3aaaf263cc0a7475.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-99a341230d5fd9c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-b8c4235e8f7ab90e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-d498e38a294bfc2f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-cf9a2b535ceb792b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-176cd4b57a6f9497.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-4b84f1379f1ab6bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-71ad7e01fb688dec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="18-Mysql查询优化"><a href="#18-Mysql查询优化" class="headerlink" title="18.Mysql查询优化"></a>18.Mysql查询优化</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-807e457426bdf25a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-60775a941b1d2571.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-cddf61c77d5112e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a79dd138d3a384e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-198759f18d405fbc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-053f7f5a157b0b26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-6c15945311c4ff47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-c4af137f79ea51e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-6dd8f30b9439b629.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-7a0897541ac08454.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-77e11711c1f8e891.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8a8562e147160cf5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-f37fd34244ce5930.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-d81ce6191dbdc0c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-aa9202f97e4c1405.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-f8342feb8c796659.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a54fdd5d54ffc956.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-6760014605315128.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5c6278227e6ffe5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8ec44eb7ddaa66f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a31f8742fc861c70.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a2dfb0556e03807a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="19-Mysql高复用-高可扩展"><a href="#19-Mysql高复用-高可扩展" class="headerlink" title="19.Mysql高复用 高可扩展"></a>19.Mysql高复用 高可扩展</h5><p><a href="https://blog.csdn.net/u010320108/article/details/79460748" target="_blank" rel="noopener">mysql分区表详解</a></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-70ee0248fb30dd42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-ac53301ab256bf1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-e9fb4624819b86eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-aa31a2084d8e5f68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-792efaf7f760a669.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5f13595ff72dc4c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8c6d04793f28fdf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-10574d645de206e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><a href="https://www.cnblogs.com/lfs2640666960/p/11116962.html" target="_blank" rel="noopener">mysql分库分表</a></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-bf992af1dc9a70cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-46dd16da64c74947.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-905254413b0acf3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-be6cd836e56ada22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-e22ee9afacb392bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-bb5e2b8fc099a80b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-3e6721ced0cd1870.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-f78a7fa7004025b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-e69d0cdbcb95d548.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-64197a661b14c9f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-5cfbd215f6ccbfed.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="Mysql安全"><a href="#Mysql安全" class="headerlink" title="Mysql安全"></a>Mysql安全</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-018d6df0a7027613.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-a5fd61c3049c8797.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-4dd473e5eeb19549.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://upload-images.jianshu.io/upload_images/3098875-8ba6d31fc49266cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>360解读PHP面试</tag>
      </tags>
  </entry>
  <entry>
    <title>百度[待定]Google收录站点</title>
    <url>/posts/895444f1.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">hexo站点地图收录</blockquote>

<div class="note success">
            <p>网站的SEO对一个网站非常重要，SEO指的是搜索引擎优化。通过搜索引擎优化，可以提高网站的网站关键词排名以及博客文章的曝光度。<br>一般来说，我们针对百度和Google这两个搜索引擎进行优化，提高对网站资源的索引量，使我们的文章更容易被发现。</p>
          </div>


<h6 id="生成站点地图"><a href="#生成站点地图" class="headerlink" title="生成站点地图"></a>生成站点地图</h6><p>1.安装百度和Google的站点地图生成插件：</p>
<figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --<span class="keyword">save</span> <span class="comment">//百度地图生成插件</span></span><br><span class="line">npm install hexo-generator-sitemap --<span class="keyword">save</span> <span class="comment">//谷歌地图生成插件</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>

<p>2.修改站点配置文件(可选)</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 自动生成sitemap</span></span><br><span class="line"><span class="symbol">sitemap:</span></span><br><span class="line"><span class="symbol">  path:</span> sitemap.xml</span><br><span class="line"><span class="symbol">baidusitemap:</span></span><br><span class="line"><span class="symbol">  path:</span> baidusitemap.xml</span><br></pre></td></tr></table></figure>
<p>3.生成和部署</p>
<figure class="highlight lasso"><table><tr><td class="code"><pre><span class="line">在根目录下<span class="keyword">public</span>文件中会生成sitemap.<span class="built_in">xml</span>(谷歌)和baidusitemap.<span class="built_in">xml</span>(百度)两个文件即站点地图</span><br></pre></td></tr></table></figure>
<h6 id="Google站长平台"><a href="#Google站长平台" class="headerlink" title="Google站长平台"></a>Google站长平台</h6><blockquote>
<p>自备梯子+谷歌账号</p>
</blockquote>
<p><a href="https://www.google.com/webmasters/#?modal_active=none" target="_blank" rel="noopener">Google站长平台入口</a></p>
<h4 id="1-添加站点"><a href="#1-添加站点" class="headerlink" title="1.添加站点"></a>1.添加站点</h4><blockquote>
<p>进入Search Console，添加站点：</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/ZGKRuwMh4eYkXlx.png" alt="使用GitHubpage请选择网址前缀进行验证"></p>
<h4 id="2-验证站点"><a href="#2-验证站点" class="headerlink" title="2.验证站点"></a>2.验证站点</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/1NhRlyWGMf6Z2w7.png" alt="验证站点"></p>
<ul>
<li>下载Google验证文件，放到themes/next/source目录中</li>
<li>执行生成和部署命令验证即可<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">hexo g <span class="meta">&amp;&amp; hexo d</span></span><br></pre></td></tr></table></figure>
<h4 id="已完成站点的验证"><a href="#已完成站点的验证" class="headerlink" title="已完成站点的验证"></a>已完成站点的验证</h4><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/BFmlkvKgjAnSJM3.png" alt="完成验证站点"></li>
</ul>
<h4 id="3-添加站点地图"><a href="#3-添加站点地图" class="headerlink" title="3.添加站点地图"></a>3.添加站点地图</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/04/19/siW8KpgHxNZ5EkY.png" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/m1IbcSigMnUXFBq.png" alt="解决问题"></p>
<h4 id="效果如下："><a href="#效果如下：" class="headerlink" title="效果如下："></a>效果如下：</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/04/19/koHOjgxBQNtFdeT.png" alt="image.png"></p>
]]></content>
      <categories>
        <category>Baidu-Google</category>
      </categories>
      <tags>
        <tag>Baidu-Google</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo问题汇总</title>
    <url>/posts/cded68c5.html</url>
    <content><![CDATA[<h3 id="升级HEXO和Butterfly主题"><a href="#升级HEXO和Butterfly主题" class="headerlink" title="升级HEXO和Butterfly主题"></a>升级HEXO和Butterfly主题</h3><h4 id="升级hexo"><a href="#升级hexo" class="headerlink" title="升级hexo"></a>升级hexo</h4><ul>
<li><p>在博客根目录下  [D:\blogs] </p>
</li>
<li><p>运行以下代码 Hexo版本升级可以通过npm实现</p>
  <div class="note primary">
            <p>全局升级hexo-cli</p>
          </div>
  <figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">npm i hexo-<span class="keyword">cli</span> -g</span><br></pre></td></tr></table></figure>

  <div class="note primary">
            <p>npm-check检查更新</p>
          </div>
  <figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">npm</span> install -g <span class="built_in">npm</span>-check</span><br><span class="line"><span class="built_in">npm</span>-check</span><br></pre></td></tr></table></figure>

  <div class="note primary">
            <p>npm-upgrade更新</p>
          </div>
  <figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">npm</span> install -g <span class="built_in">npm</span>-upgrade</span><br><span class="line"><span class="built_in">npm</span>-upgrade</span><br></pre></td></tr></table></figure>

  <div class="note primary">
            <p>更新全局包：</p>
          </div>
  <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">update</span> &lt;<span class="type">name</span>&gt; -g</span><br></pre></td></tr></table></figure>

  <div class="note primary">
            <p>更新生产环境依赖包</p>
          </div>
  <figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">update</span> &lt;<span class="type">name</span>&gt; <span class="comment">--save</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="升级butterfly主题"><a href="#升级butterfly主题" class="headerlink" title="升级butterfly主题"></a>升级butterfly主题</h4><div class="note success">
            <p>进入主题目录路径  [D:\blogs\themes\Butterfly]<br>使用 git bash here 工具<br>使用 git pull 进项拉取新项目<br>复制_config.yml到Hexo 工作目錄下的source/_data/butterfly.yml进行内容替换<br>hexo cl &amp;&amp; hexo s </p>
          </div>

<h3 id="hexo-deploy导致自定义域名失效"><a href="#hexo-deploy导致自定义域名失效" class="headerlink" title="hexo deploy导致自定义域名失效"></a>hexo deploy导致自定义域名失效</h3><ul>
<li>起因：每次配置 custom domain 之后，再次 hexo deploy 之后，custom domain 会被重置失效。<a id="more"></a>
<h4 id="在-hexo-生成的博客的-source-目录下新建一个-CNAME-文件，然后在这个文件中填入你的域名，"><a href="#在-hexo-生成的博客的-source-目录下新建一个-CNAME-文件，然后在这个文件中填入你的域名，" class="headerlink" title="在 hexo 生成的博客的 source 目录下新建一个 CNAME 文件，然后在这个文件中填入你的域名，"></a>在 hexo 生成的博客的 source 目录下新建一个 CNAME 文件，然后在这个文件中填入你的域名，</h4><h4 id="这样就不会每次发布之后，gitpage-里的-custom-domain-都被重置掉啦。"><a href="#这样就不会每次发布之后，gitpage-里的-custom-domain-都被重置掉啦。" class="headerlink" title="这样就不会每次发布之后，gitpage 里的 custom domain 都被重置掉啦。"></a>这样就不会每次发布之后，gitpage 里的 custom domain 都被重置掉啦。</h4><h4 id="使用-gitpage-功能将博客托管在了-github-上，并配置-CNAME-将自己的域名解析了过去，"><a href="#使用-gitpage-功能将博客托管在了-github-上，并配置-CNAME-将自己的域名解析了过去，" class="headerlink" title="使用 gitpage 功能将博客托管在了 github 上，并配置 CNAME 将自己的域名解析了过去，"></a>使用 gitpage 功能将博客托管在了 github 上，并配置 CNAME 将自己的域名解析了过去，</h4><h4 id="在-github-的仓库设置中开始-custom-domain-的功能，这时候就可以直接使用自己的域名访问啦。"><a href="#在-github-的仓库设置中开始-custom-domain-的功能，这时候就可以直接使用自己的域名访问啦。" class="headerlink" title="在 github 的仓库设置中开始 custom domain 的功能，这时候就可以直接使用自己的域名访问啦。"></a>在 github 的仓库设置中开始 custom domain 的功能，这时候就可以直接使用自己的域名访问啦。</h4></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/hexo/3098875-db6877df60ef748e.png" alt="添加路径"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/hexo/3098875-c40da031137a0c4f.png" alt="配置github page域名"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>图片占位自适应</title>
    <url>/posts/78cea6d8.html</url>
    <content><![CDATA[<h4 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h4><h5 id="外层div高度为0"><a href="#外层div高度为0" class="headerlink" title="外层div高度为0"></a>外层div高度为0</h5><h5 id="设置relative"><a href="#设置relative" class="headerlink" title="设置relative"></a>设置relative</h5><h5 id="padding-top代替高度"><a href="#padding-top代替高度" class="headerlink" title="padding-top代替高度"></a>padding-top代替高度</h5><p>1.<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-92d3e876f388aaa0.png" alt="image.png"></p>
<a id="more"></a>
<p>2.<br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-4d9bd24405bc7db1.png" alt="image.png"></p>
<blockquote>
<p>加上 display: block;是因为a标签是行级标签</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.im</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.im</span> <span class="selector-tag">a</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>同样做法:图片大小不一致导致布错乱</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-5a628665dd31b157.png" alt="image.png"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">html：</span><br><span class="line">&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-3 products_views"</span> id=<span class="string">"13333"</span>&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"diy-products_list"</span>&gt;</span><br><span class="line">		&lt;a title=<span class="string">"图片.png"</span> href=<span class="string">"链接"</span>&gt;</span><br><span class="line">			&lt;picture <span class="class"><span class="keyword">class</span></span>=<span class="string">"als-content-results-item__pic"</span>&gt;</span><br><span class="line">				&lt;img src=<span class="string">"图片.png"</span> id=<span class="string">"magic_13333"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"lzay img-responsive"</span> data-original=<span class="string">"图片.png"</span> alt=<span class="string">""</span> title=<span class="string">""</span>&gt;</span><br><span class="line">			&lt;<span class="regexp">/picture&gt;</span></span><br><span class="line"><span class="regexp">		 &lt;/</span>a&gt;</span><br><span class="line">	&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;div class="themeText"&gt;图片.png&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/li&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">css</span>:</span><br><span class="line"><span class="selector-class">.diy-products_list</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f2f2f2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.als-content-results-item__pic</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">100%</span>;<span class="comment">/*重点*/</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;<span class="comment">/*超出部分隐藏--重点*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img-responsive</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="scrollTop、offsetHeight和offsetTop等属性用法详解以及兼容性的解决"><a href="#scrollTop、offsetHeight和offsetTop等属性用法详解以及兼容性的解决" class="headerlink" title="scrollTop、offsetHeight和offsetTop等属性用法详解以及兼容性的解决"></a>scrollTop、offsetHeight和offsetTop等属性用法详解以及兼容性的解决</h5><blockquote>
<p>参考文章：<br><a href="https://www.jianshu.com/p/d267456ebc0d" target="_blank" rel="noopener">https://www.jianshu.com/p/d267456ebc0d</a><br><a href="https://www.imooc.com/article/17571" target="_blank" rel="noopener">https://www.imooc.com/article/17571</a></p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-9c8309e7f4721ee5.png" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-5482373cea82b41b.png" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-f79c00caa1c517fc.png" alt="image.png"></p>
<h4 id="详解："><a href="#详解：" class="headerlink" title="详解："></a>详解：</h4><blockquote>
<p>1.scrollHeight:所有的内容(包括肉眼看不见、溢出、被窗口遮挡的部分；)</p>
</blockquote>
<blockquote>
<p>2.clientHeight:野内可见的内容和内边距，不包括x轴的滚动条高度、边框、外边距(可见区域的底部左右滚动条不算)——元素宽高+Padding</p>
</blockquote>
<h4 id="clientHeight不包括border、水平滚动条、margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素"><a href="#clientHeight不包括border、水平滚动条、margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素" class="headerlink" title="clientHeight不包括border、水平滚动条、margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素"></a>clientHeight不包括border、水平滚动条、margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-33eaea347fc2c021.png" alt="image.png"></p>
<blockquote>
<p>3.offsetHeight:在clientHeight的基础上， 加上边框和滚动条的高度——元素宽高+Padding+margin</p>
</blockquote>
<h4 id="offsetHeight不包括margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素。"><a href="#offsetHeight不包括margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素。" class="headerlink" title="offsetHeight不包括margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素。"></a>offsetHeight不包括margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素。</h4><blockquote>
<p>4.scrollTop: 在clientHeight区内滚动条滚动了多少距离（包括之前已滚动过的隐藏内容）</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-662f5cebbf36bd00.png" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/css/3098875-e9058c7980cd0397.png" alt="image.png"></p>
<blockquote>
<p>5.scrollTop: 代表在有滚动条时，滚动条向下滚动的距离也就是元素顶部被遮住部分的高度。在没有滚动条时scrollTop==0恒成立。单位px，可读可设置。<br>6.offsetTop: 当前元素顶部距离最近父元素顶部的距离,和有没有滚动条没有关系。单位px，只读元素。</p>
</blockquote>
]]></content>
      <categories>
        <category>Css</category>
      </categories>
      <tags>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>requireJS入门学习</title>
    <url>/posts/5422b83b.html</url>
    <content><![CDATA[<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">RequireJS是一个JavaScript文件和模块加载器。 </span><br><span class="line">它针对浏览器内使用进行了优化，但可以在其他JavaScript环境中使用，例如Rhino和<span class="keyword">Node</span><span class="title">。</span></span><br><span class="line"><span class="title"> 使用像RequireJS</span>这样的模块化脚本加载器可以提高代码的速度和质量。</span><br><span class="line"></span><br><span class="line">异步加载的问题，简单点来说就是一个模块没有加载完，</span><br><span class="line">这个模块的function就被调用，那就悲剧了。解决这个有两个方法，一个是定义OnError， </span><br><span class="line">这个参数是RequireJS调用出错的时候生效。</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h4 id="1-下载文件"><a href="#1-下载文件" class="headerlink" title="1.下载文件"></a>1.下载文件</h4><p><a href="[https://requirejs.org/docs/download.html](https://requirejs.org/docs/download.html)">下载文件地址</a><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/requirejs/3098875-04cd66ccb7b083a8%20.png" alt="image.png"></p>
<h4 id="理解概念"><a href="#理解概念" class="headerlink" title="理解概念"></a>理解概念</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>([],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;) <span class="comment">//个人理解 加载其他js</span></span><br><span class="line">define <span class="comment">//定义依赖关系</span></span><br></pre></td></tr></table></figure>

<h4 id="2-加载js文件"><a href="#2-加载js文件" class="headerlink" title="2.加载js文件"></a>2.加载js文件</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--这将baseUrl(主入口)设置为“scripts”目录，并且 加载一个模块ID为'main'的脚本--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--也可以手动配置配置文件--&gt;</span></span><br><span class="line">如果没有使用data-main作为主入口，默认的baseUrl是运行requireJS脚本所在的HTML页面路径</span><br><span class="line">(默认值是加载require.js的HTML所处的位置)</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"scripts/main.js"</span> <span class="attr">src</span>=<span class="string">"scripts/require.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">注意：RequireJS默认假定所有的依赖资源都是js脚本，</span><br><span class="line">因此无需在module ID上再加".js"后缀，RequireJS在进行module ID到path的解析时会自动补上后缀。</span><br></pre></td></tr></table></figure>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">/<span class="regexp">/以TP5框架为例：</span></span><br><span class="line"><span class="regexp">www/</span></span><br><span class="line">   index.html</span><br><span class="line">   js/   ---<span class="regexp">//js</span>项目总目录</span><br><span class="line">    app/</span><br><span class="line">      sub.js</span><br><span class="line">    <span class="class"><span class="keyword">lib</span>/  ---//项目第三方库</span></span><br><span class="line">      jquery.js</span><br><span class="line">      canvas.js</span><br><span class="line">    app.js</span><br><span class="line">    <span class="keyword">require</span>.js</span><br></pre></td></tr></table></figure>
<h4 id="目录结构解析"><a href="#目录结构解析" class="headerlink" title="目录结构解析"></a>目录结构解析</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">-----栗子：</span><br><span class="line">index.html</span><br><span class="line"></span><br><span class="line">&lt;script data-main=<span class="string">"js/app.js"</span> src=<span class="string">"js/require.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">js/app.js</span><br><span class="line"></span><br><span class="line">requirejs.config(&#123;</span><br><span class="line">    <span class="comment">//默认情况下从js / lib加载任何模块ID。</span></span><br><span class="line">    baseUrl: <span class="string">'js/lib'</span>,</span><br><span class="line">      <span class="comment">//除了，如果模块ID以“app”开头，   </span></span><br><span class="line">     <span class="comment">//从js / app目录加载它</span></span><br><span class="line">     <span class="comment">// paths config相对于baseUrl，</span></span><br><span class="line">     <span class="comment">//依赖资源都是js脚本,无需在module ID上再加".js"后缀</span></span><br><span class="line">     <span class="comment">//路径配置可以用于整个目录。</span></span><br><span class="line">    paths: &#123;</span><br><span class="line">        app: <span class="string">'../app'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入依赖app.js启动等其他js。</span></span><br><span class="line">requirejs([<span class="string">'jquery'</span>, <span class="string">'canvas'</span>, <span class="string">'app/sub'</span>],<span class="function"><span class="keyword">function</span>   (<span class="params">$,  canvas,   sub</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// jQuery，canvas和app / sub模块都是已加载，现在可在此处使用。</span></span><br><span class="line">    <span class="comment">//可以使用已加载js文件方法，属性等</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="3-配置项"><a href="#3-配置项" class="headerlink" title="3.配置项"></a>3.配置项</h4><p><a href="https://segmentfault.com/a/1190000002401665" target="_blank" rel="noopener">配置项学习入口</a></p>
<h4 id="配置文件位置"><a href="#配置文件位置" class="headerlink" title="配置文件位置"></a>配置文件位置</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">在引用requirejs上面</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/require.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">require</span>.config(&#123;</span></span><br><span class="line"><span class="actionscript">    baseUrl: <span class="string">"/another/path"</span>,</span></span><br><span class="line">    paths: &#123;</span><br><span class="line"><span class="actionscript">        <span class="string">"some"</span>: <span class="string">"some/v1.0"</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    waitSeconds: 15</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="built_in">require</span>( [<span class="string">"some/module"</span>, <span class="string">"my/module"</span>, <span class="string">"a.js"</span>, <span class="string">"b.js"</span>],</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span><span class="params">(someModule,    myModule)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//This function will be called when all the dependencies</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//listed above are loaded. Note that this function could</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//be called before the page is loaded.</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//This callback is optional.</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">在引用requirejs下面</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> <span class="built_in">require</span> = &#123;</span></span><br><span class="line"><span class="actionscript">        baseUrl: <span class="string">"/another/path"</span>,</span></span><br><span class="line">        paths: &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">"some"</span>: <span class="string">"some/v1.0"</span></span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">     deps: [<span class="string">"some/module1"</span>, <span class="string">"my/module2"</span>, <span class="string">"a.js"</span>, <span class="string">"b.js"</span>],</span></span><br><span class="line"><span class="actionscript">        callback: <span class="function"><span class="keyword">function</span><span class="params">(module1, module2)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//This function will be called when all the dependencies</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//listed above in deps are loaded. Note that this</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//function could be called before the page is loaded.</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//This callback is optional.</span></span></span><br><span class="line">        &#125;</span><br><span class="line">        waitSeconds: 15</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/require.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>1.配置文件单独成一个文件，不要跟具体的业务模块耦合。<br>2.最好使用 var require = {} 的形式而不是 window.require = {}的形式。后者在IE中运行不正常。</p>
<h4 id="urlArgs"><a href="#urlArgs" class="headerlink" title="urlArgs"></a>urlArgs</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">RequireJS获取资源时附加在URL后面的额外的query参数。</span><br><span class="line">作为浏览器或服务器未正确配置时的“cache bust”手段很有用。使用cache bust配置的一个示例：</span><br><span class="line">urlArgs: <span class="string">"bust="</span> +  (new Date()).getTime()</span><br><span class="line">在开发中这很有用，但请记得在部署到生成环境之前移除它。</span><br><span class="line"></span><br><span class="line">在fa配置文件中使用如下：</span><br><span class="line"></span><br><span class="line"> urlArgs: <span class="string">"v="</span> + requirejs<span class="selector-class">.s</span><span class="selector-class">.contexts</span>._<span class="selector-class">.config</span><span class="selector-class">.config</span><span class="selector-class">.site</span><span class="selector-class">.version</span>,</span><br></pre></td></tr></table></figure>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">map: &#123;</span><br><span class="line">    <span class="string">'&lt;module name&gt;'</span>: &#123;</span><br><span class="line">        <span class="string">'&lt;Id&gt;'</span>: <span class="string">'&lt;JS file&gt;'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="regexp">//</span>这里&lt;module name&gt;是一个已经存在的模块js文件，或者你可以使用<span class="string">'*'</span>。这里Id用于别名JS文件。</span><br></pre></td></tr></table></figure>
<h4 id="config："><a href="#config：" class="headerlink" title="config："></a>config：</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">当您要将某些配置传递给所有模块时使用。这些值是所有模块的通用值</span><br><span class="line">现在，在您的js文件中，您可以使用以下命令访问此值:<span class="built_in">require</span>.s.contexts._.<span class="built_in">config</span></span><br><span class="line">var <span class="built_in">config</span> = &#123;</span><br><span class="line">    <span class="string">"map"</span>: &#123;</span><br><span class="line">        <span class="string">'*'</span>: &#123;</span><br><span class="line">            <span class="string">'sample'</span>: <span class="string">'sample1.js'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">config</span>: &#123;</span><br><span class="line">        <span class="string">"testData"</span>:&#123;</span><br><span class="line">            <span class="string">"color"</span>:<span class="string">'red'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">require</span>.s.contexts._.<span class="built_in">config</span>.testData.color);</span><br><span class="line"></span><br><span class="line">在fa中使用如下:</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    var <span class="built_in">require</span> = &#123;</span><br><span class="line">        <span class="built_in">config</span>:  &#123;$<span class="built_in">config</span>|json_encode&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> requirejs.s.contexts._.<span class="built_in">config</span>.xx.xx.xx 这个是直接把requirejs的对象暴露出来  ！！！主要是配置文件信息的读取！</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/requirejs/3098875-8680f34e113bc88d%20.png" alt="image.png"></p>
<h4 id="deps：表示当前模块需要依赖哪些库"><a href="#deps：表示当前模块需要依赖哪些库" class="headerlink" title="deps：表示当前模块需要依赖哪些库"></a>deps：表示当前模块需要依赖哪些库</h4><h4 id="exports-暴露的全局名称"><a href="#exports-暴露的全局名称" class="headerlink" title="exports:暴露的全局名称"></a>exports:暴露的全局名称</h4><h4 id="shim-配置没有使用define的依赖js文件"><a href="#shim-配置没有使用define的依赖js文件" class="headerlink" title="shim:配置没有使用define的依赖js文件"></a>shim:配置没有使用define的依赖js文件</h4><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">当有一些脚本时，它们用于你想要全局声明的那些脚本，以及那些不使用define（）来定义值的脚本，</span><br><span class="line">如果那些脚本已经使用了define（）那么它将无法正常工作。</span><br><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">    <span class="string">"shim"</span>: &#123;</span><br><span class="line">        <span class="string">"sample"</span>: &#123;</span><br><span class="line">        <span class="comment">//配置方式一：deps为模块名称，jquery为依赖的js模块</span></span><br><span class="line">            <span class="string">"deps"</span>: [<span class="string">"jquery"</span>],</span><br><span class="line">            <span class="string">"exports"</span>: webkulSample</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">exports是一个函数而非是字符串，暴露接口全局使用</span><br><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">    <span class="string">"shim"</span>: &#123;</span><br><span class="line">  <span class="comment">//配置方式二：deps为模块名称，deps为配置依赖的js模块，deps数组，表明该模块的依赖性</span></span><br><span class="line">        <span class="string">"sample"</span>: &#123;</span><br><span class="line">            <span class="string">"deps"</span>: [<span class="string">"jquery"</span>],</span><br><span class="line">            <span class="string">"exports"</span>: webkulSample,</span><br><span class="line">            <span class="keyword">init</span>: function (jquery) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.webkulSample.noConflict;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">init</span>:当加载多个模块的时候存在名字冲突的可能,比如JQuery、UnderScore等框架都会提供一个noConflict()函数来避免名字冲突</span><br><span class="line"></span><br><span class="line">这里，依赖关系是jquery，应该在sample.js之前加载。</span><br><span class="line">在这里，我们使用webkulSample作为全局模块。</span><br><span class="line">导出后调用<span class="keyword">init</span>函数，在此我们可以编写冲突或清理代码，在此函数中将所有依赖关系作为参数，并且此函数的返回对象覆盖“exports”中定义的字符串</span><br><span class="line"></span><br><span class="line">暴露全局栗子：</span><br><span class="line">参考fast.js  ---- window.Fast = Fast;</span><br></pre></td></tr></table></figure>

<p><a href="https://blog.csdn.net/aitangyong/article/details/44200751" target="_blank" rel="noopener">noConflict()题外话</a></p>
<p><a href="https://www.cnblogs.com/yuqingfamily/p/5775950.html" target="_blank" rel="noopener">关于$.extend()用法总结</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>jQuery.extend(object); </span><br><span class="line">为扩展jQuery类本身.为类添加新的方法。 </span><br><span class="line">为jQuery类添加类方法，可以理解为添加静态方法。</span><br><span class="line"></span><br><span class="line">栗子①：</span><br><span class="line"></span><br><span class="line">jQuery.extend(&#123;</span><br><span class="line">    min: <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &lt; b ? a : b;</span><br><span class="line">    &#125;,</span><br><span class="line">    max: <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">jQuery.min(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">//  2 </span></span><br><span class="line">jQuery.max(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">//  5</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>jQuery.fn.extend(object); <span class="comment">//给jQuery对象添加方法。</span></span><br><span class="line"><span class="comment">// 为jQuery类添加“成员函数”。jQuery类的实例才可以调用这个“成员函数”。</span></span><br><span class="line">栗子②</span><br><span class="line"><span class="comment">//开发一个插件，做一个特殊的编辑框，当它被点击时，便alert 当前编辑框里的内容</span></span><br><span class="line">$.fn.extend(&#123;</span><br><span class="line">    alertWhileClick: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert($(<span class="keyword">this</span>).val());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//$("#input1")是jQuery的实例，调用这个扩展方法</span></span><br><span class="line">$(<span class="string">"#input1"</span>).alertWhileClick();</span><br></pre></td></tr></table></figure>
<p>trigger()</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">trigger</span><span class="params">()</span></span> 方法触发被选元素的指定事件类型。</span><br></pre></td></tr></table></figure>

<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">主要是了解后台模块使用requireJs怎么引用其他<span class="keyword">js</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">理解比较有限，不足之处望指点</span></span><br></pre></td></tr></table></figure>
<p><a href="https://doc.fastadmin.net/docs/index.html" target="_blank" rel="noopener">点击进入….官方文档入口</a></p>
<!--more-->
<h4 id="1-目录"><a href="#1-目录" class="headerlink" title="1.目录"></a>1.目录</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/l1C2jeaw6JsxSnr.png" alt="image.png"></p>
<h4 id="2-主入口文件"><a href="#2-主入口文件" class="headerlink" title="2.主入口文件"></a>2.主入口文件</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span><span class="number">-1.</span>html文件位置(主入口)</span><br><span class="line"></span><br><span class="line">-------<span class="string">'admin/view/common/script'</span></span><br><span class="line"></span><br><span class="line">&lt;script src=<span class="string">"__CDN__/assets/js/require&#123;$Think.config.app_debug?'':'.min'&#125;.js"</span> data-main=<span class="string">"__CDN__/assets/js/require-backend&#123;$Think.config.app_debug?'':'.min'&#125;.js?v=&#123;$site.version&#125;"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">1-2.JS文件调用和初始化位置（主入口）：</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">-------'require-backend.js'</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">主要参数：</span></span><br><span class="line"><span class="regexp">urlArgs:"v=" + requirejs.s.contexts._.config.config.site.version, /</span><span class="regexp">/版本号</span></span><br><span class="line"><span class="regexp">根路径baseUrl：requirejs.s.contexts._.config.config.site.cdnurl + '/</span>assets/js/<span class="string">', //资源基础路径</span></span><br><span class="line"><span class="string">paths：参考require-backend.js</span></span><br><span class="line"><span class="string">shim:参考require-backend.js</span></span><br><span class="line"><span class="string">map: &#123;</span></span><br><span class="line"><span class="string">        '</span>*<span class="string">': &#123;</span></span><br><span class="line"><span class="string">            '</span>css<span class="string">': '</span>../libs/<span class="built_in">require</span>-css/css.min<span class="string">'</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">其他参数参照'</span><span class="built_in">require</span>-backend.js<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">该js文件主要作用：</span></span><br><span class="line"><span class="string">1.初始化暴露配置</span></span><br><span class="line"><span class="string">2.暴露全局语言包</span></span><br><span class="line"><span class="string">3.默认加载依赖：'</span>fast<span class="string">' ,'</span>backend<span class="string">', '</span>backend-init<span class="string">', '</span>addons<span class="string">'等文件</span></span><br><span class="line"><span class="string">4.牛逼之处：</span></span><br><span class="line"><span class="string">//根据js文件名自动加载依赖和控制器</span></span><br><span class="line"><span class="string"> if (Config.jsname) &#123;</span></span><br><span class="line"><span class="string">    require([Config.jsname], function (Controller) &#123;</span></span><br><span class="line"><span class="string">          Controller[Config.actionname] != undefined &amp;&amp; Controller[Config.actionname]();</span></span><br><span class="line"><span class="string">    &#125;, function (e) &#123;</span></span><br><span class="line"><span class="string">        console.error(e);</span></span><br><span class="line"><span class="string">      // 这里可捕获模块加载的错误</span></span><br><span class="line"><span class="string">      &#125;);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">注意点:</span></span><br><span class="line"><span class="string">在控制器章节我们有提到每个控制器都对应一个JS模块，控制器名称和JS中模块名称是一一对应的。</span></span><br><span class="line"><span class="string">如：</span></span><br><span class="line"><span class="string">以TP5--MVC模型为例</span></span><br><span class="line"><span class="string">controller层：public function detail()&#123;&#125;</span></span><br><span class="line"><span class="string">Js文件：var controller = &#123; detail:function()&#123;&#125; &#125;</span></span><br></pre></td></tr></table></figure>


<p><a href="https://www.jianshu.com/p/37ec668500ae" target="_blank" rel="noopener">配置项介绍入口</a></p>
<h4 id="JS语言包加载"><a href="#JS语言包加载" class="headerlink" title="JS语言包加载"></a>JS语言包加载</h4><blockquote>
<p>requirejs.s.contexts._.config.xx.xx.xx 这个是直接把requirejs的对象暴露出来  ！！！主要是配置文件信息的读取！</p>
</blockquote>
<p><a href="https://www.jianshu.com/writer#/notebooks/6413971/notes/43642929/preview" target="_blank" rel="noopener"> requirejs.s.contexts._.config详解</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   <span class="built_in">require</span>.backend.js中</span><br><span class="line">    <span class="number">1.</span>初始配置</span><br><span class="line">    <span class="keyword">var</span> Config = requirejs.s.contexts._.config.config;</span><br><span class="line"></span><br><span class="line">    <span class="number">2.</span>将Config渲染到全局</span><br><span class="line">    <span class="built_in">window</span>.Config = Config;</span><br><span class="line"></span><br><span class="line">    <span class="number">3.</span> 配置语言包的路径</span><br><span class="line">    <span class="keyword">var</span> paths = &#123;&#125;;</span><br><span class="line">    paths[<span class="string">'lang'</span>] = Config.moduleurl + <span class="string">'/ajax/lang?callback=define&amp;controllername='</span> + Config.controllername;</span><br><span class="line">    <span class="comment">///模块.php/ajax/lang?callback=define&amp;controllername=控制器名</span></span><br><span class="line"></span><br><span class="line">    <span class="number">4.</span>当您要将某些配置传递给所有模块时使用。这些值是所有模块的通用值--暴露配置语言包</span><br><span class="line">    <span class="built_in">require</span>.config(&#123;<span class="attr">paths</span>: paths&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="number">5.</span>初始化fast.js,调用lang方法，根据C层去找语言包</span><br><span class="line">      lang: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> args = argument</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    lang方法里没有写参数却传入了参数，该如何拿到参数--&gt;argument</span><br><span class="line"></span><br><span class="line">    <span class="number">6.</span>在fast.js将语言方法暴露到全局中去</span><br><span class="line">    <span class="built_in">window</span>.__ = Fast.lang;</span><br><span class="line"></span><br><span class="line">    <span class="number">7.</span><span class="built_in">require</span>.backend.js初始化主文件加载</span><br><span class="line">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>([<span class="string">'fast'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">Fast</span>) </span>&#123;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">使用方式：</span><br><span class="line">HTML：&#123;:__(<span class="string">''</span>)&#125;</span><br><span class="line">PHP/JS：__(<span class="string">''</span>)</span><br></pre></td></tr></table></figure>
<p><a href="https://www.jianshu.com/p/e6bfa4bdf718" target="_blank" rel="noopener">JS-arguments讲解</a><br><a href="https://segmentfault.com/a/1190000011467723" target="_blank" rel="noopener">JS所有内置对象属性和方法汇总</a></p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line">使用栗子：</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">var</span> pattern = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"%([1-"</span> + <span class="built_in">arguments</span>.length + <span class="string">"])"</span>, <span class="string">"g"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">String</span>(<span class="built_in">string</span>).replace(pattern, <span class="function"><span class="keyword">function</span>(<span class="params">match, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> args[index];</span><br><span class="line">    &#125;);   </span><br><span class="line">&#125;;</span><br><span class="line">format(<span class="string">"And the %1 want to know whose %2 you %3"</span>, <span class="string">"papers"</span>, <span class="string">"shirt"</span>, <span class="string">"wear"</span>);</span><br><span class="line">返回：“And the papers want to know whose shirt you wear”</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/Pp953J1eHu8hzCR.png" alt="image.png"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/FRTWUZb5n2oeCvx.png" alt="image.png"></p>
<h4 id="Object-keys-obj"><a href="#Object-keys-obj" class="headerlink" title="Object.keys(obj)"></a>Object.keys(obj)</h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">参考火狐开发手册</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">解释：</span><br><span class="line">返回一个由一个给定对象的自身可枚举属性组成的数组，</span><br><span class="line">数组中属性名的排列顺序和使用for...in语句，</span><br><span class="line">以任意顺序遍历一个对象自有的、继承的、可枚举的、非Symbol的属性。对于每个不同的属性，语句都会被执行。") </span><br><span class="line">循环遍历该对象时返回的顺序一致</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="comment">// simple array</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(arr)); <span class="comment">// console: ['0', '1', '2']</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="comment">// array like object</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> obj = &#123; <span class="number">0</span>: <span class="string">'a'</span>, <span class="number">1</span>: <span class="string">'b'</span>, <span class="number">2</span>: <span class="string">'c'</span> &#125;;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj)); <span class="comment">// console: ['0', '1', '2']</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="comment">// array like object with random key ordering</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> anObj = &#123; <span class="number">100</span>: <span class="string">'a'</span>, <span class="number">2</span>: <span class="string">'b'</span>, <span class="number">7</span>: <span class="string">'c'</span> &#125;;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(anObj)); <span class="comment">// console: ['2', '7', '100']</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">简单理解</span><br><span class="line">返回obj或者array中的KEY值并按照从小排列</span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>requireJS</category>
      </categories>
      <tags>
        <tag>requireJS入门与使用</tag>
      </tags>
  </entry>
  <entry>
    <title>git常见操作命令与问题</title>
    <url>/posts/888d2e2.html</url>
    <content><![CDATA[<h3 id="标准Git提交注解"><a href="#标准Git提交注解" class="headerlink" title="标准Git提交注解"></a>标准Git提交注解</h3><p>第1行：提交修改内容的摘要<br>第2行：空行<br>第3行以后：修改的理由</p>
<h3 id="初始化远程仓库"><a href="#初始化远程仓库" class="headerlink" title="初始化远程仓库"></a>初始化远程仓库</h3><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git init</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-aa08eb0c8eea9641.png" alt="image.png"></p>
<a id="more"></a>
<h3 id="连接远程仓库"><a href="#连接远程仓库" class="headerlink" title="连接远程仓库"></a>连接远程仓库</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line">git remote <span class="keyword">add</span><span class="bash"> l链接别名 git地址链接</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-84b3a36deb70c062.png" alt="image.png"></p>
<h3 id="克隆远程分支"><a href="#克隆远程分支" class="headerlink" title="克隆远程分支"></a>克隆远程分支</h3><figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">-b</span> 分支名  git链接地址//克隆特定分支</span><br><span class="line">git <span class="keyword">clone</span> <span class="title">分支名 git</span>链接地址 //默认克隆<span class="literal">master</span>分支</span><br></pre></td></tr></table></figure>
<h3 id="查看本地分支"><a href="#查看本地分支" class="headerlink" title="查看本地分支"></a>查看本地分支</h3><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">git branch -<span class="keyword">a</span><span class="comment"> //查看全部地址分支</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-ef916c40ab81e016.png" alt="image.png"></p>
<h3 id="删除本地分支"><a href="#删除本地分支" class="headerlink" title="删除本地分支"></a>删除本地分支</h3><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">branch </span>-d/-D 分支名</span><br></pre></td></tr></table></figure>
<h3 id="查看分支状态"><a href="#查看分支状态" class="headerlink" title="查看分支状态"></a>查看分支状态</h3><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git status</span></span><br></pre></td></tr></table></figure>
<h3 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">git</span> <span class="string">checkout 分支名</span></span><br><span class="line"><span class="attr">gitcheckout</span> <span class="string">-b 分支名  // 新建本地分支并切换到当期分支</span></span><br></pre></td></tr></table></figure>
<h3 id="暂存当前工作区代码"><a href="#暂存当前工作区代码" class="headerlink" title="暂存当前工作区代码"></a>暂存当前工作区代码</h3><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">git stash</span><br><span class="line">用下面这个代替</span><br><span class="line">推荐给每个stash加一个<span class="keyword">message</span>，用于记录版本</span><br><span class="line">git stash save <span class="string">"注释"</span></span><br></pre></td></tr></table></figure>
<h3 id="查看当前暂存工作区代码"><a href="#查看当前暂存工作区代码" class="headerlink" title="查看当前暂存工作区代码"></a>查看当前暂存工作区代码</h3><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">git stash <span class="built_in">list</span></span><br></pre></td></tr></table></figure>
<h3 id="移除stash"><a href="#移除stash" class="headerlink" title="移除stash"></a>移除stash</h3><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line"><span class="symbol">stash@</span>&#123;<span class="number">0</span>&#125;: WIP on master: <span class="number">049</span>d078 added the index file</span><br><span class="line"><span class="symbol">stash@</span>&#123;<span class="number">1</span>&#125;: WIP on master: c264051 Revert <span class="string">"added file_size"</span></span><br><span class="line"><span class="symbol">stash@</span>&#123;<span class="number">2</span>&#125;: WIP on master: <span class="number">21</span>d80a5 added number to log</span><br><span class="line">$ git stash drop <span class="symbol">stash@</span>&#123;<span class="number">0</span>&#125;</span><br><span class="line">Dropped <span class="symbol">stash@</span>&#123;<span class="number">0</span>&#125; (<span class="number">364e91f</span>3f268f0900bc3ee613f9f733e82aaed43)</span><br></pre></td></tr></table></figure>
<h3 id="查看指定stash的对比"><a href="#查看指定stash的对比" class="headerlink" title="查看指定stash的对比"></a>查看指定stash的对比</h3><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">git stash <span class="keyword">show</span> 文件名</span><br></pre></td></tr></table></figure>
<h3 id="查看远程连接"><a href="#查看远程连接" class="headerlink" title="查看远程连接"></a>查看远程连接</h3><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git remode -v</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-dbe574874e1c02e6.png" alt="image.png"></p>
<h3 id="删除远程连接"><a href="#删除远程连接" class="headerlink" title="删除远程连接"></a>删除远程连接</h3><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git remote rm github</span></span><br></pre></td></tr></table></figure>
<h3 id="重置远程连接git"><a href="#重置远程连接git" class="headerlink" title="重置远程连接git"></a>重置远程连接git</h3><figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line"><span class="string">git </span><span class="string">remte </span><span class="built_in">set-url</span> <span class="string">origin </span><span class="string">URL</span></span><br></pre></td></tr></table></figure>
<h3 id="新建远程分支-推送远程仓库"><a href="#新建远程分支-推送远程仓库" class="headerlink" title="新建远程分支,推送远程仓库"></a>新建远程分支,推送远程仓库</h3><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>切换到当前分支</span><br><span class="line">git checkout master <span class="comment">//在主分支进入develop分支</span></span><br><span class="line"><span class="number">2.</span>根据当前分支新建一个分支</span><br><span class="line">git checkout -b dev <span class="comment">//以master为源创建本地分支dev</span></span><br><span class="line"><span class="number">3.</span>推送到远程分支</span><br><span class="line">git push origin dev <span class="comment">//将本地fromdevelop分支作为远程dev分支</span></span><br></pre></td></tr></table></figure>
<h3 id="删除远程git分支"><a href="#删除远程git分支" class="headerlink" title="删除远程git分支"></a>删除远程git分支</h3><figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">push</span> --<span class="built_in">delete</span> 链接别名[<span class="built_in">origin</span>]  远程分支名</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-1b317fd2f097f390.png" alt="image.png"></p>
<h3 id="删除远程仓库文件"><a href="#删除远程仓库文件" class="headerlink" title="删除远程仓库文件"></a>删除远程仓库文件</h3><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">git rm -r <span class="comment">--cached 文件夹/文件名</span></span><br></pre></td></tr></table></figure>
<h3 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a><a href="https://www.jianshu.com/p/f7ed3dd0d2d8" target="_blank" rel="noopener">git rebase</a></h3><h3 id="不同分支合并"><a href="#不同分支合并" class="headerlink" title="不同分支合并"></a>不同分支合并</h3><div class="note success">
            <p>开发新功能在分支上，测试完成后合并到主分支上<br>一般步骤如下：</p>
          </div>

<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://image-static.segmentfault.com/416/036/4160367930-5e993c6eb9dae_articlex" alt="git merge"></p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.新建新分支</span><br><span class="line">    git checkout -b <span class="built_in">feature</span></span><br><span class="line"><span class="number">2</span>.开发新功能[以文件代替]</span><br><span class="line">    vim newFunc.<span class="built_in">go</span></span><br><span class="line">    git add newFunc.<span class="built_in">go</span></span><br><span class="line">    git commit -m 'add <span class="built_in">new</span> func'</span><br><span class="line"><span class="number">3</span>.查看提交日志和分支情况</span><br><span class="line">    git <span class="built_in">log</span> --oneline --graph</span><br><span class="line">    git branch</span><br><span class="line"><span class="number">4</span>.合并分支</span><br><span class="line">有两种方法「有冲突自行解决在提交保存」</span><br><span class="line"><span class="number">4.1</span>:切换到主分支master,使用git merge <span class="built_in">feature</span>「易造成分支历史日志混乱」</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://image-static.segmentfault.com/192/666/1926668606-5e993ca79e6fe_articlex" alt="冲突修复演示"></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://image-static.segmentfault.com/412/998/4129986506-5e993cbad5235_articlex" alt="git rebase 使用"></p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line"><span class="number">4.2</span>:使用git rebase合并分支  </span><br><span class="line"><span class="number">1</span>:切换到新功能分支下</span><br><span class="line"><span class="number">2</span>:在分支上执行「git rebase <span class="literal">master</span>」</span><br><span class="line">解释：以<span class="literal">master</span>为基础，将feature分支上的修改增加到<span class="literal">master</span>分支上，并生成新的版本。</span><br><span class="line">git rebase <span class="literal">master</span></span><br><span class="line"><span class="number">3</span>:解决产生冲突 </span><br><span class="line">    使用git rebase --continue继续完成之前的操作</span><br><span class="line"><span class="number">4</span>:查看提交历史日志[自己衡量是否需要]</span><br><span class="line"><span class="number">5</span>:合并至主分支上面去</span><br><span class="line">    切换到主分支上 git checkout <span class="literal">master</span></span><br><span class="line">    执行 git merge feature</span><br><span class="line"><span class="number">6</span>:删除本地分支 git branch -d  分支名</span><br><span class="line">    删除远程分支 git push --delete 链接别名[origin]  远程分支名</span><br></pre></td></tr></table></figure>


<h3 id="拉取远程分支远-程新建分支"><a href="#拉取远程分支远-程新建分支" class="headerlink" title="拉取远程分支远[程新建分支]"></a>拉取远程分支远[程新建分支]</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">1.</span></span><br><span class="line"><span class="attr">git</span> <span class="string">fetch origin（连接别名） master（分支）</span></span><br><span class="line"><span class="attr">git</span> <span class="string">add.</span></span><br><span class="line"><span class="attr">git</span> <span class="string">commit -m 注释</span></span><br><span class="line"><span class="attr">git</span> <span class="string">push</span></span><br><span class="line"><span class="attr">完成远程新建分支</span></span><br><span class="line"><span class="attr">2.</span></span><br><span class="line"><span class="attr">git</span> <span class="string">branch 分支名</span></span><br><span class="line"><span class="attr">git</span> <span class="string">push origin(链接别名) 分支名</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/git%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C/3098875-f8359479aa69fc43.png" alt="image.png"></p>
<h3 id="查看解决冲突"><a href="#查看解决冲突" class="headerlink" title="查看解决冲突"></a><a href="https://www.jianshu.com/p/b69f6dc03f55" target="_blank" rel="noopener">查看解决冲突</a></h3><h3 id="回滚版本"><a href="#回滚版本" class="headerlink" title="回滚版本"></a>回滚版本</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD^ 回到上一个版本</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD~10 回到第10个之前</span></span><br><span class="line">git reflog 用来记录你的每一次命令</span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard 版本号</span></span><br><span class="line"></span><br><span class="line">已经Git push 上去，回滚</span><br><span class="line">用git revert来撤销已经提交的更改，而git <span class="keyword">reset</span>用来撤销没有提交的更改</span><br><span class="line">git revert <span class="keyword">HEAD</span>~<span class="number">3</span> //丢弃最近的三个<span class="keyword">commit</span>，把状态恢复到最近的第四个<span class="keyword">commit</span>，并且提交一个新的<span class="keyword">commit</span>来记录这次改变</span><br><span class="line">git revert -n <span class="keyword">master</span>~<span class="number">5.</span>.master~<span class="number">2</span></span><br><span class="line">//丢弃从最近的第五个<span class="keyword">commit</span>（包含）到第二个（不包含）,但是不自动生成<span class="keyword">commit</span>，这个revert仅仅修改working tree和<span class="keyword">index</span>。</span><br></pre></td></tr></table></figure>
<h3 id="修改上一次commit内容"><a href="#修改上一次commit内容" class="headerlink" title="修改上一次commit内容"></a>修改上一次commit内容</h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">commit</span> <span class="comment">--amend</span></span><br></pre></td></tr></table></figure>
<h3 id="查看提交历史信息"><a href="#查看提交历史信息" class="headerlink" title="查看提交历史信息"></a>查看提交历史信息</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">git</span> <span class="string">shortlog 用户提交哪些组，再次显示简洁的主题行</span></span><br><span class="line"><span class="attr">git</span> <span class="string">reflog</span></span><br><span class="line"><span class="attr">git</span> <span class="string">log --oneline --graph</span></span><br></pre></td></tr></table></figure>
<h3 id="忽略-idea文件夹下文件"><a href="#忽略-idea文件夹下文件" class="headerlink" title="忽略.idea文件夹下文件"></a>忽略.idea文件夹下文件</h3><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">git rm -r <span class="params">--cached</span> <span class="string">.idea</span></span><br><span class="line">删除idea缓存</span><br><span class="line"><span class="string">.gitignore</span>中添加<span class="string">.idea</span></span><br></pre></td></tr></table></figure>

<h3 id="设置一次性账号密码"><a href="#设置一次性账号密码" class="headerlink" title="设置一次性账号密码"></a>设置一次性账号密码</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">执行一下 这个命令：</span><br><span class="line">git config --global credential.helper store</span><br><span class="line">然后，下次再输入一次 账号密码 就可以了。</span><br><span class="line"></span><br><span class="line">windown下修改拉取仓库代码登录账号密码</span><br><span class="line">[<span class="string">具体</span>](<span class="link">https://blog.csdn.net/qq_29298577/article/details/84314200</span>)</span><br><span class="line">控制面板 -----&gt; 用户账户------&gt; 管理windows凭据------&gt;找到对应的地址修改登录名称和密码即可</span><br></pre></td></tr></table></figure>

<h3 id="git-pull使用"><a href="#git-pull使用" class="headerlink" title="git pull使用"></a>git pull使用</h3><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">git pull = git fetch + git <span class="built_in">merge</span> FETCH_HEAD </span><br><span class="line"></span><br><span class="line">git pull <span class="comment">--rebase =  git fetch + git rebase FETCH_HEAD 「推荐使用」</span></span><br></pre></td></tr></table></figure>

<p>还在补充中ing……</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>vagrant虚拟机安装centos和宝塔</title>
    <url>/posts/5a9ca69a.html</url>
    <content><![CDATA[<blockquote class="blockquote-center">Linux权限,安装宝塔</blockquote>
<a id="more"></a>


<h4 id="重置sudo密码-如何应用root权限？"><a href="#重置sudo密码-如何应用root权限？" class="headerlink" title="重置sudo密码 如何应用root权限？"></a>重置sudo密码 如何应用root权限？</h4><ul>
<li>(1)sudo 命令<br>这样输入当前管理员用户密码就可以得到超级用户的权限。但默认的情况下5分钟root权限就失效了。</li>
<li>(2)sudo -i<br>通过这种方法输入当前管理员用户的密码就可以进到root用户。</li>
<li>(3)如果想一直使用root权限，要通过sudo切换到root用户。<br>重设置root用户的密码：<br>sudo passwd root<br>设置root用户的新密码。<br>之后自由的切换到root用户了<br>输入root用户的密码即可。<br>当然，如果想从root用户切换回一般用户，则可使用  su -val(一般用户名)<br>而当你再次切回到root用户，则只需要键入exit,再次输入exit则回到最初的用户下</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/7ysDKTV1U8FupLC.png" alt="重置sudo密码"></p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">新：root</span><br><span class="line">切换用户权限</span><br><span class="line"><span class="keyword">exit</span> 退出</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/ECUpQ9jbDhyzLmA.png" alt="image.png"></p>
<h4 id="安装宝塔出现权限错误"><a href="#安装宝塔出现权限错误" class="headerlink" title="安装宝塔出现权限错误"></a>安装宝塔出现权限错误</h4><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">切换<span class="built_in">为root</span> 进行安装</span><br></pre></td></tr></table></figure>
<h4 id="安装宝塔出现登录不了"><a href="#安装宝塔出现登录不了" class="headerlink" title="安装宝塔出现登录不了"></a>安装宝塔出现登录不了</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/7ysDKTV1U8FupLC.png" alt="image.png"><br><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/NYHRp4zZoWrL7qP.png" alt="image.png"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">配置私有地址：</span><br><span class="line"><span class="selector-tag">config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> "<span class="selector-tag">private_network</span>", <span class="selector-tag">ip</span>: "192<span class="selector-class">.168</span><span class="selector-class">.33</span><span class="selector-class">.20</span>"</span><br></pre></td></tr></table></figure>
<h4 id="vagrant-centos7-安装报错"><a href="#vagrant-centos7-安装报错" class="headerlink" title="vagrant+centos7 安装报错"></a>vagrant+centos7 安装报错</h4><p><a href="https://blog.csdn.net/shilei_zhang/article/details/72811274" target="_blank" rel="noopener">vagrant+centos7 安装报错传送门</a></p>
<h4 id="设置同步映射文件路径报错"><a href="#设置同步映射文件路径报错" class="headerlink" title="设置同步映射文件路径报错"></a>设置同步映射文件路径报错</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">config.vm.synced_folder <span class="string">"D:/vagrant/centos/"</span>, <span class="string">"/var/www"</span></span><br><span class="line">报错以下：</span><br><span class="line"></span><br><span class="line">Vagrant was unable <span class="keyword">to</span> mount VirtualBox shared folders. This is usually</span><br><span class="line">because the filesystem <span class="string">"vboxsf"</span> is <span class="keyword">not</span> available. This filesystem is</span><br><span class="line">made available via the VirtualBox Guest Additions <span class="keyword">and</span> kernel module.</span><br><span class="line">Please verify that these guest additions are properly installed <span class="keyword">in</span> the</span><br><span class="line">guest. This is <span class="keyword">not</span> a bug <span class="keyword">in</span> Vagrant <span class="keyword">and</span> is usually caused by a faulty</span><br><span class="line">Vagrant box. <span class="keyword">For</span> context, the command attempted was:</span><br><span class="line">mount -t vboxsf -o <span class="attribute">uid</span>=1000,gid=1000 var_www /var/www</span><br><span class="line">The <span class="builtin-name">error</span> output <span class="keyword">from</span> the command was:</span><br><span class="line">mount: unknown filesystem<span class="built_in"> type </span><span class="string">'vboxsf'</span></span><br></pre></td></tr></table></figure>
<h5 id="解决："><a href="#解决：" class="headerlink" title="解决："></a>解决：</h5><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">vagrant plugin install vagrant-vbguest</span><br><span class="line">vagrant <span class="keyword">reload</span> <span class="params">--provision</span></span><br></pre></td></tr></table></figure>
<h4 id="线上服务器上传本地项目访问没有找到文件-前提已购买域名-并绑定到购买服务器上"><a href="#线上服务器上传本地项目访问没有找到文件-前提已购买域名-并绑定到购买服务器上" class="headerlink" title="线上服务器上传本地项目访问没有找到文件(前提已购买域名 并绑定到购买服务器上)"></a>线上服务器上传本地项目访问没有找到文件(前提已购买域名 并绑定到购买服务器上)</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/lQ7sW2d5DtFkARK.png" alt="image.png"></p>
<h5 id="忘记查看宝塔登录端口URL"><a href="#忘记查看宝塔登录端口URL" class="headerlink" title="忘记查看宝塔登录端口URL"></a>忘记查看宝塔登录端口URL</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://i.loli.net/2020/03/22/KptCAWaqMjO2cSB.png" alt="image.png"></p>
]]></content>
      <categories>
        <category>vagrant</category>
      </categories>
      <tags>
        <tag>vagrant</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue Cli 3 与 TP5 前后端分离访问[未跨域]</title>
    <url>/posts/c0add594.html</url>
    <content><![CDATA[<p>作为新手，坑是少不了的！下面是我很荣幸跳的坑</p>
<h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/vuecli3%2Bphp%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/3098875-a904c86423d30c18.png" alt="结构目录"></p>
<h4 id="1-Vue-Cli3-和Vue-Cli2-区别"><a href="#1-Vue-Cli3-和Vue-Cli2-区别" class="headerlink" title="1.Vue Cli3 和Vue  Cli2 区别"></a>1.Vue Cli3 和Vue  Cli2 区别</h4><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>vue-cli <span class="number">3</span> 的 github 仓库由原有独立的 github 仓库迁移到了 vue 项目下</span><br><span class="line"><span class="number">2.</span>vue-cli <span class="number">3</span> 的项目架构完全抛弃了 vue-cli <span class="number">2</span> 的原有架构，<span class="number">3</span> 的设计更加抽象和简洁（此处后续可以详细介绍）</span><br><span class="line"><span class="number">3.</span>vue-cli <span class="number">3</span> 是基于 webpack <span class="number">4</span> 打造，vue-cli <span class="number">2</span> 还是 webapck <span class="number">3</span></span><br><span class="line"><span class="number">4.</span>vue-cli <span class="number">3</span> 的设计原则是“<span class="number">0</span>配置”</span><br><span class="line"><span class="number">5.</span>vue-cli <span class="number">3</span> 提供了 vue ui 命令，提供了可视化配置，更加人性化</span><br></pre></td></tr></table></figure>
<h5 id="以上对我来说有这个东西就行了-我反正也没有深入研究-哈哈哈-毕竟菜！"><a href="#以上对我来说有这个东西就行了-我反正也没有深入研究-哈哈哈-毕竟菜！" class="headerlink" title="以上对我来说有这个东西就行了 我反正也没有深入研究  哈哈哈  毕竟菜！"></a>以上对我来说有这个东西就行了 我反正也没有深入研究  哈哈哈  毕竟菜！</h5><blockquote>
<p>由于 vue-cli 3 也学习了 rollup 的零配置思路，所以项目初始化后，没有了以前熟悉的 build 目录，也就没有了 webpack.base.config.js、webpack.dev.config.js 、webpack.prod.config.js 等配置文件。</p>
</blockquote>
<h5 id="我还以为一直问怎么就没有了build-我去哪里配置东西-真惭愧！"><a href="#我还以为一直问怎么就没有了build-我去哪里配置东西-真惭愧！" class="headerlink" title="我还以为一直问怎么就没有了build 我去哪里配置东西  真惭愧！"></a>我还以为一直问怎么就没有了build 我去哪里配置东西  真惭愧！</h5><a id="more"></a>
<h4 id="2-Vue-Config-js-怎么配置"><a href="#2-Vue-Config-js-怎么配置" class="headerlink" title="2.Vue.Config.js 怎么配置?"></a>2.Vue.Config.js 怎么配置?</h4><p><a href="https://segmentfault.com/a/1190000016101954" target="_blank" rel="noopener">如何配置 vue-cli 3.0 的 vue.config.js</a><br><a href="https://segmentfault.com/u/shenyibandenanren" target="_blank" rel="noopener">以上链接大佬个人主页</a><br><a href="https://cli.vuejs.org/zh/guide/" target="_blank" rel="noopener">vue cli3中文文档</a><br><a href="https://webpack.js.org/plugins/mini-css-extract-plugin/" target="_blank" rel="noopener">webpack-plugins</a><br><a href="https://github.com/neutrinojs/webpack-chain" target="_blank" rel="noopener">webpack-chain</a></p>
<h4 id="附上我自己的配置（因人而异以下有的我都没有真正实践用过！！）"><a href="#附上我自己的配置（因人而异以下有的我都没有真正实践用过！！）" class="headerlink" title="附上我自己的配置（因人而异以下有的我都没有真正实践用过！！）"></a>附上我自己的配置（因人而异以下有的我都没有真正实践用过！！）</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	* *@2019-06-28</span></span><br><span class="line"><span class="comment">	* *<span class="doctag">@author <span class="variable">xxx</span></span></span></span><br><span class="line"><span class="comment">	* *<span class="doctag">@describe <span class="variable">vue</span></span>-cli 3.x配置文件</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"><span class="keyword">let</span> ts = <span class="built_in">Date</span>.parse(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> path.join(__dirname, dir);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	<span class="comment">// 基本路径</span></span><br><span class="line">	publicPath: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="string">'/'</span> : <span class="string">'/'</span>,</span><br><span class="line">	<span class="comment">// 用于嵌套生成的静态资产（js,css,img,fonts）目录</span></span><br><span class="line">	 assetsDir: <span class="string">'front'</span>,</span><br><span class="line">	<span class="comment">// 指定生成的 index.html 的输出路径 (相对于 outputDir)。也可以是一个绝对路径</span></span><br><span class="line">	indexPath: <span class="string">'index.html'</span>, <span class="comment">// Default: 'index.html'</span></span><br><span class="line">	<span class="comment">// 输出文件目录</span></span><br><span class="line">	outputDir: <span class="string">'dist'</span>, <span class="comment">// 默认dist</span></span><br><span class="line">	filenameHashing: <span class="literal">true</span>,</span><br><span class="line">	<span class="comment">// 构建多页时使用</span></span><br><span class="line">	pages: <span class="literal">undefined</span>,</span><br><span class="line">	<span class="comment">// eslint-loader是否在保存的时候检查</span></span><br><span class="line">	lintOnSave: <span class="literal">true</span>,</span><br><span class="line">	<span class="comment">// 是否使用包含运行时编译器的Vue核心的构建</span></span><br><span class="line">	runtimeCompiler: <span class="literal">false</span>,</span><br><span class="line">	<span class="comment">// 默认情况下 babel-loader 会忽略所有 node_modules 中的文件。如果你想要通过 Babel 显式转译一个依赖，可以在这个选项中列出来</span></span><br><span class="line">	transpileDependencies: [],</span><br><span class="line">	<span class="comment">// 如果你不需要生产环境的 source map，可以将其设置为 false 以加速生产环境构建。</span></span><br><span class="line">	productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">	<span class="comment">// 如果这个值是一个对象，则会通过 webpack-merge 合并到最终的配置中。如果这个值是一个函数，则会接收被解析的配置作为参数。该函数及可以修改配置并不返回任何东西，也可以返回一个被克隆或合并过的配置版本。</span></span><br><span class="line">	configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(process.env.NODE_ENV);</span><br><span class="line">			<span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// 是一个函数，会接收一个基于 webpack-chain 的 ChainableConfig 实例。允许对内部的 webpack 配置进行更细粒度的修改。</span></span><br><span class="line">	chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(process.env.VUE_APP_MODE == <span class="string">'development'</span>)&#123;</span><br><span class="line">			config.plugin(<span class="string">'compress'</span>)</span><br><span class="line">			.use(FileManagerPlugin, [&#123;</span><br><span class="line">				onEnd: &#123;</span><br><span class="line">					<span class="keyword">delete</span>: [ <span class="comment">//首先需要删除项目根目录下的dist.zip</span></span><br><span class="line">						<span class="string">'./*.zip'</span>,</span><br><span class="line">					],</span><br><span class="line">					archive: [ <span class="comment">//然后我们选择dist文件夹将之打包成dist.zip并放在根目录</span></span><br><span class="line">						&#123;<span class="attr">source</span>: <span class="string">'./dist'</span>, <span class="attr">destination</span>: <span class="string">`./biProject-<span class="subst">$&#123;ts&#125;</span>-production.zip`</span>&#125;,</span><br><span class="line">						&#123;<span class="attr">source</span>: <span class="string">'./beta'</span>, <span class="attr">destination</span>: <span class="string">`./biProject-<span class="subst">$&#123;ts&#125;</span>-test.zip`</span>&#125;</span><br><span class="line">					]</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;])</span><br><span class="line">		&#125;	</span><br><span class="line">        <span class="comment">// 配置路径别名，你可以自己再加，按这种格式.set('', resolve(''))</span></span><br><span class="line">		config.resolve.alias</span><br><span class="line">		.set(<span class="string">'@'</span>, resolve(<span class="string">'src'</span>))</span><br><span class="line">		.set(<span class="string">'@assets'</span>,resolve(<span class="string">'src/assets'</span>))</span><br><span class="line"></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// css相关配置</span></span><br><span class="line">	css: &#123;</span><br><span class="line">		<span class="comment">// 启用 CSS modules</span></span><br><span class="line">		modules: <span class="literal">false</span>,</span><br><span class="line">		<span class="comment">// 是否使用css分离插件</span></span><br><span class="line">		extract: <span class="literal">true</span>,</span><br><span class="line">		<span class="comment">// 开启 CSS source maps?</span></span><br><span class="line">		sourceMap: <span class="literal">false</span>,</span><br><span class="line">		<span class="comment">// css预设器配置项</span></span><br><span class="line">		loaderOptions: &#123;&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// webpack-dev-server 相关配置</span></span><br><span class="line">	devServer: &#123;</span><br><span class="line">		host: <span class="string">'0.0.0.0'</span>,</span><br><span class="line">		port: <span class="number">8080</span>,</span><br><span class="line">		https: <span class="literal">false</span>,</span><br><span class="line">		open: <span class="literal">true</span>,</span><br><span class="line">		hotOnly: <span class="literal">false</span>,</span><br><span class="line">		<span class="comment">// proxy: 'http://localhost:4000' // 配置跨域处理,只有一个代理</span></span><br><span class="line">		  proxy: &#123;</span><br><span class="line">		    <span class="string">'/api/'</span>: &#123;</span><br><span class="line">		      target: <span class="string">'域名'</span>,   <span class="comment">//代理接口</span></span><br><span class="line">		      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">		      pathRewrite: &#123;</span><br><span class="line">		        <span class="string">'^/api'</span>: <span class="string">''</span>   <span class="comment">//代理的路径</span></span><br><span class="line">		      &#125;</span><br><span class="line">		  &#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="comment">// 设置代理</span></span><br><span class="line">		before: <span class="function"><span class="params">app</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// PWA 插件相关配置</span></span><br><span class="line">	pwa: &#123;&#125;,</span><br><span class="line">	<span class="comment">// 第三方插件配置</span></span><br><span class="line">	pluginOptions: &#123;</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-axios安装使用"><a href="#3-axios安装使用" class="headerlink" title="3.axios安装使用"></a>3.axios安装使用</h4><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>安装</span><br><span class="line">npm install axios <span class="comment">---ajax</span></span><br><span class="line">npm install qs <span class="comment">---序列化</span></span><br><span class="line"><span class="number">2.</span>全局使用</span><br><span class="line">同级目录新建文件<span class="keyword">https</span>.js</span><br><span class="line">在main.js使用以下引入并全局使用</span><br><span class="line"><span class="comment">----------不要使用use--------</span></span><br><span class="line">import <span class="keyword">https</span> <span class="built_in">from</span> <span class="string">'./https.js'</span></span><br><span class="line">Vue.prototype.$<span class="keyword">https</span>=<span class="keyword">https</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/vuecli3%2Bphp%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/3098875-3620afba8fd33c83.png" alt="https.js main.js"></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">这边是使用已封装好的axios</span><br><span class="line">----------------------</span><br><span class="line">https.js 内容如下：</span><br><span class="line">具体内容还没有去理解（会用就行，后面再去理解如何封装）</span><br><span class="line">------------------</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以下是发生跨域使用--还没有实践</span></span><br><span class="line"><span class="comment">//axios.defaults.timeout = 5000;                        //响应时间</span></span><br><span class="line"><span class="comment">//axios.defaults.headers.common['userKey'] = localStorage.token;</span></span><br><span class="line"><span class="comment">//axios.defaults.headers['Content-Type'] = 'application/x-www-form-urlencoded' //配置请求头</span></span><br><span class="line"><span class="comment">//axios.defaults.baseURL = '域名';   //配置接口地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//POST传参序列化(添加请求拦截器)</span></span><br><span class="line">axios.interceptors.request.use(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="comment">//在发送请求之前做某件事</span></span><br><span class="line">	<span class="keyword">if</span>(config.method  === <span class="string">'post'</span>)&#123;</span><br><span class="line">		config.data = qs.stringify(config.data);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> config;</span><br><span class="line">&#125;,<span class="function">(<span class="params">error</span>) =&gt;</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'错误的传参'</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回状态判断(添加响应拦截器)</span></span><br><span class="line">axios.interceptors.response.use(<span class="function">(<span class="params">res</span>) =&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//对响应数据做些事</span></span><br><span class="line">	<span class="keyword">if</span>(!res.data.success)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(res);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">	    <span class="keyword">if</span> (err &amp;&amp; err.response) &#123;</span><br><span class="line">	      <span class="keyword">switch</span> (err.response.status) &#123;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">	            <span class="built_in">console</span>.log(<span class="string">'错误请求'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">	            <span class="built_in">console</span>.log(<span class="string">'未授权，请重新登录'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'拒绝访问'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'请求错误,未找到该资源'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">405</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'请求方法未允许'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">408</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'请求超时'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'服务器端出错'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">501</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'网络未实现'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'网络错误'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">503</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'服务不可用'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">504</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'网络超时'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> <span class="number">505</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">'http版本不支持该请求'</span>)</span><br><span class="line">	          <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">default</span>:</span><br><span class="line">	          <span class="built_in">console</span>.log(<span class="string">`连接错误<span class="subst">$&#123;err.response.status&#125;</span>`</span>)</span><br><span class="line">	      &#125;</span><br><span class="line">	    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	      <span class="built_in">console</span>.log(<span class="string">'连接到服务器失败'</span>)</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="comment">// return Promise.resolve(err.response)</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回一个Promise(发送post请求)</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchPost</span>(<span class="params">url, params</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		axios.post(url, params)</span><br><span class="line">		.then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">			resolve(response);</span><br><span class="line">		&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">			reject(err);</span><br><span class="line">		&#125;)</span><br><span class="line">		.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">			reject(error)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">////返回一个Promise(发送get请求)</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchGet</span>(<span class="params">url, param</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		axios.get(url, &#123;params: param&#125;)</span><br><span class="line">		.then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">			resolve(response)</span><br><span class="line">		&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">			reject(err)</span><br><span class="line">		&#125;)</span><br><span class="line">		.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">			reject(error)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//暴露出口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	axios,</span><br><span class="line">	fetchPost,</span><br><span class="line">	fetchGet</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">组件使用：</span><br><span class="line">.....</span><br><span class="line">  created ()&#123;</span><br><span class="line">    <span class="keyword">this</span>.loginPost();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">      loginPost: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.$https.fetchPost(<span class="string">"/index.php/index/index"</span>,<span class="string">''</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="built_in">console</span>.log(res);</span><br><span class="line">          &#125;, <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="built_in">console</span>.info(<span class="string">'调用失败'</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>
<h4 id="4-Vue和Tp5-共享同一路由"><a href="#4-Vue和Tp5-共享同一路由" class="headerlink" title="4.Vue和Tp5 共享同一路由"></a>4.Vue和Tp5 共享同一路由</h4><p>起因：</p>
<ul>
<li>访问<a href="http://www.xxxx.com进入前端页面（vue项目）" target="_blank" rel="noopener">www.xxxx.com进入前端页面（vue项目）</a></li>
<li><a href="http://www.xxxx.com/admin.php/login" target="_blank" rel="noopener">www.xxxx.com/admin.php/login</a> 进入后台登陆界面（Tp5项目）</li>
<li>但是因为只有一个域名，所有每一次去访问域名则返回内容是 TP5  -&gt; index方法返回的数据<br>根本没办法返回数据至前端页面 也打不开vue前端页面</li>
</ul>
<p><a href="https://www.jianshu.com/p/fec73eaec081" target="_blank" rel="noopener">参考文章</a></p>
<h5 id="原理-vue和tp5有自己的路由，但是tp5用来做数据端就不需要这个了，直接设置为vue的nginx配置即可"><a href="#原理-vue和tp5有自己的路由，但是tp5用来做数据端就不需要这个了，直接设置为vue的nginx配置即可" class="headerlink" title="[原理]vue和tp5有自己的路由，但是tp5用来做数据端就不需要这个了，直接设置为vue的nginx配置即可"></a>[原理]vue和tp5有自己的路由，但是tp5用来做数据端就不需要这个了，直接设置为vue的nginx配置即可</h5><h5 id="4-1-nginx伪静态配置："><a href="#4-1-nginx伪静态配置：" class="headerlink" title="4.1 nginx伪静态配置："></a>4.1 nginx伪静态配置：</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/vuecli3%2Bphp%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/3098875-0d77e2b640fcc8c7.png" alt="nginx伪静态配置"></p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">直接复制：</span><br><span class="line">-------</span><br><span class="line">location / &#123;</span><br><span class="line"><span class="code">  try_files $uri $uri/ /index.html;</span></span><br><span class="line">&#125;</span><br><span class="line">location ~ ^/(thinkphp|vendor/phpunit|application|runtime)/.<span class="strong">*\.php</span></span><br><span class="line"><span class="strong">&#123;</span></span><br><span class="line"><span class="strong">    return 404;</span></span><br><span class="line"><span class="strong">&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="4-2nginx默认文件配置："><a href="#4-2nginx默认文件配置：" class="headerlink" title="4.2nginx默认文件配置："></a>4.2nginx默认文件配置：</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/vuecli3%2Bphp%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/3098875-e18a02d85391908c.png" alt="默认文件配置"><br>设置优先级</p>
<h5 id="4-3将打包好的vue文件包dist上传到public目录下并解压："><a href="#4-3将打包好的vue文件包dist上传到public目录下并解压：" class="headerlink" title="4.3将打包好的vue文件包dist上传到public目录下并解压："></a>4.3将打包好的vue文件包dist上传到public目录下并解压：</h5><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://phpcoder-1259614901.cos.ap-guangzhou.myqcloud.com/phpcoder/vuecli3%2Bphp%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/11860463-949e19e810d5b496.webp" alt="上传服务器"></p>
<h5 id="4-3请求接口"><a href="#4-3请求接口" class="headerlink" title="4.3请求接口"></a>4.3请求接口</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">原本：/api/index/index</span><br><span class="line">      loginPost: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.$https.fetchPost(<span class="string">"/index.php/index/index"</span>,<span class="string">''</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="built_in">console</span>.log(res);</span><br><span class="line">          &#125;, <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="built_in">console</span>.info(<span class="string">'调用失败'</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<h4 id="线上测试结果"><a href="#线上测试结果" class="headerlink" title="线上测试结果"></a>线上测试结果</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U078b3988cb1849b395aa17532d956ae0H.jpg" alt="返回前端数据"></p>
<h4 id="以上配置后–本地环境与线上环境获取数据"><a href="#以上配置后–本地环境与线上环境获取数据" class="headerlink" title="以上配置后–本地环境与线上环境获取数据"></a>以上配置后–本地环境与线上环境获取数据</h4><ul>
<li>本地环境<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  loginPost: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.$https.fetchPost(<span class="string">"/api/index.php/index/index"</span>, <span class="string">""</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res.data);</span><br><span class="line">      &#125;,</span><br><span class="line">      res =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">"调用失败"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>线上环境<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  loginPost: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.$https.fetchPost(<span class="string">"index.php/index/index"</span>, <span class="string">""</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res.data);</span><br><span class="line">      &#125;,</span><br><span class="line">      res =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.info(<span class="string">"调用失败"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="安装vue脚手架出现以下问题-电脑本身禁止运行脚本"><a href="#安装vue脚手架出现以下问题-电脑本身禁止运行脚本" class="headerlink" title="安装vue脚手架出现以下问题[电脑本身禁止运行脚本]"></a>安装vue脚手架出现以下问题[电脑本身禁止运行脚本]</h4></li>
</ul>
<div class="note danger">
            <p>无法加载文件 C:\Users\1111111\AppData\Roaming\npm\vue.ps1,因为在此系统禁止运行脚本</p>
          </div>

<ul>
<li><p>解决：管理员身份打开window powershell</p>
</li>
<li><p>输入set-ExecutionPolicy RemoteSigned 选择Y或者A</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://ae01.alicdn.com/kf/U85686d21b742488793d724fff32272f11.jpg" alt="操作图"></p>
</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
</search>
